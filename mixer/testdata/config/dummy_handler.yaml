apiVersion: "config.istio.io/v1alpha2"
kind: adapter
metadata:
  name: mytestadapter
  namespace: istio-system
spec:
  # name of the adapter
  name: "mytestadapter" # TODO might not be needed if we use the resource name.
  # description of the adapter
  description: "my test adapter description"
  # base64 encoded template supported by the adapter
  templates: [
    # list entry template
    # generated using command
    # DESC="list_entry.descriptor"; protoc mixer/template/listentry/template_handler_service.proto -o$DESC -I$GOPATH/src/istio.io/istio/vendor/istio.io/api -I. -I$GOPATH/src/istio.io/istio/vendor/github.com/gogo/protobuf -I$GOPATH/src/istio.io/istio/vendor/github.com/gogo/googleapis; go run mixer/tools/toBase64/main.go $DESC
    "CokFCjdtaXhlci90ZW1wbGF0ZS9saXN0ZW50cnkvdGVtcGxhdGVfaGFuZGxlcl9zZXJ2aWNlLnByb3RvEglsaXN0ZW50cnkaFGdvZ29wcm90by9nb2dvLnByb3RvGixtaXhlci9hZGFwdGVyL21vZGVsL3YxYmV0YTEvZXh0ZW5zaW9ucy5wcm90bxoZZ29vZ2xlL3Byb3RvYnVmL2FueS5wcm90bxonbWl4ZXIvYWRhcHRlci9tb2RlbC92MWJldGExL2NoZWNrLnByb3RvIqQBChZIYW5kbGVMaXN0RW50cnlSZXF1ZXN0EjIKCGluc3RhbmNlGAEgASgLMhYubGlzdGVudHJ5Lkluc3RhbmNlTXNnUghpbnN0YW5jZRI7Cg5hZGFwdGVyX2NvbmZpZxgCIAEoCzIULmdvb2dsZS5wcm90b2J1Zi5BbnlSDWFkYXB0ZXJDb25maWcSGQoIZGVkdXBfaWQYAyABKAlSB2RlZHVwSWQiOgoLSW5zdGFuY2VNc2cSFQoEbmFtZRivyrwiIAEoCVIEbmFtZRIUCgV2YWx1ZRgBIAEoCVIFdmFsdWUiBgoEVHlwZSIlCg1JbnN0YW5jZVBhcmFtEhQKBXZhbHVlGAEgASgJUgV2YWx1ZTJ+ChZIYW5kbGVMaXN0RW50cnlTZXJ2aWNlEmQKD0hhbmRsZUxpc3RFbnRyeRIhLmxpc3RlbnRyeS5IYW5kbGVMaXN0RW50cnlSZXF1ZXN0Gi4uaXN0aW8ubWl4ZXIuYWRhcHRlci5tb2RlbC52MWJldGExLkNoZWNrUmVzdWx0QiH40uSTAgCC3eSTAglsaXN0ZW50cnnI4R4AqOIeAPDhHgBiBnByb3RvMw=="
  ]
  # list checker adapter config
  # generated using command
  # DESC="list.descriptor"; protoc mixer/adapter/list/config/config.proto -o$DESC -I$GOPATH/src/istio.io/istio/vendor/istio.io/api -I. -I$GOPATH/src/istio.io/istio/vendor/github.com/gogo/protobuf; go run mixer/tools/toBase64/main.go $DESC
  config: "CqEFCiZtaXhlci9hZGFwdGVyL2xpc3QvY29uZmlnL2NvbmZpZy5wcm90bxITYWRhcHRlci5saXN0LmNvbmZpZxoeZ29vZ2xlL3Byb3RvYnVmL2R1cmF0aW9uLnByb3RvGhRnb2dvcHJvdG8vZ29nby5wcm90byKNBAoGUGFyYW1zEiEKDHByb3ZpZGVyX3VybBgBIAEoCVILcHJvdmlkZXJVcmwSTgoQcmVmcmVzaF9pbnRlcnZhbBgCIAEoCzIZLmdvb2dsZS5wcm90b2J1Zi5EdXJhdGlvbkIIyN4fAJjfHwFSD3JlZnJlc2hJbnRlcnZhbBI1CgN0dGwYAyABKAsyGS5nb29nbGUucHJvdG9idWYuRHVyYXRpb25CCMjeHwCY3x8BUgN0dGwSTgoQY2FjaGluZ19pbnRlcnZhbBgEIAEoCzIZLmdvb2dsZS5wcm90b2J1Zi5EdXJhdGlvbkIIyN4fAJjfHwFSD2NhY2hpbmdJbnRlcnZhbBIqChFjYWNoaW5nX3VzZV9jb3VudBgFIAEoBVIPY2FjaGluZ1VzZUNvdW50EhwKCW92ZXJyaWRlcxgGIAMoCVIJb3ZlcnJpZGVzEkgKCmVudHJ5X3R5cGUYByABKA4yKS5hZGFwdGVyLmxpc3QuY29uZmlnLlBhcmFtcy5MaXN0RW50cnlUeXBlUgllbnRyeVR5cGUSHAoJYmxhY2tsaXN0GAggASgIUglibGFja2xpc3QiVwoNTGlzdEVudHJ5VHlwZRILCgdTVFJJTkdTEAASHAoYQ0FTRV9JTlNFTlNJVElWRV9TVFJJTkdTEAESEAoMSVBfQUREUkVTU0VTEAISCQoFUkVHRVgQA0IUWgZjb25maWfI4R4AqOIeAPDhHgBiBnByb3RvMw=="

---

apiVersion: "config.istio.io/v1alpha2"
kind: handler
metadata:
  name: hdlr
  namespace: istio-system
spec:
  # adapter name
  adapter: "mytestadapter.adapter"
  # adapter configuration
  params:
    fooint: 123
    foostr: "testingstr"
    foodouble: 1.2
    foosubmsg:
      bar: "barstr"
    foomap:
      1234: "barstrinmap"
  connection:
    address: "test.google.com"
