---
apiVersion: install.istio.io/v1alpha1
kind: IstioOperator
metadata:
  namespace: istio-system
  name: example-integrate-keyfactor-ca
spec:
  profile: demo
  values:
    global:
      multiCluster:
        clusterName: KeyfactorWithSecret
      controlPlaneSecurityEnabled: true
      caProvider: "KeyfactorCA"
      caAddress: ""
      keyfactor: 
        # Empty for using yaml global config
        # Each namespace must have one secret (pod only ready secret within namespace)
        secretName: "istio-keyfactor-secret"
        # Alias name, remove to ignore from metadata
        metadata:
          - name: Cluster
            alias: Cluster
          - name: Service
            alias: Service
          - name: PodName
            alias: PodName
          - name: PodNamespace
            alias: PodNamespace
          - name: PodIP
            alias: PodIP
          - name: TrustDomain
            alias: TrustDomain

