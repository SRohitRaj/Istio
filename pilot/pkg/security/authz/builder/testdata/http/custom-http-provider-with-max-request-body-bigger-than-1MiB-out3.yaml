name: envoy.filters.http.ext_authz
typedConfig:
  '@type': type.googleapis.com/envoy.extensions.filters.http.ext_authz.v3.ExtAuthz
  filterEnabledMetadata:
    filter: envoy.filters.http.rbac
    path:
    - key: istio_ext_authz_shadow_effective_policy_id
    value:
      stringMatch:
        prefix: istio-ext-authz
  httpService:
    serverUri:
      cluster: outbound|9000||my-custom-ext-authz.foo.svc.cluster.local
      timeout: 600s
      uri: http://my-custom-ext-authz.foo.svc.cluster.local
  transportApiVersion: V3
  withRequestBody:
    maxRequestBytes: 1048577
