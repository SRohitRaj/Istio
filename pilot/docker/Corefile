# Used in sidecars, when DNS capture using CoreDNS is enabled.
#

# All cluster.local redirected to Istiod, over TLS
cluster.local:15053 {
    errors
    log
    prometheus :15020

    forward . tls://istiod.istio-system.svc {
        tls /var/run/secrets/istio/ca.pem
    }

}

# Everything else to the configured resolver.
# In future we may also redirect this over DNS-over-TLS.
.:15053 {
    errors
    forward . /etc/resolv.conf {
    }
}


