{
  "stats_config": {
    "use_all_default_tags": false
  },
  "admin": {
    "access_log_path": "/dev/stdout",
    "address": {
      "socket_address": {
        "address": "127.0.0.1",
        "port_value": 15000
      }
    }
  },
  "static_resources": {
    "listeners": [
      {
        "name": "legacy15003",
        "address": {
          "socket_address": {
            "address": "0.0.0.0",
            "port_value": 15003
          }
        },
        "filter_chains": [
          {
            "filters": [
              {
                "name": "envoy.tcp_proxy",
                "config": {
                  "deprecated_v1": true,
                  "value": {
                    "stat_prefix": "legacy15003",
                    "route_config": {
                      "routes": [
                        {
                          "cluster": "pilot_http"
                        }
                      ]
                    }
                  }
                }
              }
            ]
          }
        ]
      },
      {
        "name": "tls15005",
        "address": {
          "socket_address": {
            "address": "0.0.0.0",
            "port_value": 15005
          }
        },
        "filter_chains": [
          {
            "filter_chain_match": {
              "sni_domains": []
            },
            "tls_context": {
              "common_tls_context": {
                "tls_certificates": [
                  {
                    "certificate_chain": {
                      "filename": "/etc/certs/cert-chain.pem"
                    },
                    "private_key": {
                      "filename": "/etc/certs/key.pem"
                    }
                  }
                ],
                "validation_context": {
                  "trusted_ca": {
                    "filename": "/etc/certs/root-cert.pem"
                  }
                }
              },
              "require_client_certificate": true
            },
            "filters": [
              {
                "name": "envoy.tcp_proxy",
                "config": {
                  "deprecated_v1": true,
                  "value": {
                    "stat_prefix": "tls15005",
                    "route_config": {
                      "routes": [
                        {
                          "cluster": "pilot_http"
                        }
                      ]
                    }
                  }
                }
              }
            ]
          }
        ]
      },
      {
        "name": "http15007",
        "address": {
          "socket_address": {
            "address": "0.0.0.0",
            "port_value": 15007
          }
        },
        "filter_chains": [
          {
            "filters": [
              {
                "name": "envoy.tcp_proxy",
                "config": {
                  "deprecated_v1": true,
                  "value": {
                    "stat_prefix": "http15007",
                    "route_config": {
                      "routes": [
                        {
                          "cluster": "pilot_http"
                        }
                      ]
                    }
                  }
                }
              }
            ]
          }
        ]
      }
    ],
    "clusters": [
      {
        "name": "pilot_http",
        "type": "STRICT_DNS",
        "connect_timeout": {
          "seconds": 5,
          "nanos": 0
        },
        "lb_policy": "ROUND_ROBIN",
        "hosts": [
          {
            "socket_address": {
              "address": "localhost",
              "port_value": 8080
            }
          }
        ],
        "circuit_breakers": {
          "default": {
            "max_connections": 100000,
            "max_pending_requests": 100000,
            "max_requests": 100000
          }
        }
      }
    ]
  }
}
