2018-09-28T22:25:19.738271Z	info	FLAG: --applicationPorts="[8000]"
2018-09-28T22:25:19.738321Z	info	FLAG: --binaryPath="/usr/local/bin/envoy"
2018-09-28T22:25:19.738327Z	info	FLAG: --concurrency="0"
2018-09-28T22:25:19.738330Z	info	FLAG: --configPath="/etc/istio/proxy"
2018-09-28T22:25:19.738334Z	info	FLAG: --connectTimeout="10s"
2018-09-28T22:25:19.738337Z	info	FLAG: --controlPlaneAuthPolicy="NONE"
2018-09-28T22:25:19.738339Z	info	FLAG: --customConfigFile=""
2018-09-28T22:25:19.738344Z	info	FLAG: --disableInternalTelemetry="false"
2018-09-28T22:25:19.738350Z	info	FLAG: --discoveryAddress="istio-pilot.istio-system:15010"
2018-09-28T22:25:19.738352Z	info	FLAG: --domain=""
2018-09-28T22:25:19.738355Z	info	FLAG: --drainDuration="45s"
2018-09-28T22:25:19.738358Z	info	FLAG: --help="false"
2018-09-28T22:25:19.738360Z	info	FLAG: --id=""
2018-09-28T22:25:19.738362Z	info	FLAG: --ip=""
2018-09-28T22:25:19.738365Z	info	FLAG: --log_as_json="false"
2018-09-28T22:25:19.738367Z	info	FLAG: --log_caller=""
2018-09-28T22:25:19.738369Z	info	FLAG: --log_output_level="default:info"
2018-09-28T22:25:19.738372Z	info	FLAG: --log_rotate=""
2018-09-28T22:25:19.738374Z	info	FLAG: --log_rotate_max_age="30"
2018-09-28T22:25:19.738377Z	info	FLAG: --log_rotate_max_backups="1000"
2018-09-28T22:25:19.738379Z	info	FLAG: --log_rotate_max_size="104857600"
2018-09-28T22:25:19.738382Z	info	FLAG: --log_stacktrace_level="default:none"
2018-09-28T22:25:19.738389Z	info	FLAG: --log_target="[stdout]"
2018-09-28T22:25:19.738392Z	info	FLAG: --parentShutdownDuration="1m0s"
2018-09-28T22:25:19.738407Z	info	FLAG: --proxyAdminPort="15000"
2018-09-28T22:25:19.738410Z	info	FLAG: --proxyLogLevel="warn"
2018-09-28T22:25:19.738412Z	info	FLAG: --serviceCluster="httpbin.default"
2018-09-28T22:25:19.738415Z	info	FLAG: --serviceregistry="Kubernetes"
2018-09-28T22:25:19.738417Z	info	FLAG: --statsdUdpAddress=""
2018-09-28T22:25:19.738420Z	info	FLAG: --statusPort="15020"
2018-09-28T22:25:19.738422Z	info	FLAG: --templateFile=""
2018-09-28T22:25:19.738427Z	info	FLAG: --zipkinAddress="zipkin.istio-system:9411"
2018-09-28T22:25:19.738446Z	info	Version quanlin@quanlin.svl.corp.google.com-docker.io/istio-8a84d6ddcadef0505f0678e99d65eff88ff0b496-dirty-8a84d6ddcadef0505f0678e99d65eff88ff0b496-dirty-Modified
2018-09-28T22:25:19.738471Z	info	Proxy role: model.Proxy{ClusterID:"", Type:"sidecar", IPAddress:"10.16.0.69", ID:"httpbin-6d6c88c4f5-q8h2t.foo", Domain:"foo.svc.cluster.local", Metadata:map[string]string(nil)}
2018-09-28T22:25:19.740456Z	info	Effective config: binaryPath: /usr/local/bin/envoy
configPath: /etc/istio/proxy
connectTimeout: 10s
discoveryAddress: istio-pilot.istio-system:15010
drainDuration: 45s
parentShutdownDuration: 60s
proxyAdminPort: 15000
serviceCluster: httpbin.default
statNameLength: 189
zipkinAddress: zipkin.istio-system:9411

2018-09-28T22:25:19.740480Z	info	Monitored certs: []envoy.CertSource{envoy.CertSource{Directory:"/etc/certs/", Files:[]string{"cert-chain.pem", "key.pem", "root-cert.pem"}}}
2018-09-28T22:25:19.740597Z	info	Opening status port 15020

2018-09-28T22:25:19.740812Z	info	Starting proxy agent
2018-09-28T22:25:19.741006Z	info	Received new config, resetting budget
2018-09-28T22:25:19.741012Z	info	Reconciling retry (budget 10)
2018-09-28T22:25:19.741023Z	info	Epoch 0 starting
2018-09-28T22:25:19.743140Z	info	Envoy command: [-c /etc/istio/proxy/envoy-rev0.json --restart-epoch 0 --drain-time-s 45 --parent-shutdown-time-s 60 --service-cluster httpbin.default --service-node sidecar~10.16.0.69~httpbin-6d6c88c4f5-q8h2t.foo~foo.svc.cluster.local --max-obj-name-len 189 --allow-unknown-fields -l warn --v2-config-only]
[2018-09-28 22:25:19.784][11][info][main] external/envoy/source/server/server.cc:202] initializing epoch 0 (hot restart version=10.200.16384.256.options=capacity=16384, num_slots=8209 hash=228984379728933363 size=4882536)
[2018-09-28 22:25:19.784][11][info][main] external/envoy/source/server/server.cc:204] statically linked extensions:
[2018-09-28 22:25:19.784][11][info][main] external/envoy/source/server/server.cc:206]   access_loggers: envoy.file_access_log,envoy.http_grpc_access_log
[2018-09-28 22:25:19.784][11][info][main] external/envoy/source/server/server.cc:209]   filters.http: envoy.buffer,envoy.cors,envoy.ext_authz,envoy.fault,envoy.filters.http.header_to_metadata,envoy.filters.http.jwt_authn,envoy.filters.http.rbac,envoy.grpc_http1_bridge,envoy.grpc_json_transcoder,envoy.grpc_web,envoy.gzip,envoy.health_check,envoy.http_dynamo_filter,envoy.ip_tagging,envoy.lua,envoy.rate_limit,envoy.router,envoy.squash,istio_authn,jwt-auth,mixer
[2018-09-28 22:25:19.784][11][info][main] external/envoy/source/server/server.cc:212]   filters.listener: envoy.listener.original_dst,envoy.listener.proxy_protocol,envoy.listener.tls_inspector
[2018-09-28 22:25:19.784][11][info][main] external/envoy/source/server/server.cc:215]   filters.network: envoy.client_ssl_auth,envoy.echo,envoy.ext_authz,envoy.filters.network.rbac,envoy.filters.network.thrift_proxy,envoy.http_connection_manager,envoy.mongo_proxy,envoy.ratelimit,envoy.redis_proxy,envoy.tcp_proxy,mixer
[2018-09-28 22:25:19.784][11][info][main] external/envoy/source/server/server.cc:217]   stat_sinks: envoy.dog_statsd,envoy.metrics_service,envoy.stat_sinks.hystrix,envoy.statsd
[2018-09-28 22:25:19.784][11][info][main] external/envoy/source/server/server.cc:219]   tracers: envoy.dynamic.ot,envoy.lightstep,envoy.zipkin
[2018-09-28 22:25:19.784][11][info][main] external/envoy/source/server/server.cc:222]   transport_sockets.downstream: alts,envoy.transport_sockets.capture,raw_buffer,tls
[2018-09-28 22:25:19.784][11][info][main] external/envoy/source/server/server.cc:225]   transport_sockets.upstream: alts,envoy.transport_sockets.capture,raw_buffer,tls
[2018-09-28 22:25:19.790][11][info][config] external/envoy/source/server/configuration_impl.cc:50] loading 0 static secret(s)
[2018-09-28 22:25:19.794][11][info][config] external/envoy/source/server/configuration_impl.cc:56] loading 3 cluster(s)
[2018-09-28 22:25:19.802][11][warning][upstream] external/envoy/source/common/config/grpc_mux_impl.cc:248] gRPC config stream closed: 14, no healthy upstream
[2018-09-28 22:25:19.802][11][warning][upstream] external/envoy/source/common/config/grpc_mux_impl.cc:42] Unable to establish new stream
[2018-09-28 22:25:19.802][11][info][config] external/envoy/source/server/configuration_impl.cc:61] loading 1 listener(s)
[2018-09-28 22:25:19.805][11][info][config] external/envoy/source/server/configuration_impl.cc:95] loading tracing configuration
[2018-09-28 22:25:19.805][11][info][config] external/envoy/source/server/configuration_impl.cc:104]   loading tracing driver: envoy.zipkin
[2018-09-28 22:25:19.805][11][info][config] external/envoy/source/server/configuration_impl.cc:117] loading stats sink configuration
[2018-09-28 22:25:19.806][11][info][main] external/envoy/source/server/server.cc:446] starting main dispatch loop
[2018-09-28 22:25:19.830][11][info][upstream] external/envoy/source/common/upstream/cluster_manager_impl.cc:130] cm init: initializing cds
[2018-09-28 22:25:20.594][11][warning][upstream] external/envoy/source/common/config/grpc_mux_impl.cc:231] gRPC config for type.googleapis.com/envoy.api.v2.Cluster update rejected: Proto constraint validation failed (ClusterValidationError.TlsContext: ["embedded message failed validation"] | caused by UpstreamTlsContextValidationError.CommonTlsContext: ["embedded message failed validation"] | caused by CommonTlsContextValidationError.TlsCertificateSdsSecretConfigs[i]: ["embedded message failed validation"] | caused by SdsSecretConfigValidationError.SdsConfig: ["embedded message failed validation"] | caused by ConfigSourceValidationError.ApiConfigSource: ["embedded message failed validation"] | caused by ApiConfigSourceValidationError.GrpcServices[i]: ["embedded message failed validation"] | caused by GrpcServiceValidationError.GoogleGrpc: ["embedded message failed validation"] | caused by GoogleGrpcValidationError.ChannelCredentials: ["embedded message failed validation"] | caused by field: "credential_specifier", reason: is required): name: "outbound|53||kube-dns.kube-system.svc.cluster.local"
type: EDS
eds_cluster_config {
  eds_config {
    ads {
    }
  }
  service_name: "outbound|53||kube-dns.kube-system.svc.cluster.local"
}
connect_timeout {
  seconds: 1
}
circuit_breakers {
  thresholds {
  }
}
tls_context {
  common_tls_context {
    validation_context {
      trusted_ca {
        filename: "/etc/istio/certs/ca-root-cert.pem"
      }
      verify_subject_alt_name: "spiffe://cluster.local/ns/kube-system/sa/kube-dns"
    }
    alpn_protocols: "istio"
    tls_certificate_sds_secret_configs {
      name: "spiffe://cluster.local/ns/kube-system/sa/kube-dns"
      sds_config {
        api_config_source {
          api_type: GRPC
          grpc_services {
            google_grpc {
              target_uri: "unix:/var/run/sds/uds_path"
              channel_credentials {
                3: ""
              }
              call_credentials {
                google_compute_engine {
                }
              }
              stat_prefix: "sdsstat"
            }
          }
        }
      }
    }
  }
  sni: "outbound|53||kube-dns.kube-system.svc.cluster.local"
}

[2018-09-28 22:25:20.595][11][warning][config] bazel-out/k8-opt/bin/external/envoy/source/common/config/_virtual_includes/grpc_mux_subscription_lib/common/config/grpc_mux_subscription_impl.h:70] gRPC config for type.googleapis.com/envoy.api.v2.Cluster rejected: Proto constraint validation failed (ClusterValidationError.TlsContext: ["embedded message failed validation"] | caused by UpstreamTlsContextValidationError.CommonTlsContext: ["embedded message failed validation"] | caused by CommonTlsContextValidationError.TlsCertificateSdsSecretConfigs[i]: ["embedded message failed validation"] | caused by SdsSecretConfigValidationError.SdsConfig: ["embedded message failed validation"] | caused by ConfigSourceValidationError.ApiConfigSource: ["embedded message failed validation"] | caused by ApiConfigSourceValidationError.GrpcServices[i]: ["embedded message failed validation"] | caused by GrpcServiceValidationError.GoogleGrpc: ["embedded message failed validation"] | caused by GoogleGrpcValidationError.ChannelCredentials: ["embedded message failed validation"] | caused by field: "credential_specifier", reason: is required): name: "outbound|53||kube-dns.kube-system.svc.cluster.local"
type: EDS
eds_cluster_config {
  eds_config {
    ads {
    }
  }
  service_name: "outbound|53||kube-dns.kube-system.svc.cluster.local"
}
connect_timeout {
  seconds: 1
}
circuit_breakers {
  thresholds {
  }
}
tls_context {
  common_tls_context {
    validation_context {
      trusted_ca {
        filename: "/etc/istio/certs/ca-root-cert.pem"
      }
      verify_subject_alt_name: "spiffe://cluster.local/ns/kube-system/sa/kube-dns"
    }
    alpn_protocols: "istio"
    tls_certificate_sds_secret_configs {
      name: "spiffe://cluster.local/ns/kube-system/sa/kube-dns"
      sds_config {
        api_config_source {
          api_type: GRPC
          grpc_services {
            google_grpc {
              target_uri: "unix:/var/run/sds/uds_path"
              channel_credentials {
                3: ""
              }
              call_credentials {
                google_compute_engine {
                }
              }
              stat_prefix: "sdsstat"
            }
          }
        }
      }
    }
  }
  sni: "outbound|53||kube-dns.kube-system.svc.cluster.local"
}

[2018-09-28 22:25:20.595][11][info][upstream] external/envoy/source/common/upstream/cluster_manager_impl.cc:134] cm init: all clusters initialized
[2018-09-28 22:25:20.595][11][info][main] external/envoy/source/server/server.cc:415] all clusters initialized. initializing init manager
[2018-09-28 22:25:20.651][11][warning][upstream] external/envoy/source/common/config/grpc_mux_impl.cc:231] gRPC config for type.googleapis.com/envoy.api.v2.Listener update rejected: Proto constraint validation failed (ListenerValidationError.FilterChains[i]: ["embedded message failed validation"] | caused by FilterChainValidationError.TlsContext: ["embedded message failed validation"] | caused by DownstreamTlsContextValidationError.CommonTlsContext: ["embedded message failed validation"] | caused by CommonTlsContextValidationError.TlsCertificateSdsSecretConfigs[i]: ["embedded message failed validation"] | caused by SdsSecretConfigValidationError.SdsConfig: ["embedded message failed validation"] | caused by ConfigSourceValidationError.ApiConfigSource: ["embedded message failed validation"] | caused by ApiConfigSourceValidationError.GrpcServices[i]: ["embedded message failed validation"] | caused by GrpcServiceValidationError.GoogleGrpc: ["embedded message failed validation"] | caused by GoogleGrpcValidationError.ChannelCredentials: ["embedded message failed validation"] | caused by field: "credential_specifier", reason: is required): name: "10.16.0.69_8000"
address {
  socket_address {
    address: "10.16.0.69"
    port_value: 8000
  }
}
filter_chains {
  tls_context {
    common_tls_context {
      validation_context {
        trusted_ca {
          filename: "/etc/istio/certs/ca-root-cert.pem"
        }
      }
      alpn_protocols: "h2"
      alpn_protocols: "http/1.1"
      tls_certificate_sds_secret_configs {
        name: "spiffe://cluster.local/ns/foo/sa/default"
        sds_config {
          api_config_source {
            api_type: GRPC
            grpc_services {
              google_grpc {
                target_uri: "unix:/var/run/sds/uds_path"
                channel_credentials {
                  3: ""
                }
                call_credentials {
                  google_compute_engine {
                  }
                }
                stat_prefix: "sdsstat"
              }
            }
          }
        }
      }
    }
    require_client_certificate {
      value: true
    }
  }
  filters {
    name: "envoy.http_connection_manager"
    config {
      fields {
        key: "access_log"
        value {
          list_value {
            values {
              struct_value {
                fields {
                  key: "config"
                  value {
                    struct_value {
                      fields {
                        key: "format"
                        value {
                          string_value: "[%START_TIME%] \"%REQ(:METHOD)% %REQ(X-ENVOY-ORIGINAL-PATH?:PATH)%%PROTOCOL%\" %RESPONSE_CODE% %RESPONSE_FLAGS% %BYTES_RECEIVED% %BYTES_SENT% %DURATION% %RESP(X-ENVOY-UPSTREAM-SERVICE-TIME)% \"%REQ(X-FORWARDED-FOR)%\" \"%REQ(USER-AGENT)%\" \"%REQ(X-REQUEST-ID)%\" \"%REQ(:AUTHORITY)%\" \"%UPSTREAM_HOST%\" %UPSTREAM_CLUSTER% %UPSTREAM_LOCAL_ADDRESS% %DOWNSTREAM_LOCAL_ADDRESS% %DOWNSTREAM_REMOTE_ADDRESS% %REQUESTED_SERVER_NAME%\n"
                        }
                      }
                      fields {
                        key: "path"
                        value {
                          string_value: "/dev/stdout"
                        }
                      }
                    }
                  }
                }
                fields {
                  key: "name"
                  value {
                    string_value: "envoy.file_access_log"
                  }
                }
              }
            }
          }
        }
      }
      fields {
        key: "forward_client_cert_details"
        value {
          string_value: "APPEND_FORWARD"
        }
      }
      fields {
        key: "generate_request_id"
        value {
          bool_value: true
        }
      }
      fields {
        key: "http_filters"
        value {
          list_value {
            values {
              struct_value {
                fields {
                  key: "config"
                  value {
                    struct_value {
                      fields {
                        key: "policy"
                        value {
                          struct_value {
                            fields {
                              key: "peers"
                              value {
                                list_value {
                                  values {
                                    struct_value {
                                      fields {
                                        key: "mtls"
                                        value {
                                          struct_value {
                                          }
                                        }
                                      }
                                    }
                                  }
                                }
                              }
                            }
                          }
                        }
                      }
                    }
                  }
                }
                fields {
                  key: "name"
                  value {
                    string_value: "istio_authn"
                  }
                }
              }
            }
            values {
              struct_value {
                fields {
                  key: "config"
                  value {
                    struct_value {
                      fields {
                        key: "default_destination_service"
                        value {
                          string_value: "default"
                        }
                      }
                      fields {
                        key: "mixer_attributes"
                        value {
                          struct_value {
                            fields {
                              key: "attributes"
                              value {
                                struct_value {
                                  fields {
                                    key: "context.reporter.kind"
                                    value {
                                      struct_value {
                                        fields {
                                          key: "string_value"
                                          value {
                                            string_value: "inbound"
                                          }
                                        }
                                      }
                                    }
                                  }
                                  fields {
                                    key: "context.reporter.uid"
                                    value {
                                      struct_value {
                                        fields {
                                          key: "string_value"
                                          value {
                                            string_value: "kubernetes://httpbin-6d6c88c4f5-q8h2t.foo"
                                          }
                                        }
                                      }
                                    }
                                  }
                                  fields {
                                    key: "destination.ip"
                                    value {
                                      struct_value {
                                        fields {
                                          key: "bytes_value"
                                          value {
                                            string_value: "AAAAAAAAAAAAAP//ChAARQ=="
                                          }
                                        }
                                      }
                                    }
                                  }
                                  fields {
                                    key: "destination.namespace"
                                    value {
                                      struct_value {
                                        fields {
                                          key: "string_value"
                                          value {
                                            string_value: "foo"
                                          }
                                        }
                                      }
                                    }
                                  }
                                  fields {
                                    key: "destination.port"
                                    value {
                                      struct_value {
                                        fields {
                                          key: "int64_value"
                                          value {
                                            string_value: "8000"
                                          }
                                        }
                                      }
                                    }
                                  }
                                  fields {
                                    key: "destination.uid"
                                    value {
                                      struct_value {
                                        fields {
                                          key: "string_value"
                                          value {
                                            string_value: "kubernetes://httpbin-6d6c88c4f5-q8h2t.foo"
                                          }
                                        }
                                      }
                                    }
                                  }
                                }
                              }
                            }
                          }
                        }
                      }
                      fields {
                        key: "service_configs"
                        value {
                          struct_value {
                            fields {
                              key: "default"
                              value {
                                struct_value {
                                }
                              }
                            }
                          }
                        }
                      }
                      fields {
                        key: "transport"
                        value {
                          struct_value {
                            fields {
                              key: "attributes_for_mixer_proxy"
                              value {
                                struct_value {
                                  fields {
                                    key: "attributes"
                                    value {
                                      struct_value {
                                        fields {
                                          key: "source.uid"
                                          value {
                                            struct_value {
                                              fields {
                                                key: "string_value"
                                                value {
                                                  string_value: "kubernetes://httpbin-6d6c88c4f5-q8h2t.foo"
                                                }
                                              }
                                            }
                                          }
                                        }
                                      }
                                    }
                                  }
                                }
                              }
                            }
                            fields {
                              key: "check_cluster"
                              value {
                                string_value: "outbound|9091||istio-policy.istio-system.svc.cluster.local"
                              }
                            }
                            fields {
                              key: "network_fail_policy"
                              value {
                                struct_value {
                                  fields {
                                    key: "policy"
                                    value {
                                      string_value: "FAIL_CLOSE"
                                    }
                                  }
                                }
                              }
                            }
                            fields {
                              key: "report_cluster"
                              value {
                                string_value: "outbound|9091||istio-telemetry.istio-system.svc.cluster.local"
                              }
                            }
                          }
                        }
                      }
                    }
                  }
                }
                fields {
                  key: "name"
                  value {
                    string_value: "mixer"
                  }
                }
              }
            }
            values {
              struct_value {
                fields {
                  key: "name"
                  value {
                    string_value: "envoy.cors"
                  }
                }
              }
            }
            values {
              struct_value {
                fields {
                  key: "name"
                  value {
                    string_value: "envoy.fault"
                  }
                }
              }
            }
            values {
              struct_value {
                fields {
                  key: "name"
                  value {
                    string_value: "envoy.router"
                  }
                }
              }
            }
          }
        }
      }
      fields {
        key: "route_config"
        value {
          struct_value {
            fields {
              key: "name"
              value {
                string_value: "inbound|8000||httpbin.foo.svc.cluster.local"
              }
            }
            fields {
              key: "validate_clusters"
              value {
                bool_value: false
              }
            }
            fields {
              key: "virtual_hosts"
              value {
                list_value {
                  values {
                    struct_value {
                      fields {
                        key: "domains"
                        value {
                          list_value {
                            values {
                              string_value: "*"
                            }
                          }
                        }
                      }
                      fields {
                        key: "name"
                        value {
                          string_value: "inbound|http|8000"
                        }
                      }
                      fields {
                        key: "routes"
                        value {
                          list_value {
                            values {
                              struct_value {
                                fields {
                                  key: "decorator"
                                  value {
                                    struct_value {
                                      fields {
                                        key: "operation"
                                        value {
                                          string_value: "httpbin.foo.svc.cluster.local:8000/*"
                                        }
                                      }
                                    }
                                  }
                                }
                                fields {
                                  key: "match"
                                  value {
                                    struct_value {
                                      fields {
                                        key: "prefix"
                                        value {
                                          string_value: "/"
                                        }
                                      }
                                    }
                                  }
                                }
                                fields {
                                  key: "per_filter_config"
                                  value {
                                    struct_value {
                                      fields {
                                        key: "mixer"
                                        value {
                                          struct_value {
                                            fields {
                                              key: "mixer_attributes"
                                              value {
                                                struct_value {
                                                  fields {
                                                    key: "attributes"
                                                    value {
                                                      struct_value {
                                                        fields {
                                                          key: "destination.service.host"
                                                          value {
                                                            struct_value {
                                                              fields {
                                                                key: "string_value"
                                                                value {
                                                                  string_value: "httpbin.foo.svc.cluster.local"
                                                                }
                                                              }
                                                            }
                                                          }
                                                        }
                                                        fields {
                                                          key: "destination.service.name"
                                                          value {
                                                            struct_value {
                                                              fields {
                                                                key: "string_value"
                                                                value {
                                                                  string_value: "httpbin"
                                                                }
                                                              }
                                                            }
                                                          }
                                                        }
                                                        fields {
                                                          key: "destination.service.namespace"
                                                          value {
                                                            struct_value {
                                                              fields {
                                                                key: "string_value"
                                                                value {
                                                                  string_value: "foo"
                                                                }
                                                              }
                                                            }
                                                          }
                                                        }
                                                        fields {
                                                          key: "destination.service.uid"
                                                          value {
                                                            struct_value {
                                                              fields {
                                                                key: "string_value"
                                                                value {
                                                                  string_value: "istio://foo/services/httpbin"
                                                                }
                                                              }
                                                            }
                                                          }
                                                        }
                                                      }
                                                    }
                                                  }
                                                }
                                              }
                                            }
                                          }
                                        }
                                      }
                                    }
                                  }
                                }
                                fields {
                                  key: "route"
                                  value {
                                    struct_value {
                                      fields {
                                        key: "cluster"
                                        value {
                                          string_value: "inbound|8000||httpbin.foo.svc.cluster.local"
                                        }
                                      }
                                      fields {
                                        key: "max_grpc_timeout"
                                        value {
                                          string_value: "0s"
                                        }
                                      }
                                      fields {
                                        key: "timeout"
                                        value {
                                          string_value: "0s"
                                        }
                                      }
                                    }
                                  }
                                }
                              }
                            }
                          }
                        }
                      }
                    }
                  }
                }
              }
            }
          }
        }
      }
      fields {
        key: "stat_prefix"
        value {
          string_value: "10.16.0.69_8000"
        }
      }
      fields {
        key: "stream_idle_timeout"
        value {
          string_value: "0s"
        }
      }
      fields {
        key: "tracing"
        value {
          struct_value {
            fields {
              key: "client_sampling"
              value {
                struct_value {
                  fields {
                    key: "value"
                    value {
                      number_value: 100
                    }
                  }
                }
              }
            }
            fields {
              key: "overall_sampling"
              value {
                struct_value {
                  fields {
                    key: "value"
                    value {
                      number_value: 100
                    }
                  }
                }
              }
            }
            fields {
              key: "random_sampling"
              value {
                struct_value {
                  fields {
                    key: "value"
                    value {
                      number_value: 100
                    }
                  }
                }
              }
            }
          }
        }
      }
      fields {
        key: "upgrade_configs"
        value {
          list_value {
            values {
              struct_value {
                fields {
                  key: "upgrade_type"
                  value {
                    string_value: "websocket"
                  }
                }
              }
            }
          }
        }
      }
      fields {
        key: "use_remote_address"
        value {
          bool_value: false
        }
      }
    }
  }
}
deprecated_v1 {
  bind_to_port {
  }
}
listener_filters {
  name: "envoy.listener.tls_inspector"
}

[2018-09-28 22:25:20.653][11][warning][config] bazel-out/k8-opt/bin/external/envoy/source/common/config/_virtual_includes/grpc_mux_subscription_lib/common/config/grpc_mux_subscription_impl.h:70] gRPC config for type.googleapis.com/envoy.api.v2.Listener rejected: Proto constraint validation failed (ListenerValidationError.FilterChains[i]: ["embedded message failed validation"] | caused by FilterChainValidationError.TlsContext: ["embedded message failed validation"] | caused by DownstreamTlsContextValidationError.CommonTlsContext: ["embedded message failed validation"] | caused by CommonTlsContextValidationError.TlsCertificateSdsSecretConfigs[i]: ["embedded message failed validation"] | caused by SdsSecretConfigValidationError.SdsConfig: ["embedded message failed validation"] | caused by ConfigSourceValidationError.ApiConfigSource: ["embedded message failed validation"] | caused by ApiConfigSourceValidationError.GrpcServices[i]: ["embedded message failed validation"] | caused by GrpcServiceValidationError.GoogleGrpc: ["embedded message failed validation"] | caused by GoogleGrpcValidationError.ChannelCredentials: ["embedded message failed validation"] | caused by field: "credential_specifier", reason: is required): name: "10.16.0.69_8000"
address {
  socket_address {
    address: "10.16.0.69"
    port_value: 8000
  }
}
filter_chains {
  tls_context {
    common_tls_context {
      validation_context {
        trusted_ca {
          filename: "/etc/istio/certs/ca-root-cert.pem"
        }
      }
      alpn_protocols: "h2"
      alpn_protocols: "http/1.1"
      tls_certificate_sds_secret_configs {
        name: "spiffe://cluster.local/ns/foo/sa/default"
        sds_config {
          api_config_source {
            api_type: GRPC
            grpc_services {
              google_grpc {
                target_uri: "unix:/var/run/sds/uds_path"
                channel_credentials {
                  3: ""
                }
                call_credentials {
                  google_compute_engine {
                  }
                }
                stat_prefix: "sdsstat"
              }
            }
          }
        }
      }
    }
    require_client_certificate {
      value: true
    }
  }
  filters {
    name: "envoy.http_connection_manager"
    config {
      fields {
        key: "access_log"
        value {
          list_value {
            values {
              struct_value {
                fields {
                  key: "config"
                  value {
                    struct_value {
                      fields {
                        key: "format"
                        value {
                          string_value: "[%START_TIME%] \"%REQ(:METHOD)% %REQ(X-ENVOY-ORIGINAL-PATH?:PATH)%%PROTOCOL%\" %RESPONSE_CODE% %RESPONSE_FLAGS% %BYTES_RECEIVED% %BYTES_SENT% %DURATION% %RESP(X-ENVOY-UPSTREAM-SERVICE-TIME)% \"%REQ(X-FORWARDED-FOR)%\" \"%REQ(USER-AGENT)%\" \"%REQ(X-REQUEST-ID)%\" \"%REQ(:AUTHORITY)%\" \"%UPSTREAM_HOST%\" %UPSTREAM_CLUSTER% %UPSTREAM_LOCAL_ADDRESS% %DOWNSTREAM_LOCAL_ADDRESS% %DOWNSTREAM_REMOTE_ADDRESS% %REQUESTED_SERVER_NAME%\n"
                        }
                      }
                      fields {
                        key: "path"
                        value {
                          string_value: "/dev/stdout"
                        }
                      }
                    }
                  }
                }
                fields {
                  key: "name"
                  value {
                    string_value: "envoy.file_access_log"
                  }
                }
              }
            }
          }
        }
      }
      fields {
        key: "forward_client_cert_details"
        value {
          string_value: "APPEND_FORWARD"
        }
      }
      fields {
        key: "generate_request_id"
        value {
          bool_value: true
        }
      }
      fields {
        key: "http_filters"
        value {
          list_value {
            values {
              struct_value {
                fields {
                  key: "config"
                  value {
                    struct_value {
                      fields {
                        key: "policy"
                        value {
                          struct_value {
                            fields {
                              key: "peers"
                              value {
                                list_value {
                                  values {
                                    struct_value {
                                      fields {
                                        key: "mtls"
                                        value {
                                          struct_value {
                                          }
                                        }
                                      }
                                    }
                                  }
                                }
                              }
                            }
                          }
                        }
                      }
                    }
                  }
                }
                fields {
                  key: "name"
                  value {
                    string_value: "istio_authn"
                  }
                }
              }
            }
            values {
              struct_value {
                fields {
                  key: "config"
                  value {
                    struct_value {
                      fields {
                        key: "default_destination_service"
                        value {
                          string_value: "default"
                        }
                      }
                      fields {
                        key: "mixer_attributes"
                        value {
                          struct_value {
                            fields {
                              key: "attributes"
                              value {
                                struct_value {
                                  fields {
                                    key: "context.reporter.kind"
                                    value {
                                      struct_value {
                                        fields {
                                          key: "string_value"
                                          value {
                                            string_value: "inbound"
                                          }
                                        }
                                      }
                                    }
                                  }
                                  fields {
                                    key: "context.reporter.uid"
                                    value {
                                      struct_value {
                                        fields {
                                          key: "string_value"
                                          value {
                                            string_value: "kubernetes://httpbin-6d6c88c4f5-q8h2t.foo"
                                          }
                                        }
                                      }
                                    }
                                  }
                                  fields {
                                    key: "destination.ip"
                                    value {
                                      struct_value {
                                        fields {
                                          key: "bytes_value"
                                          value {
                                            string_value: "AAAAAAAAAAAAAP//ChAARQ=="
                                          }
                                        }
                                      }
                                    }
                                  }
                                  fields {
                                    key: "destination.namespace"
                                    value {
                                      struct_value {
                                        fields {
                                          key: "string_value"
                                          value {
                                            string_value: "foo"
                                          }
                                        }
                                      }
                                    }
                                  }
                                  fields {
                                    key: "destination.port"
                                    value {
                                      struct_value {
                                        fields {
                                          key: "int64_value"
                                          value {
                                            string_value: "8000"
                                          }
                                        }
                                      }
                                    }
                                  }
                                  fields {
                                    key: "destination.uid"
                                    value {
                                      struct_value {
                                        fields {
                                          key: "string_value"
                                          value {
                                            string_value: "kubernetes://httpbin-6d6c88c4f5-q8h2t.foo"
                                          }
                                        }
                                      }
                                    }
                                  }
                                }
                              }
                            }
                          }
                        }
                      }
                      fields {
                        key: "service_configs"
                        value {
                          struct_value {
                            fields {
                              key: "default"
                              value {
                                struct_value {
                                }
                              }
                            }
                          }
                        }
                      }
                      fields {
                        key: "transport"
                        value {
                          struct_value {
                            fields {
                              key: "attributes_for_mixer_proxy"
                              value {
                                struct_value {
                                  fields {
                                    key: "attributes"
                                    value {
                                      struct_value {
                                        fields {
                                          key: "source.uid"
                                          value {
                                            struct_value {
                                              fields {
                                                key: "string_value"
                                                value {
                                                  string_value: "kubernetes://httpbin-6d6c88c4f5-q8h2t.foo"
                                                }
                                              }
                                            }
                                          }
                                        }
                                      }
                                    }
                                  }
                                }
                              }
                            }
                            fields {
                              key: "check_cluster"
                              value {
                                string_value: "outbound|9091||istio-policy.istio-system.svc.cluster.local"
                              }
                            }
                            fields {
                              key: "network_fail_policy"
                              value {
                                struct_value {
                                  fields {
                                    key: "policy"
                                    value {
                                      string_value: "FAIL_CLOSE"
                                    }
                                  }
                                }
                              }
                            }
                            fields {
                              key: "report_cluster"
                              value {
                                string_value: "outbound|9091||istio-telemetry.istio-system.svc.cluster.local"
                              }
                            }
                          }
                        }
                      }
                    }
                  }
                }
                fields {
                  key: "name"
                  value {
                    string_value: "mixer"
                  }
                }
              }
            }
            values {
              struct_value {
                fields {
                  key: "name"
                  value {
                    string_value: "envoy.cors"
                  }
                }
              }
            }
            values {
              struct_value {
                fields {
                  key: "name"
                  value {
                    string_value: "envoy.fault"
                  }
                }
              }
            }
            values {
              struct_value {
                fields {
                  key: "name"
                  value {
                    string_value: "envoy.router"
                  }
                }
              }
            }
          }
        }
      }
      fields {
        key: "route_config"
        value {
          struct_value {
            fields {
              key: "name"
              value {
                string_value: "inbound|8000||httpbin.foo.svc.cluster.local"
              }
            }
            fields {
              key: "validate_clusters"
              value {
                bool_value: false
              }
            }
            fields {
              key: "virtual_hosts"
              value {
                list_value {
                  values {
                    struct_value {
                      fields {
                        key: "domains"
                        value {
                          list_value {
                            values {
                              string_value: "*"
                            }
                          }
                        }
                      }
                      fields {
                        key: "name"
                        value {
                          string_value: "inbound|http|8000"
                        }
                      }
                      fields {
                        key: "routes"
                        value {
                          list_value {
                            values {
                              struct_value {
                                fields {
                                  key: "decorator"
                                  value {
                                    struct_value {
                                      fields {
                                        key: "operation"
                                        value {
                                          string_value: "httpbin.foo.svc.cluster.local:8000/*"
                                        }
                                      }
                                    }
                                  }
                                }
                                fields {
                                  key: "match"
                                  value {
                                    struct_value {
                                      fields {
                                        key: "prefix"
                                        value {
                                          string_value: "/"
                                        }
                                      }
                                    }
                                  }
                                }
                                fields {
                                  key: "per_filter_config"
                                  value {
                                    struct_value {
                                      fields {
                                        key: "mixer"
                                        value {
                                          struct_value {
                                            fields {
                                              key: "mixer_attributes"
                                              value {
                                                struct_value {
                                                  fields {
                                                    key: "attributes"
                                                    value {
                                                      struct_value {
                                                        fields {
                                                          key: "destination.service.host"
                                                          value {
                                                            struct_value {
                                                              fields {
                                                                key: "string_value"
                                                                value {
                                                                  string_value: "httpbin.foo.svc.cluster.local"
                                                                }
                                                              }
                                                            }
                                                          }
                                                        }
                                                        fields {
                                                          key: "destination.service.name"
                                                          value {
                                                            struct_value {
                                                              fields {
                                                                key: "string_value"
                                                                value {
                                                                  string_value: "httpbin"
                                                                }
                                                              }
                                                            }
                                                          }
                                                        }
                                                        fields {
                                                          key: "destination.service.namespace"
                                                          value {
                                                            struct_value {
                                                              fields {
                                                                key: "string_value"
                                                                value {
                                                                  string_value: "foo"
                                                                }
                                                              }
                                                            }
                                                          }
                                                        }
                                                        fields {
                                                          key: "destination.service.uid"
                                                          value {
                                                            struct_value {
                                                              fields {
                                                                key: "string_value"
                                                                value {
                                                                  string_value: "istio://foo/services/httpbin"
                                                                }
                                                              }
                                                            }
                                                          }
                                                        }
                                                      }
                                                    }
                                                  }
                                                }
                                              }
                                            }
                                          }
                                        }
                                      }
                                    }
                                  }
                                }
                                fields {
                                  key: "route"
                                  value {
                                    struct_value {
                                      fields {
                                        key: "cluster"
                                        value {
                                          string_value: "inbound|8000||httpbin.foo.svc.cluster.local"
                                        }
                                      }
                                      fields {
                                        key: "max_grpc_timeout"
                                        value {
                                          string_value: "0s"
                                        }
                                      }
                                      fields {
                                        key: "timeout"
                                        value {
                                          string_value: "0s"
                                        }
                                      }
                                    }
                                  }
                                }
                              }
                            }
                          }
                        }
                      }
                    }
                  }
                }
              }
            }
          }
        }
      }
      fields {
        key: "stat_prefix"
        value {
          string_value: "10.16.0.69_8000"
        }
      }
      fields {
        key: "stream_idle_timeout"
        value {
          string_value: "0s"
        }
      }
      fields {
        key: "tracing"
        value {
          struct_value {
            fields {
              key: "client_sampling"
              value {
                struct_value {
                  fields {
                    key: "value"
                    value {
                      number_value: 100
                    }
                  }
                }
              }
            }
            fields {
              key: "overall_sampling"
              value {
                struct_value {
                  fields {
                    key: "value"
                    value {
                      number_value: 100
                    }
                  }
                }
              }
            }
            fields {
              key: "random_sampling"
              value {
                struct_value {
                  fields {
                    key: "value"
                    value {
                      number_value: 100
                    }
                  }
                }
              }
            }
          }
        }
      }
      fields {
        key: "upgrade_configs"
        value {
          list_value {
            values {
              struct_value {
                fields {
                  key: "upgrade_type"
                  value {
                    string_value: "websocket"
                  }
                }
              }
            }
          }
        }
      }
      fields {
        key: "use_remote_address"
        value {
          bool_value: false
        }
      }
    }
  }
}
deprecated_v1 {
  bind_to_port {
  }
}
listener_filters {
  name: "envoy.listener.tls_inspector"
}

[2018-09-28 22:25:20.653][11][info][config] external/envoy/source/server/listener_manager_impl.cc:908] all dependencies initialized. starting workers
2018-09-28T22:25:20.742455Z	info	Envoy proxy is NOT ready: 3 errors occurred:

* failed checking application ports. listeners="0.0.0.0:15090"
* envoy missing listener for inbound application port: 0
* envoy missing listener for inbound application port: 8000
[2018-09-28T22:25:20.741Z] "GET /listeners HTTP/1.1" 200 - 0 17 0 - "10.16.0.69" "Go-http-client/1.1" "-" "127.0.0.1:15000" "-"
[2018-09-28 22:25:21.493][11][warning][upstream] external/envoy/source/common/config/grpc_mux_impl.cc:231] gRPC config for type.googleapis.com/envoy.api.v2.Cluster update rejected: Proto constraint validation failed (ClusterValidationError.TlsContext: ["embedded message failed validation"] | caused by UpstreamTlsContextValidationError.CommonTlsContext: ["embedded message failed validation"] | caused by CommonTlsContextValidationError.TlsCertificateSdsSecretConfigs[i]: ["embedded message failed validation"] | caused by SdsSecretConfigValidationError.SdsConfig: ["embedded message failed validation"] | caused by ConfigSourceValidationError.ApiConfigSource: ["embedded message failed validation"] | caused by ApiConfigSourceValidationError.GrpcServices[i]: ["embedded message failed validation"] | caused by GrpcServiceValidationError.GoogleGrpc: ["embedded message failed validation"] | caused by GoogleGrpcValidationError.ChannelCredentials: ["embedded message failed validation"] | caused by field: "credential_specifier", reason: is required): name: "outbound|80||default-http-backend.kube-system.svc.cluster.local"
type: EDS
eds_cluster_config {
  eds_config {
    ads {
    }
  }
  service_name: "outbound|80||default-http-backend.kube-system.svc.cluster.local"
}
connect_timeout {
  seconds: 1
}
circuit_breakers {
  thresholds {
  }
}
tls_context {
  common_tls_context {
    validation_context {
      trusted_ca {
        filename: "/etc/istio/certs/ca-root-cert.pem"
      }
      verify_subject_alt_name: "spiffe://cluster.local/ns/kube-system/sa/default"
    }
    alpn_protocols: "istio"
    tls_certificate_sds_secret_configs {
      name: "spiffe://cluster.local/ns/kube-system/sa/default"
      sds_config {
        api_config_source {
          api_type: GRPC
          grpc_services {
            google_grpc {
              target_uri: "unix:/var/run/sds/uds_path"
              channel_credentials {
                3: ""
              }
              call_credentials {
                google_compute_engine {
                }
              }
              stat_prefix: "sdsstat"
            }
          }
        }
      }
    }
  }
  sni: "outbound|80||default-http-backend.kube-system.svc.cluster.local"
}

[2018-09-28 22:25:21.495][11][warning][config] bazel-out/k8-opt/bin/external/envoy/source/common/config/_virtual_includes/grpc_mux_subscription_lib/common/config/grpc_mux_subscription_impl.h:70] gRPC config for type.googleapis.com/envoy.api.v2.Cluster rejected: Proto constraint validation failed (ClusterValidationError.TlsContext: ["embedded message failed validation"] | caused by UpstreamTlsContextValidationError.CommonTlsContext: ["embedded message failed validation"] | caused by CommonTlsContextValidationError.TlsCertificateSdsSecretConfigs[i]: ["embedded message failed validation"] | caused by SdsSecretConfigValidationError.SdsConfig: ["embedded message failed validation"] | caused by ConfigSourceValidationError.ApiConfigSource: ["embedded message failed validation"] | caused by ApiConfigSourceValidationError.GrpcServices[i]: ["embedded message failed validation"] | caused by GrpcServiceValidationError.GoogleGrpc: ["embedded message failed validation"] | caused by GoogleGrpcValidationError.ChannelCredentials: ["embedded message failed validation"] | caused by field: "credential_specifier", reason: is required): name: "outbound|80||default-http-backend.kube-system.svc.cluster.local"
type: EDS
eds_cluster_config {
  eds_config {
    ads {
    }
  }
  service_name: "outbound|80||default-http-backend.kube-system.svc.cluster.local"
}
connect_timeout {
  seconds: 1
}
circuit_breakers {
  thresholds {
  }
}
tls_context {
  common_tls_context {
    validation_context {
      trusted_ca {
        filename: "/etc/istio/certs/ca-root-cert.pem"
      }
      verify_subject_alt_name: "spiffe://cluster.local/ns/kube-system/sa/default"
    }
    alpn_protocols: "istio"
    tls_certificate_sds_secret_configs {
      name: "spiffe://cluster.local/ns/kube-system/sa/default"
      sds_config {
        api_config_source {
          api_type: GRPC
          grpc_services {
            google_grpc {
              target_uri: "unix:/var/run/sds/uds_path"
              channel_credentials {
                3: ""
              }
              call_credentials {
                google_compute_engine {
                }
              }
              stat_prefix: "sdsstat"
            }
          }
        }
      }
    }
  }
  sni: "outbound|80||default-http-backend.kube-system.svc.cluster.local"
}

[2018-09-28 22:25:21.531][11][warning][upstream] external/envoy/source/common/config/grpc_mux_impl.cc:231] gRPC config for type.googleapis.com/envoy.api.v2.Listener update rejected: Proto constraint validation failed (ListenerValidationError.FilterChains[i]: ["embedded message failed validation"] | caused by FilterChainValidationError.TlsContext: ["embedded message failed validation"] | caused by DownstreamTlsContextValidationError.CommonTlsContext: ["embedded message failed validation"] | caused by CommonTlsContextValidationError.TlsCertificateSdsSecretConfigs[i]: ["embedded message failed validation"] | caused by SdsSecretConfigValidationError.SdsConfig: ["embedded message failed validation"] | caused by ConfigSourceValidationError.ApiConfigSource: ["embedded message failed validation"] | caused by ApiConfigSourceValidationError.GrpcServices[i]: ["embedded message failed validation"] | caused by GrpcServiceValidationError.GoogleGrpc: ["embedded message failed validation"] | caused by GoogleGrpcValidationError.ChannelCredentials: ["embedded message failed validation"] | caused by field: "credential_specifier", reason: is required): name: "10.16.0.69_8000"
address {
  socket_address {
    address: "10.16.0.69"
    port_value: 8000
  }
}
filter_chains {
  tls_context {
    common_tls_context {
      validation_context {
        trusted_ca {
          filename: "/etc/istio/certs/ca-root-cert.pem"
        }
      }
      alpn_protocols: "h2"
      alpn_protocols: "http/1.1"
      tls_certificate_sds_secret_configs {
        name: "spiffe://cluster.local/ns/foo/sa/default"
        sds_config {
          api_config_source {
            api_type: GRPC
            grpc_services {
              google_grpc {
                target_uri: "unix:/var/run/sds/uds_path"
                channel_credentials {
                  3: ""
                }
                call_credentials {
                  google_compute_engine {
                  }
                }
                stat_prefix: "sdsstat"
              }
            }
          }
        }
      }
    }
    require_client_certificate {
      value: true
    }
  }
  filters {
    name: "envoy.http_connection_manager"
    config {
      fields {
        key: "access_log"
        value {
          list_value {
            values {
              struct_value {
                fields {
                  key: "config"
                  value {
                    struct_value {
                      fields {
                        key: "format"
                        value {
                          string_value: "[%START_TIME%] \"%REQ(:METHOD)% %REQ(X-ENVOY-ORIGINAL-PATH?:PATH)%%PROTOCOL%\" %RESPONSE_CODE% %RESPONSE_FLAGS% %BYTES_RECEIVED% %BYTES_SENT% %DURATION% %RESP(X-ENVOY-UPSTREAM-SERVICE-TIME)% \"%REQ(X-FORWARDED-FOR)%\" \"%REQ(USER-AGENT)%\" \"%REQ(X-REQUEST-ID)%\" \"%REQ(:AUTHORITY)%\" \"%UPSTREAM_HOST%\" %UPSTREAM_CLUSTER% %UPSTREAM_LOCAL_ADDRESS% %DOWNSTREAM_LOCAL_ADDRESS% %DOWNSTREAM_REMOTE_ADDRESS% %REQUESTED_SERVER_NAME%\n"
                        }
                      }
                      fields {
                        key: "path"
                        value {
                          string_value: "/dev/stdout"
                        }
                      }
                    }
                  }
                }
                fields {
                  key: "name"
                  value {
                    string_value: "envoy.file_access_log"
                  }
                }
              }
            }
          }
        }
      }
      fields {
        key: "forward_client_cert_details"
        value {
          string_value: "APPEND_FORWARD"
        }
      }
      fields {
        key: "generate_request_id"
        value {
          bool_value: true
        }
      }
      fields {
        key: "http_filters"
        value {
          list_value {
            values {
              struct_value {
                fields {
                  key: "config"
                  value {
                    struct_value {
                      fields {
                        key: "policy"
                        value {
                          struct_value {
                            fields {
                              key: "peers"
                              value {
                                list_value {
                                  values {
                                    struct_value {
                                      fields {
                                        key: "mtls"
                                        value {
                                          struct_value {
                                          }
                                        }
                                      }
                                    }
                                  }
                                }
                              }
                            }
                          }
                        }
                      }
                    }
                  }
                }
                fields {
                  key: "name"
                  value {
                    string_value: "istio_authn"
                  }
                }
              }
            }
            values {
              struct_value {
                fields {
                  key: "config"
                  value {
                    struct_value {
                      fields {
                        key: "default_destination_service"
                        value {
                          string_value: "default"
                        }
                      }
                      fields {
                        key: "mixer_attributes"
                        value {
                          struct_value {
                            fields {
                              key: "attributes"
                              value {
                                struct_value {
                                  fields {
                                    key: "context.reporter.kind"
                                    value {
                                      struct_value {
                                        fields {
                                          key: "string_value"
                                          value {
                                            string_value: "inbound"
                                          }
                                        }
                                      }
                                    }
                                  }
                                  fields {
                                    key: "context.reporter.uid"
                                    value {
                                      struct_value {
                                        fields {
                                          key: "string_value"
                                          value {
                                            string_value: "kubernetes://httpbin-6d6c88c4f5-q8h2t.foo"
                                          }
                                        }
                                      }
                                    }
                                  }
                                  fields {
                                    key: "destination.ip"
                                    value {
                                      struct_value {
                                        fields {
                                          key: "bytes_value"
                                          value {
                                            string_value: "AAAAAAAAAAAAAP//ChAARQ=="
                                          }
                                        }
                                      }
                                    }
                                  }
                                  fields {
                                    key: "destination.namespace"
                                    value {
                                      struct_value {
                                        fields {
                                          key: "string_value"
                                          value {
                                            string_value: "foo"
                                          }
                                        }
                                      }
                                    }
                                  }
                                  fields {
                                    key: "destination.port"
                                    value {
                                      struct_value {
                                        fields {
                                          key: "int64_value"
                                          value {
                                            string_value: "8000"
                                          }
                                        }
                                      }
                                    }
                                  }
                                  fields {
                                    key: "destination.uid"
                                    value {
                                      struct_value {
                                        fields {
                                          key: "string_value"
                                          value {
                                            string_value: "kubernetes://httpbin-6d6c88c4f5-q8h2t.foo"
                                          }
                                        }
                                      }
                                    }
                                  }
                                }
                              }
                            }
                          }
                        }
                      }
                      fields {
                        key: "service_configs"
                        value {
                          struct_value {
                            fields {
                              key: "default"
                              value {
                                struct_value {
                                }
                              }
                            }
                          }
                        }
                      }
                      fields {
                        key: "transport"
                        value {
                          struct_value {
                            fields {
                              key: "attributes_for_mixer_proxy"
                              value {
                                struct_value {
                                  fields {
                                    key: "attributes"
                                    value {
                                      struct_value {
                                        fields {
                                          key: "source.uid"
                                          value {
                                            struct_value {
                                              fields {
                                                key: "string_value"
                                                value {
                                                  string_value: "kubernetes://httpbin-6d6c88c4f5-q8h2t.foo"
                                                }
                                              }
                                            }
                                          }
                                        }
                                      }
                                    }
                                  }
                                }
                              }
                            }
                            fields {
                              key: "check_cluster"
                              value {
                                string_value: "outbound|9091||istio-policy.istio-system.svc.cluster.local"
                              }
                            }
                            fields {
                              key: "network_fail_policy"
                              value {
                                struct_value {
                                  fields {
                                    key: "policy"
                                    value {
                                      string_value: "FAIL_CLOSE"
                                    }
                                  }
                                }
                              }
                            }
                            fields {
                              key: "report_cluster"
                              value {
                                string_value: "outbound|9091||istio-telemetry.istio-system.svc.cluster.local"
                              }
                            }
                          }
                        }
                      }
                    }
                  }
                }
                fields {
                  key: "name"
                  value {
                    string_value: "mixer"
                  }
                }
              }
            }
            values {
              struct_value {
                fields {
                  key: "name"
                  value {
                    string_value: "envoy.cors"
                  }
                }
              }
            }
            values {
              struct_value {
                fields {
                  key: "name"
                  value {
                    string_value: "envoy.fault"
                  }
                }
              }
            }
            values {
              struct_value {
                fields {
                  key: "name"
                  value {
                    string_value: "envoy.router"
                  }
                }
              }
            }
          }
        }
      }
      fields {
        key: "route_config"
        value {
          struct_value {
            fields {
              key: "name"
              value {
                string_value: "inbound|8000||httpbin.foo.svc.cluster.local"
              }
            }
            fields {
              key: "validate_clusters"
              value {
                bool_value: false
              }
            }
            fields {
              key: "virtual_hosts"
              value {
                list_value {
                  values {
                    struct_value {
                      fields {
                        key: "domains"
                        value {
                          list_value {
                            values {
                              string_value: "*"
                            }
                          }
                        }
                      }
                      fields {
                        key: "name"
                        value {
                          string_value: "inbound|http|8000"
                        }
                      }
                      fields {
                        key: "routes"
                        value {
                          list_value {
                            values {
                              struct_value {
                                fields {
                                  key: "decorator"
                                  value {
                                    struct_value {
                                      fields {
                                        key: "operation"
                                        value {
                                          string_value: "httpbin.foo.svc.cluster.local:8000/*"
                                        }
                                      }
                                    }
                                  }
                                }
                                fields {
                                  key: "match"
                                  value {
                                    struct_value {
                                      fields {
                                        key: "prefix"
                                        value {
                                          string_value: "/"
                                        }
                                      }
                                    }
                                  }
                                }
                                fields {
                                  key: "per_filter_config"
                                  value {
                                    struct_value {
                                      fields {
                                        key: "mixer"
                                        value {
                                          struct_value {
                                            fields {
                                              key: "mixer_attributes"
                                              value {
                                                struct_value {
                                                  fields {
                                                    key: "attributes"
                                                    value {
                                                      struct_value {
                                                        fields {
                                                          key: "destination.service.host"
                                                          value {
                                                            struct_value {
                                                              fields {
                                                                key: "string_value"
                                                                value {
                                                                  string_value: "httpbin.foo.svc.cluster.local"
                                                                }
                                                              }
                                                            }
                                                          }
                                                        }
                                                        fields {
                                                          key: "destination.service.name"
                                                          value {
                                                            struct_value {
                                                              fields {
                                                                key: "string_value"
                                                                value {
                                                                  string_value: "httpbin"
                                                                }
                                                              }
                                                            }
                                                          }
                                                        }
                                                        fields {
                                                          key: "destination.service.namespace"
                                                          value {
                                                            struct_value {
                                                              fields {
                                                                key: "string_value"
                                                                value {
                                                                  string_value: "foo"
                                                                }
                                                              }
                                                            }
                                                          }
                                                        }
                                                        fields {
                                                          key: "destination.service.uid"
                                                          value {
                                                            struct_value {
                                                              fields {
                                                                key: "string_value"
                                                                value {
                                                                  string_value: "istio://foo/services/httpbin"
                                                                }
                                                              }
                                                            }
                                                          }
                                                        }
                                                      }
                                                    }
                                                  }
                                                }
                                              }
                                            }
                                          }
                                        }
                                      }
                                    }
                                  }
                                }
                                fields {
                                  key: "route"
                                  value {
                                    struct_value {
                                      fields {
                                        key: "cluster"
                                        value {
                                          string_value: "inbound|8000||httpbin.foo.svc.cluster.local"
                                        }
                                      }
                                      fields {
                                        key: "max_grpc_timeout"
                                        value {
                                          string_value: "0s"
                                        }
                                      }
                                      fields {
                                        key: "timeout"
                                        value {
                                          string_value: "0s"
                                        }
                                      }
                                    }
                                  }
                                }
                              }
                            }
                          }
                        }
                      }
                    }
                  }
                }
              }
            }
          }
        }
      }
      fields {
        key: "stat_prefix"
        value {
          string_value: "10.16.0.69_8000"
        }
      }
      fields {
        key: "stream_idle_timeout"
        value {
          string_value: "0s"
        }
      }
      fields {
        key: "tracing"
        value {
          struct_value {
            fields {
              key: "client_sampling"
              value {
                struct_value {
                  fields {
                    key: "value"
                    value {
                      number_value: 100
                    }
                  }
                }
              }
            }
            fields {
              key: "overall_sampling"
              value {
                struct_value {
                  fields {
                    key: "value"
                    value {
                      number_value: 100
                    }
                  }
                }
              }
            }
            fields {
              key: "random_sampling"
              value {
                struct_value {
                  fields {
                    key: "value"
                    value {
                      number_value: 100
                    }
                  }
                }
              }
            }
          }
        }
      }
      fields {
        key: "upgrade_configs"
        value {
          list_value {
            values {
              struct_value {
                fields {
                  key: "upgrade_type"
                  value {
                    string_value: "websocket"
                  }
                }
              }
            }
          }
        }
      }
      fields {
        key: "use_remote_address"
        value {
          bool_value: false
        }
      }
    }
  }
}
deprecated_v1 {
  bind_to_port {
  }
}
listener_filters {
  name: "envoy.listener.tls_inspector"
}

[2018-09-28 22:25:21.534][11][warning][config] bazel-out/k8-opt/bin/external/envoy/source/common/config/_virtual_includes/grpc_mux_subscription_lib/common/config/grpc_mux_subscription_impl.h:70] gRPC config for type.googleapis.com/envoy.api.v2.Listener rejected: Proto constraint validation failed (ListenerValidationError.FilterChains[i]: ["embedded message failed validation"] | caused by FilterChainValidationError.TlsContext: ["embedded message failed validation"] | caused by DownstreamTlsContextValidationError.CommonTlsContext: ["embedded message failed validation"] | caused by CommonTlsContextValidationError.TlsCertificateSdsSecretConfigs[i]: ["embedded message failed validation"] | caused by SdsSecretConfigValidationError.SdsConfig: ["embedded message failed validation"] | caused by ConfigSourceValidationError.ApiConfigSource: ["embedded message failed validation"] | caused by ApiConfigSourceValidationError.GrpcServices[i]: ["embedded message failed validation"] | caused by GrpcServiceValidationError.GoogleGrpc: ["embedded message failed validation"] | caused by GoogleGrpcValidationError.ChannelCredentials: ["embedded message failed validation"] | caused by field: "credential_specifier", reason: is required): name: "10.16.0.69_8000"
address {
  socket_address {
    address: "10.16.0.69"
    port_value: 8000
  }
}
filter_chains {
  tls_context {
    common_tls_context {
      validation_context {
        trusted_ca {
          filename: "/etc/istio/certs/ca-root-cert.pem"
        }
      }
      alpn_protocols: "h2"
      alpn_protocols: "http/1.1"
      tls_certificate_sds_secret_configs {
        name: "spiffe://cluster.local/ns/foo/sa/default"
        sds_config {
          api_config_source {
            api_type: GRPC
            grpc_services {
              google_grpc {
                target_uri: "unix:/var/run/sds/uds_path"
                channel_credentials {
                  3: ""
                }
                call_credentials {
                  google_compute_engine {
                  }
                }
                stat_prefix: "sdsstat"
              }
            }
          }
        }
      }
    }
    require_client_certificate {
      value: true
    }
  }
  filters {
    name: "envoy.http_connection_manager"
    config {
      fields {
        key: "access_log"
        value {
          list_value {
            values {
              struct_value {
                fields {
                  key: "config"
                  value {
                    struct_value {
                      fields {
                        key: "format"
                        value {
                          string_value: "[%START_TIME%] \"%REQ(:METHOD)% %REQ(X-ENVOY-ORIGINAL-PATH?:PATH)%%PROTOCOL%\" %RESPONSE_CODE% %RESPONSE_FLAGS% %BYTES_RECEIVED% %BYTES_SENT% %DURATION% %RESP(X-ENVOY-UPSTREAM-SERVICE-TIME)% \"%REQ(X-FORWARDED-FOR)%\" \"%REQ(USER-AGENT)%\" \"%REQ(X-REQUEST-ID)%\" \"%REQ(:AUTHORITY)%\" \"%UPSTREAM_HOST%\" %UPSTREAM_CLUSTER% %UPSTREAM_LOCAL_ADDRESS% %DOWNSTREAM_LOCAL_ADDRESS% %DOWNSTREAM_REMOTE_ADDRESS% %REQUESTED_SERVER_NAME%\n"
                        }
                      }
                      fields {
                        key: "path"
                        value {
                          string_value: "/dev/stdout"
                        }
                      }
                    }
                  }
                }
                fields {
                  key: "name"
                  value {
                    string_value: "envoy.file_access_log"
                  }
                }
              }
            }
          }
        }
      }
      fields {
        key: "forward_client_cert_details"
        value {
          string_value: "APPEND_FORWARD"
        }
      }
      fields {
        key: "generate_request_id"
        value {
          bool_value: true
        }
      }
      fields {
        key: "http_filters"
        value {
          list_value {
            values {
              struct_value {
                fields {
                  key: "config"
                  value {
                    struct_value {
                      fields {
                        key: "policy"
                        value {
                          struct_value {
                            fields {
                              key: "peers"
                              value {
                                list_value {
                                  values {
                                    struct_value {
                                      fields {
                                        key: "mtls"
                                        value {
                                          struct_value {
                                          }
                                        }
                                      }
                                    }
                                  }
                                }
                              }
                            }
                          }
                        }
                      }
                    }
                  }
                }
                fields {
                  key: "name"
                  value {
                    string_value: "istio_authn"
                  }
                }
              }
            }
            values {
              struct_value {
                fields {
                  key: "config"
                  value {
                    struct_value {
                      fields {
                        key: "default_destination_service"
                        value {
                          string_value: "default"
                        }
                      }
                      fields {
                        key: "mixer_attributes"
                        value {
                          struct_value {
                            fields {
                              key: "attributes"
                              value {
                                struct_value {
                                  fields {
                                    key: "context.reporter.kind"
                                    value {
                                      struct_value {
                                        fields {
                                          key: "string_value"
                                          value {
                                            string_value: "inbound"
                                          }
                                        }
                                      }
                                    }
                                  }
                                  fields {
                                    key: "context.reporter.uid"
                                    value {
                                      struct_value {
                                        fields {
                                          key: "string_value"
                                          value {
                                            string_value: "kubernetes://httpbin-6d6c88c4f5-q8h2t.foo"
                                          }
                                        }
                                      }
                                    }
                                  }
                                  fields {
                                    key: "destination.ip"
                                    value {
                                      struct_value {
                                        fields {
                                          key: "bytes_value"
                                          value {
                                            string_value: "AAAAAAAAAAAAAP//ChAARQ=="
                                          }
                                        }
                                      }
                                    }
                                  }
                                  fields {
                                    key: "destination.namespace"
                                    value {
                                      struct_value {
                                        fields {
                                          key: "string_value"
                                          value {
                                            string_value: "foo"
                                          }
                                        }
                                      }
                                    }
                                  }
                                  fields {
                                    key: "destination.port"
                                    value {
                                      struct_value {
                                        fields {
                                          key: "int64_value"
                                          value {
                                            string_value: "8000"
                                          }
                                        }
                                      }
                                    }
                                  }
                                  fields {
                                    key: "destination.uid"
                                    value {
                                      struct_value {
                                        fields {
                                          key: "string_value"
                                          value {
                                            string_value: "kubernetes://httpbin-6d6c88c4f5-q8h2t.foo"
                                          }
                                        }
                                      }
                                    }
                                  }
                                }
                              }
                            }
                          }
                        }
                      }
                      fields {
                        key: "service_configs"
                        value {
                          struct_value {
                            fields {
                              key: "default"
                              value {
                                struct_value {
                                }
                              }
                            }
                          }
                        }
                      }
                      fields {
                        key: "transport"
                        value {
                          struct_value {
                            fields {
                              key: "attributes_for_mixer_proxy"
                              value {
                                struct_value {
                                  fields {
                                    key: "attributes"
                                    value {
                                      struct_value {
                                        fields {
                                          key: "source.uid"
                                          value {
                                            struct_value {
                                              fields {
                                                key: "string_value"
                                                value {
                                                  string_value: "kubernetes://httpbin-6d6c88c4f5-q8h2t.foo"
                                                }
                                              }
                                            }
                                          }
                                        }
                                      }
                                    }
                                  }
                                }
                              }
                            }
                            fields {
                              key: "check_cluster"
                              value {
                                string_value: "outbound|9091||istio-policy.istio-system.svc.cluster.local"
                              }
                            }
                            fields {
                              key: "network_fail_policy"
                              value {
                                struct_value {
                                  fields {
                                    key: "policy"
                                    value {
                                      string_value: "FAIL_CLOSE"
                                    }
                                  }
                                }
                              }
                            }
                            fields {
                              key: "report_cluster"
                              value {
                                string_value: "outbound|9091||istio-telemetry.istio-system.svc.cluster.local"
                              }
                            }
                          }
                        }
                      }
                    }
                  }
                }
                fields {
                  key: "name"
                  value {
                    string_value: "mixer"
                  }
                }
              }
            }
            values {
              struct_value {
                fields {
                  key: "name"
                  value {
                    string_value: "envoy.cors"
                  }
                }
              }
            }
            values {
              struct_value {
                fields {
                  key: "name"
                  value {
                    string_value: "envoy.fault"
                  }
                }
              }
            }
            values {
              struct_value {
                fields {
                  key: "name"
                  value {
                    string_value: "envoy.router"
                  }
                }
              }
            }
          }
        }
      }
      fields {
        key: "route_config"
        value {
          struct_value {
            fields {
              key: "name"
              value {
                string_value: "inbound|8000||httpbin.foo.svc.cluster.local"
              }
            }
            fields {
              key: "validate_clusters"
              value {
                bool_value: false
              }
            }
            fields {
              key: "virtual_hosts"
              value {
                list_value {
                  values {
                    struct_value {
                      fields {
                        key: "domains"
                        value {
                          list_value {
                            values {
                              string_value: "*"
                            }
                          }
                        }
                      }
                      fields {
                        key: "name"
                        value {
                          string_value: "inbound|http|8000"
                        }
                      }
                      fields {
                        key: "routes"
                        value {
                          list_value {
                            values {
                              struct_value {
                                fields {
                                  key: "decorator"
                                  value {
                                    struct_value {
                                      fields {
                                        key: "operation"
                                        value {
                                          string_value: "httpbin.foo.svc.cluster.local:8000/*"
                                        }
                                      }
                                    }
                                  }
                                }
                                fields {
                                  key: "match"
                                  value {
                                    struct_value {
                                      fields {
                                        key: "prefix"
                                        value {
                                          string_value: "/"
                                        }
                                      }
                                    }
                                  }
                                }
                                fields {
                                  key: "per_filter_config"
                                  value {
                                    struct_value {
                                      fields {
                                        key: "mixer"
                                        value {
                                          struct_value {
                                            fields {
                                              key: "mixer_attributes"
                                              value {
                                                struct_value {
                                                  fields {
                                                    key: "attributes"
                                                    value {
                                                      struct_value {
                                                        fields {
                                                          key: "destination.service.host"
                                                          value {
                                                            struct_value {
                                                              fields {
                                                                key: "string_value"
                                                                value {
                                                                  string_value: "httpbin.foo.svc.cluster.local"
                                                                }
                                                              }
                                                            }
                                                          }
                                                        }
                                                        fields {
                                                          key: "destination.service.name"
                                                          value {
                                                            struct_value {
                                                              fields {
                                                                key: "string_value"
                                                                value {
                                                                  string_value: "httpbin"
                                                                }
                                                              }
                                                            }
                                                          }
                                                        }
                                                        fields {
                                                          key: "destination.service.namespace"
                                                          value {
                                                            struct_value {
                                                              fields {
                                                                key: "string_value"
                                                                value {
                                                                  string_value: "foo"
                                                                }
                                                              }
                                                            }
                                                          }
                                                        }
                                                        fields {
                                                          key: "destination.service.uid"
                                                          value {
                                                            struct_value {
                                                              fields {
                                                                key: "string_value"
                                                                value {
                                                                  string_value: "istio://foo/services/httpbin"
                                                                }
                                                              }
                                                            }
                                                          }
                                                        }
                                                      }
                                                    }
                                                  }
                                                }
                                              }
                                            }
                                          }
                                        }
                                      }
                                    }
                                  }
                                }
                                fields {
                                  key: "route"
                                  value {
                                    struct_value {
                                      fields {
                                        key: "cluster"
                                        value {
                                          string_value: "inbound|8000||httpbin.foo.svc.cluster.local"
                                        }
                                      }
                                      fields {
                                        key: "max_grpc_timeout"
                                        value {
                                          string_value: "0s"
                                        }
                                      }
                                      fields {
                                        key: "timeout"
                                        value {
                                          string_value: "0s"
                                        }
                                      }
                                    }
                                  }
                                }
                              }
                            }
                          }
                        }
                      }
                    }
                  }
                }
              }
            }
          }
        }
      }
      fields {
        key: "stat_prefix"
        value {
          string_value: "10.16.0.69_8000"
        }
      }
      fields {
        key: "stream_idle_timeout"
        value {
          string_value: "0s"
        }
      }
      fields {
        key: "tracing"
        value {
          struct_value {
            fields {
              key: "client_sampling"
              value {
                struct_value {
                  fields {
                    key: "value"
                    value {
                      number_value: 100
                    }
                  }
                }
              }
            }
            fields {
              key: "overall_sampling"
              value {
                struct_value {
                  fields {
                    key: "value"
                    value {
                      number_value: 100
                    }
                  }
                }
              }
            }
            fields {
              key: "random_sampling"
              value {
                struct_value {
                  fields {
                    key: "value"
                    value {
                      number_value: 100
                    }
                  }
                }
              }
            }
          }
        }
      }
      fields {
        key: "upgrade_configs"
        value {
          list_value {
            values {
              struct_value {
                fields {
                  key: "upgrade_type"
                  value {
                    string_value: "websocket"
                  }
                }
              }
            }
          }
        }
      }
      fields {
        key: "use_remote_address"
        value {
          bool_value: false
        }
      }
    }
  }
}
deprecated_v1 {
  bind_to_port {
  }
}
listener_filters {
  name: "envoy.listener.tls_inspector"
}

2018-09-28T22:25:22.741598Z	info	Envoy proxy is NOT ready: 3 errors occurred:

* failed checking application ports. listeners="0.0.0.0:15090"
* envoy missing listener for inbound application port: 0
* envoy missing listener for inbound application port: 8000
[2018-09-28 22:25:24.587][11][warning][upstream] external/envoy/source/common/config/grpc_mux_impl.cc:231] gRPC config for type.googleapis.com/envoy.api.v2.Cluster update rejected: Proto constraint validation failed (ClusterValidationError.TlsContext: ["embedded message failed validation"] | caused by UpstreamTlsContextValidationError.CommonTlsContext: ["embedded message failed validation"] | caused by CommonTlsContextValidationError.TlsCertificateSdsSecretConfigs[i]: ["embedded message failed validation"] | caused by SdsSecretConfigValidationError.SdsConfig: ["embedded message failed validation"] | caused by ConfigSourceValidationError.ApiConfigSource: ["embedded message failed validation"] | caused by ApiConfigSourceValidationError.GrpcServices[i]: ["embedded message failed validation"] | caused by GrpcServiceValidationError.GoogleGrpc: ["embedded message failed validation"] | caused by GoogleGrpcValidationError.ChannelCredentials: ["embedded message failed validation"] | caused by field: "credential_specifier", reason: is required): name: "outbound|80||default-http-backend.kube-system.svc.cluster.local"
type: EDS
eds_cluster_config {
  eds_config {
    ads {
    }
  }
  service_name: "outbound|80||default-http-backend.kube-system.svc.cluster.local"
}
connect_timeout {
  seconds: 1
}
circuit_breakers {
  thresholds {
  }
}
tls_context {
  common_tls_context {
    validation_context {
      trusted_ca {
        filename: "/etc/istio/certs/ca-root-cert.pem"
      }
      verify_subject_alt_name: "spiffe://cluster.local/ns/kube-system/sa/default"
    }
    alpn_protocols: "istio"
    tls_certificate_sds_secret_configs {
      name: "spiffe://cluster.local/ns/kube-system/sa/default"
      sds_config {
        api_config_source {
          api_type: GRPC
          grpc_services {
            google_grpc {
              target_uri: "unix:/var/run/sds/uds_path"
              channel_credentials {
                3: ""
              }
              call_credentials {
                google_compute_engine {
                }
              }
              stat_prefix: "sdsstat"
            }
          }
        }
      }
    }
  }
  sni: "outbound|80||default-http-backend.kube-system.svc.cluster.local"
}

[2018-09-28 22:25:24.588][11][warning][config] bazel-out/k8-opt/bin/external/envoy/source/common/config/_virtual_includes/grpc_mux_subscription_lib/common/config/grpc_mux_subscription_impl.h:70] gRPC config for type.googleapis.com/envoy.api.v2.Cluster rejected: Proto constraint validation failed (ClusterValidationError.TlsContext: ["embedded message failed validation"] | caused by UpstreamTlsContextValidationError.CommonTlsContext: ["embedded message failed validation"] | caused by CommonTlsContextValidationError.TlsCertificateSdsSecretConfigs[i]: ["embedded message failed validation"] | caused by SdsSecretConfigValidationError.SdsConfig: ["embedded message failed validation"] | caused by ConfigSourceValidationError.ApiConfigSource: ["embedded message failed validation"] | caused by ApiConfigSourceValidationError.GrpcServices[i]: ["embedded message failed validation"] | caused by GrpcServiceValidationError.GoogleGrpc: ["embedded message failed validation"] | caused by GoogleGrpcValidationError.ChannelCredentials: ["embedded message failed validation"] | caused by field: "credential_specifier", reason: is required): name: "outbound|80||default-http-backend.kube-system.svc.cluster.local"
type: EDS
eds_cluster_config {
  eds_config {
    ads {
    }
  }
  service_name: "outbound|80||default-http-backend.kube-system.svc.cluster.local"
}
connect_timeout {
  seconds: 1
}
circuit_breakers {
  thresholds {
  }
}
tls_context {
  common_tls_context {
    validation_context {
      trusted_ca {
        filename: "/etc/istio/certs/ca-root-cert.pem"
      }
      verify_subject_alt_name: "spiffe://cluster.local/ns/kube-system/sa/default"
    }
    alpn_protocols: "istio"
    tls_certificate_sds_secret_configs {
      name: "spiffe://cluster.local/ns/kube-system/sa/default"
      sds_config {
        api_config_source {
          api_type: GRPC
          grpc_services {
            google_grpc {
              target_uri: "unix:/var/run/sds/uds_path"
              channel_credentials {
                3: ""
              }
              call_credentials {
                google_compute_engine {
                }
              }
              stat_prefix: "sdsstat"
            }
          }
        }
      }
    }
  }
  sni: "outbound|80||default-http-backend.kube-system.svc.cluster.local"
}

[2018-09-28 22:25:24.653][11][warning][upstream] external/envoy/source/common/config/grpc_mux_impl.cc:231] gRPC config for type.googleapis.com/envoy.api.v2.Listener update rejected: Proto constraint validation failed (ListenerValidationError.FilterChains[i]: ["embedded message failed validation"] | caused by FilterChainValidationError.TlsContext: ["embedded message failed validation"] | caused by DownstreamTlsContextValidationError.CommonTlsContext: ["embedded message failed validation"] | caused by CommonTlsContextValidationError.TlsCertificateSdsSecretConfigs[i]: ["embedded message failed validation"] | caused by SdsSecretConfigValidationError.SdsConfig: ["embedded message failed validation"] | caused by ConfigSourceValidationError.ApiConfigSource: ["embedded message failed validation"] | caused by ApiConfigSourceValidationError.GrpcServices[i]: ["embedded message failed validation"] | caused by GrpcServiceValidationError.GoogleGrpc: ["embedded message failed validation"] | caused by GoogleGrpcValidationError.ChannelCredentials: ["embedded message failed validation"] | caused by field: "credential_specifier", reason: is required): name: "10.16.0.69_8000"
address {
  socket_address {
    address: "10.16.0.69"
    port_value: 8000
  }
}
filter_chains {
  tls_context {
    common_tls_context {
      validation_context {
        trusted_ca {
          filename: "/etc/istio/certs/ca-root-cert.pem"
        }
      }
      alpn_protocols: "h2"
      alpn_protocols: "http/1.1"
      tls_certificate_sds_secret_configs {
        name: "spiffe://cluster.local/ns/foo/sa/default"
        sds_config {
          api_config_source {
            api_type: GRPC
            grpc_services {
              google_grpc {
                target_uri: "unix:/var/run/sds/uds_path"
                channel_credentials {
                  3: ""
                }
                call_credentials {
                  google_compute_engine {
                  }
                }
                stat_prefix: "sdsstat"
              }
            }
          }
        }
      }
    }
    require_client_certificate {
      value: true
    }
  }
  filters {
    name: "envoy.http_connection_manager"
    config {
      fields {
        key: "access_log"
        value {
          list_value {
            values {
              struct_value {
                fields {
                  key: "config"
                  value {
                    struct_value {
                      fields {
                        key: "format"
                        value {
                          string_value: "[%START_TIME%] \"%REQ(:METHOD)% %REQ(X-ENVOY-ORIGINAL-PATH?:PATH)%%PROTOCOL%\" %RESPONSE_CODE% %RESPONSE_FLAGS% %BYTES_RECEIVED% %BYTES_SENT% %DURATION% %RESP(X-ENVOY-UPSTREAM-SERVICE-TIME)% \"%REQ(X-FORWARDED-FOR)%\" \"%REQ(USER-AGENT)%\" \"%REQ(X-REQUEST-ID)%\" \"%REQ(:AUTHORITY)%\" \"%UPSTREAM_HOST%\" %UPSTREAM_CLUSTER% %UPSTREAM_LOCAL_ADDRESS% %DOWNSTREAM_LOCAL_ADDRESS% %DOWNSTREAM_REMOTE_ADDRESS% %REQUESTED_SERVER_NAME%\n"
                        }
                      }
                      fields {
                        key: "path"
                        value {
                          string_value: "/dev/stdout"
                        }
                      }
                    }
                  }
                }
                fields {
                  key: "name"
                  value {
                    string_value: "envoy.file_access_log"
                  }
                }
              }
            }
          }
        }
      }
      fields {
        key: "forward_client_cert_details"
        value {
          string_value: "APPEND_FORWARD"
        }
      }
      fields {
        key: "generate_request_id"
        value {
          bool_value: true
        }
      }
      fields {
        key: "http_filters"
        value {
          list_value {
            values {
              struct_value {
                fields {
                  key: "config"
                  value {
                    struct_value {
                      fields {
                        key: "policy"
                        value {
                          struct_value {
                            fields {
                              key: "peers"
                              value {
                                list_value {
                                  values {
                                    struct_value {
                                      fields {
                                        key: "mtls"
                                        value {
                                          struct_value {
                                          }
                                        }
                                      }
                                    }
                                  }
                                }
                              }
                            }
                          }
                        }
                      }
                    }
                  }
                }
                fields {
                  key: "name"
                  value {
                    string_value: "istio_authn"
                  }
                }
              }
            }
            values {
              struct_value {
                fields {
                  key: "config"
                  value {
                    struct_value {
                      fields {
                        key: "default_destination_service"
                        value {
                          string_value: "default"
                        }
                      }
                      fields {
                        key: "mixer_attributes"
                        value {
                          struct_value {
                            fields {
                              key: "attributes"
                              value {
                                struct_value {
                                  fields {
                                    key: "context.reporter.kind"
                                    value {
                                      struct_value {
                                        fields {
                                          key: "string_value"
                                          value {
                                            string_value: "inbound"
                                          }
                                        }
                                      }
                                    }
                                  }
                                  fields {
                                    key: "context.reporter.uid"
                                    value {
                                      struct_value {
                                        fields {
                                          key: "string_value"
                                          value {
                                            string_value: "kubernetes://httpbin-6d6c88c4f5-q8h2t.foo"
                                          }
                                        }
                                      }
                                    }
                                  }
                                  fields {
                                    key: "destination.ip"
                                    value {
                                      struct_value {
                                        fields {
                                          key: "bytes_value"
                                          value {
                                            string_value: "AAAAAAAAAAAAAP//ChAARQ=="
                                          }
                                        }
                                      }
                                    }
                                  }
                                  fields {
                                    key: "destination.namespace"
                                    value {
                                      struct_value {
                                        fields {
                                          key: "string_value"
                                          value {
                                            string_value: "foo"
                                          }
                                        }
                                      }
                                    }
                                  }
                                  fields {
                                    key: "destination.port"
                                    value {
                                      struct_value {
                                        fields {
                                          key: "int64_value"
                                          value {
                                            string_value: "8000"
                                          }
                                        }
                                      }
                                    }
                                  }
                                  fields {
                                    key: "destination.uid"
                                    value {
                                      struct_value {
                                        fields {
                                          key: "string_value"
                                          value {
                                            string_value: "kubernetes://httpbin-6d6c88c4f5-q8h2t.foo"
                                          }
                                        }
                                      }
                                    }
                                  }
                                }
                              }
                            }
                          }
                        }
                      }
                      fields {
                        key: "service_configs"
                        value {
                          struct_value {
                            fields {
                              key: "default"
                              value {
                                struct_value {
                                }
                              }
                            }
                          }
                        }
                      }
                      fields {
                        key: "transport"
                        value {
                          struct_value {
                            fields {
                              key: "attributes_for_mixer_proxy"
                              value {
                                struct_value {
                                  fields {
                                    key: "attributes"
                                    value {
                                      struct_value {
                                        fields {
                                          key: "source.uid"
                                          value {
                                            struct_value {
                                              fields {
                                                key: "string_value"
                                                value {
                                                  string_value: "kubernetes://httpbin-6d6c88c4f5-q8h2t.foo"
                                                }
                                              }
                                            }
                                          }
                                        }
                                      }
                                    }
                                  }
                                }
                              }
                            }
                            fields {
                              key: "check_cluster"
                              value {
                                string_value: "outbound|9091||istio-policy.istio-system.svc.cluster.local"
                              }
                            }
                            fields {
                              key: "network_fail_policy"
                              value {
                                struct_value {
                                  fields {
                                    key: "policy"
                                    value {
                                      string_value: "FAIL_CLOSE"
                                    }
                                  }
                                }
                              }
                            }
                            fields {
                              key: "report_cluster"
                              value {
                                string_value: "outbound|9091||istio-telemetry.istio-system.svc.cluster.local"
                              }
                            }
                          }
                        }
                      }
                    }
                  }
                }
                fields {
                  key: "name"
                  value {
                    string_value: "mixer"
                  }
                }
              }
            }
            values {
              struct_value {
                fields {
                  key: "name"
                  value {
                    string_value: "envoy.cors"
                  }
                }
              }
            }
            values {
              struct_value {
                fields {
                  key: "name"
                  value {
                    string_value: "envoy.fault"
                  }
                }
              }
            }
            values {
              struct_value {
                fields {
                  key: "name"
                  value {
                    string_value: "envoy.router"
                  }
                }
              }
            }
          }
        }
      }
      fields {
        key: "route_config"
        value {
          struct_value {
            fields {
              key: "name"
              value {
                string_value: "inbound|8000||httpbin.foo.svc.cluster.local"
              }
            }
            fields {
              key: "validate_clusters"
              value {
                bool_value: false
              }
            }
            fields {
              key: "virtual_hosts"
              value {
                list_value {
                  values {
                    struct_value {
                      fields {
                        key: "domains"
                        value {
                          list_value {
                            values {
                              string_value: "*"
                            }
                          }
                        }
                      }
                      fields {
                        key: "name"
                        value {
                          string_value: "inbound|http|8000"
                        }
                      }
                      fields {
                        key: "routes"
                        value {
                          list_value {
                            values {
                              struct_value {
                                fields {
                                  key: "decorator"
                                  value {
                                    struct_value {
                                      fields {
                                        key: "operation"
                                        value {
                                          string_value: "httpbin.foo.svc.cluster.local:8000/*"
                                        }
                                      }
                                    }
                                  }
                                }
                                fields {
                                  key: "match"
                                  value {
                                    struct_value {
                                      fields {
                                        key: "prefix"
                                        value {
                                          string_value: "/"
                                        }
                                      }
                                    }
                                  }
                                }
                                fields {
                                  key: "per_filter_config"
                                  value {
                                    struct_value {
                                      fields {
                                        key: "mixer"
                                        value {
                                          struct_value {
                                            fields {
                                              key: "mixer_attributes"
                                              value {
                                                struct_value {
                                                  fields {
                                                    key: "attributes"
                                                    value {
                                                      struct_value {
                                                        fields {
                                                          key: "destination.service.host"
                                                          value {
                                                            struct_value {
                                                              fields {
                                                                key: "string_value"
                                                                value {
                                                                  string_value: "httpbin.foo.svc.cluster.local"
                                                                }
                                                              }
                                                            }
                                                          }
                                                        }
                                                        fields {
                                                          key: "destination.service.name"
                                                          value {
                                                            struct_value {
                                                              fields {
                                                                key: "string_value"
                                                                value {
                                                                  string_value: "httpbin"
                                                                }
                                                              }
                                                            }
                                                          }
                                                        }
                                                        fields {
                                                          key: "destination.service.namespace"
                                                          value {
                                                            struct_value {
                                                              fields {
                                                                key: "string_value"
                                                                value {
                                                                  string_value: "foo"
                                                                }
                                                              }
                                                            }
                                                          }
                                                        }
                                                        fields {
                                                          key: "destination.service.uid"
                                                          value {
                                                            struct_value {
                                                              fields {
                                                                key: "string_value"
                                                                value {
                                                                  string_value: "istio://foo/services/httpbin"
                                                                }
                                                              }
                                                            }
                                                          }
                                                        }
                                                      }
                                                    }
                                                  }
                                                }
                                              }
                                            }
                                          }
                                        }
                                      }
                                    }
                                  }
                                }
                                fields {
                                  key: "route"
                                  value {
                                    struct_value {
                                      fields {
                                        key: "cluster"
                                        value {
                                          string_value: "inbound|8000||httpbin.foo.svc.cluster.local"
                                        }
                                      }
                                      fields {
                                        key: "max_grpc_timeout"
                                        value {
                                          string_value: "0s"
                                        }
                                      }
                                      fields {
                                        key: "timeout"
                                        value {
                                          string_value: "0s"
                                        }
                                      }
                                    }
                                  }
                                }
                              }
                            }
                          }
                        }
                      }
                    }
                  }
                }
              }
            }
          }
        }
      }
      fields {
        key: "stat_prefix"
        value {
          string_value: "10.16.0.69_8000"
        }
      }
      fields {
        key: "stream_idle_timeout"
        value {
          string_value: "0s"
        }
      }
      fields {
        key: "tracing"
        value {
          struct_value {
            fields {
              key: "client_sampling"
              value {
                struct_value {
                  fields {
                    key: "value"
                    value {
                      number_value: 100
                    }
                  }
                }
              }
            }
            fields {
              key: "overall_sampling"
              value {
                struct_value {
                  fields {
                    key: "value"
                    value {
                      number_value: 100
                    }
                  }
                }
              }
            }
            fields {
              key: "random_sampling"
              value {
                struct_value {
                  fields {
                    key: "value"
                    value {
                      number_value: 100
                    }
                  }
                }
              }
            }
          }
        }
      }
      fields {
        key: "upgrade_configs"
        value {
          list_value {
            values {
              struct_value {
                fields {
                  key: "upgrade_type"
                  value {
                    string_value: "websocket"
                  }
                }
              }
            }
          }
        }
      }
      fields {
        key: "use_remote_address"
        value {
          bool_value: false
        }
      }
    }
  }
}
deprecated_v1 {
  bind_to_port {
  }
}
listener_filters {
  name: "envoy.listener.tls_inspector"
}

[2018-09-28 22:25:24.656][11][warning][config] bazel-out/k8-opt/bin/external/envoy/source/common/config/_virtual_includes/grpc_mux_subscription_lib/common/config/grpc_mux_subscription_impl.h:70] gRPC config for type.googleapis.com/envoy.api.v2.Listener rejected: Proto constraint validation failed (ListenerValidationError.FilterChains[i]: ["embedded message failed validation"] | caused by FilterChainValidationError.TlsContext: ["embedded message failed validation"] | caused by DownstreamTlsContextValidationError.CommonTlsContext: ["embedded message failed validation"] | caused by CommonTlsContextValidationError.TlsCertificateSdsSecretConfigs[i]: ["embedded message failed validation"] | caused by SdsSecretConfigValidationError.SdsConfig: ["embedded message failed validation"] | caused by ConfigSourceValidationError.ApiConfigSource: ["embedded message failed validation"] | caused by ApiConfigSourceValidationError.GrpcServices[i]: ["embedded message failed validation"] | caused by GrpcServiceValidationError.GoogleGrpc: ["embedded message failed validation"] | caused by GoogleGrpcValidationError.ChannelCredentials: ["embedded message failed validation"] | caused by field: "credential_specifier", reason: is required): name: "10.16.0.69_8000"
address {
  socket_address {
    address: "10.16.0.69"
    port_value: 8000
  }
}
filter_chains {
  tls_context {
    common_tls_context {
      validation_context {
        trusted_ca {
          filename: "/etc/istio/certs/ca-root-cert.pem"
        }
      }
      alpn_protocols: "h2"
      alpn_protocols: "http/1.1"
      tls_certificate_sds_secret_configs {
        name: "spiffe://cluster.local/ns/foo/sa/default"
        sds_config {
          api_config_source {
            api_type: GRPC
            grpc_services {
              google_grpc {
                target_uri: "unix:/var/run/sds/uds_path"
                channel_credentials {
                  3: ""
                }
                call_credentials {
                  google_compute_engine {
                  }
                }
                stat_prefix: "sdsstat"
              }
            }
          }
        }
      }
    }
    require_client_certificate {
      value: true
    }
  }
  filters {
    name: "envoy.http_connection_manager"
    config {
      fields {
        key: "access_log"
        value {
          list_value {
            values {
              struct_value {
                fields {
                  key: "config"
                  value {
                    struct_value {
                      fields {
                        key: "format"
                        value {
                          string_value: "[%START_TIME%] \"%REQ(:METHOD)% %REQ(X-ENVOY-ORIGINAL-PATH?:PATH)%%PROTOCOL%\" %RESPONSE_CODE% %RESPONSE_FLAGS% %BYTES_RECEIVED% %BYTES_SENT% %DURATION% %RESP(X-ENVOY-UPSTREAM-SERVICE-TIME)% \"%REQ(X-FORWARDED-FOR)%\" \"%REQ(USER-AGENT)%\" \"%REQ(X-REQUEST-ID)%\" \"%REQ(:AUTHORITY)%\" \"%UPSTREAM_HOST%\" %UPSTREAM_CLUSTER% %UPSTREAM_LOCAL_ADDRESS% %DOWNSTREAM_LOCAL_ADDRESS% %DOWNSTREAM_REMOTE_ADDRESS% %REQUESTED_SERVER_NAME%\n"
                        }
                      }
                      fields {
                        key: "path"
                        value {
                          string_value: "/dev/stdout"
                        }
                      }
                    }
                  }
                }
                fields {
                  key: "name"
                  value {
                    string_value: "envoy.file_access_log"
                  }
                }
              }
            }
          }
        }
      }
      fields {
        key: "forward_client_cert_details"
        value {
          string_value: "APPEND_FORWARD"
        }
      }
      fields {
        key: "generate_request_id"
        value {
          bool_value: true
        }
      }
      fields {
        key: "http_filters"
        value {
          list_value {
            values {
              struct_value {
                fields {
                  key: "config"
                  value {
                    struct_value {
                      fields {
                        key: "policy"
                        value {
                          struct_value {
                            fields {
                              key: "peers"
                              value {
                                list_value {
                                  values {
                                    struct_value {
                                      fields {
                                        key: "mtls"
                                        value {
                                          struct_value {
                                          }
                                        }
                                      }
                                    }
                                  }
                                }
                              }
                            }
                          }
                        }
                      }
                    }
                  }
                }
                fields {
                  key: "name"
                  value {
                    string_value: "istio_authn"
                  }
                }
              }
            }
            values {
              struct_value {
                fields {
                  key: "config"
                  value {
                    struct_value {
                      fields {
                        key: "default_destination_service"
                        value {
                          string_value: "default"
                        }
                      }
                      fields {
                        key: "mixer_attributes"
                        value {
                          struct_value {
                            fields {
                              key: "attributes"
                              value {
                                struct_value {
                                  fields {
                                    key: "context.reporter.kind"
                                    value {
                                      struct_value {
                                        fields {
                                          key: "string_value"
                                          value {
                                            string_value: "inbound"
                                          }
                                        }
                                      }
                                    }
                                  }
                                  fields {
                                    key: "context.reporter.uid"
                                    value {
                                      struct_value {
                                        fields {
                                          key: "string_value"
                                          value {
                                            string_value: "kubernetes://httpbin-6d6c88c4f5-q8h2t.foo"
                                          }
                                        }
                                      }
                                    }
                                  }
                                  fields {
                                    key: "destination.ip"
                                    value {
                                      struct_value {
                                        fields {
                                          key: "bytes_value"
                                          value {
                                            string_value: "AAAAAAAAAAAAAP//ChAARQ=="
                                          }
                                        }
                                      }
                                    }
                                  }
                                  fields {
                                    key: "destination.namespace"
                                    value {
                                      struct_value {
                                        fields {
                                          key: "string_value"
                                          value {
                                            string_value: "foo"
                                          }
                                        }
                                      }
                                    }
                                  }
                                  fields {
                                    key: "destination.port"
                                    value {
                                      struct_value {
                                        fields {
                                          key: "int64_value"
                                          value {
                                            string_value: "8000"
                                          }
                                        }
                                      }
                                    }
                                  }
                                  fields {
                                    key: "destination.uid"
                                    value {
                                      struct_value {
                                        fields {
                                          key: "string_value"
                                          value {
                                            string_value: "kubernetes://httpbin-6d6c88c4f5-q8h2t.foo"
                                          }
                                        }
                                      }
                                    }
                                  }
                                }
                              }
                            }
                          }
                        }
                      }
                      fields {
                        key: "service_configs"
                        value {
                          struct_value {
                            fields {
                              key: "default"
                              value {
                                struct_value {
                                }
                              }
                            }
                          }
                        }
                      }
                      fields {
                        key: "transport"
                        value {
                          struct_value {
                            fields {
                              key: "attributes_for_mixer_proxy"
                              value {
                                struct_value {
                                  fields {
                                    key: "attributes"
                                    value {
                                      struct_value {
                                        fields {
                                          key: "source.uid"
                                          value {
                                            struct_value {
                                              fields {
                                                key: "string_value"
                                                value {
                                                  string_value: "kubernetes://httpbin-6d6c88c4f5-q8h2t.foo"
                                                }
                                              }
                                            }
                                          }
                                        }
                                      }
                                    }
                                  }
                                }
                              }
                            }
                            fields {
                              key: "check_cluster"
                              value {
                                string_value: "outbound|9091||istio-policy.istio-system.svc.cluster.local"
                              }
                            }
                            fields {
                              key: "network_fail_policy"
                              value {
                                struct_value {
                                  fields {
                                    key: "policy"
                                    value {
                                      string_value: "FAIL_CLOSE"
                                    }
                                  }
                                }
                              }
                            }
                            fields {
                              key: "report_cluster"
                              value {
                                string_value: "outbound|9091||istio-telemetry.istio-system.svc.cluster.local"
                              }
                            }
                          }
                        }
                      }
                    }
                  }
                }
                fields {
                  key: "name"
                  value {
                    string_value: "mixer"
                  }
                }
              }
            }
            values {
              struct_value {
                fields {
                  key: "name"
                  value {
                    string_value: "envoy.cors"
                  }
                }
              }
            }
            values {
              struct_value {
                fields {
                  key: "name"
                  value {
                    string_value: "envoy.fault"
                  }
                }
              }
            }
            values {
              struct_value {
                fields {
                  key: "name"
                  value {
                    string_value: "envoy.router"
                  }
                }
              }
            }
          }
        }
      }
      fields {
        key: "route_config"
        value {
          struct_value {
            fields {
              key: "name"
              value {
                string_value: "inbound|8000||httpbin.foo.svc.cluster.local"
              }
            }
            fields {
              key: "validate_clusters"
              value {
                bool_value: false
              }
            }
            fields {
              key: "virtual_hosts"
              value {
                list_value {
                  values {
                    struct_value {
                      fields {
                        key: "domains"
                        value {
                          list_value {
                            values {
                              string_value: "*"
                            }
                          }
                        }
                      }
                      fields {
                        key: "name"
                        value {
                          string_value: "inbound|http|8000"
                        }
                      }
                      fields {
                        key: "routes"
                        value {
                          list_value {
                            values {
                              struct_value {
                                fields {
                                  key: "decorator"
                                  value {
                                    struct_value {
                                      fields {
                                        key: "operation"
                                        value {
                                          string_value: "httpbin.foo.svc.cluster.local:8000/*"
                                        }
                                      }
                                    }
                                  }
                                }
                                fields {
                                  key: "match"
                                  value {
                                    struct_value {
                                      fields {
                                        key: "prefix"
                                        value {
                                          string_value: "/"
                                        }
                                      }
                                    }
                                  }
                                }
                                fields {
                                  key: "per_filter_config"
                                  value {
                                    struct_value {
                                      fields {
                                        key: "mixer"
                                        value {
                                          struct_value {
                                            fields {
                                              key: "mixer_attributes"
                                              value {
                                                struct_value {
                                                  fields {
                                                    key: "attributes"
                                                    value {
                                                      struct_value {
                                                        fields {
                                                          key: "destination.service.host"
                                                          value {
                                                            struct_value {
                                                              fields {
                                                                key: "string_value"
                                                                value {
                                                                  string_value: "httpbin.foo.svc.cluster.local"
                                                                }
                                                              }
                                                            }
                                                          }
                                                        }
                                                        fields {
                                                          key: "destination.service.name"
                                                          value {
                                                            struct_value {
                                                              fields {
                                                                key: "string_value"
                                                                value {
                                                                  string_value: "httpbin"
                                                                }
                                                              }
                                                            }
                                                          }
                                                        }
                                                        fields {
                                                          key: "destination.service.namespace"
                                                          value {
                                                            struct_value {
                                                              fields {
                                                                key: "string_value"
                                                                value {
                                                                  string_value: "foo"
                                                                }
                                                              }
                                                            }
                                                          }
                                                        }
                                                        fields {
                                                          key: "destination.service.uid"
                                                          value {
                                                            struct_value {
                                                              fields {
                                                                key: "string_value"
                                                                value {
                                                                  string_value: "istio://foo/services/httpbin"
                                                                }
                                                              }
                                                            }
                                                          }
                                                        }
                                                      }
                                                    }
                                                  }
                                                }
                                              }
                                            }
                                          }
                                        }
                                      }
                                    }
                                  }
                                }
                                fields {
                                  key: "route"
                                  value {
                                    struct_value {
                                      fields {
                                        key: "cluster"
                                        value {
                                          string_value: "inbound|8000||httpbin.foo.svc.cluster.local"
                                        }
                                      }
                                      fields {
                                        key: "max_grpc_timeout"
                                        value {
                                          string_value: "0s"
                                        }
                                      }
                                      fields {
                                        key: "timeout"
                                        value {
                                          string_value: "0s"
                                        }
                                      }
                                    }
                                  }
                                }
                              }
                            }
                          }
                        }
                      }
                    }
                  }
                }
              }
            }
          }
        }
      }
      fields {
        key: "stat_prefix"
        value {
          string_value: "10.16.0.69_8000"
        }
      }
      fields {
        key: "stream_idle_timeout"
        value {
          string_value: "0s"
        }
      }
      fields {
        key: "tracing"
        value {
          struct_value {
            fields {
              key: "client_sampling"
              value {
                struct_value {
                  fields {
                    key: "value"
                    value {
                      number_value: 100
                    }
                  }
                }
              }
            }
            fields {
              key: "overall_sampling"
              value {
                struct_value {
                  fields {
                    key: "value"
                    value {
                      number_value: 100
                    }
                  }
                }
              }
            }
            fields {
              key: "random_sampling"
              value {
                struct_value {
                  fields {
                    key: "value"
                    value {
                      number_value: 100
                    }
                  }
                }
              }
            }
          }
        }
      }
      fields {
        key: "upgrade_configs"
        value {
          list_value {
            values {
              struct_value {
                fields {
                  key: "upgrade_type"
                  value {
                    string_value: "websocket"
                  }
                }
              }
            }
          }
        }
      }
      fields {
        key: "use_remote_address"
        value {
          bool_value: false
        }
      }
    }
  }
}
deprecated_v1 {
  bind_to_port {
  }
}
listener_filters {
  name: "envoy.listener.tls_inspector"
}

2018-09-28T22:25:24.741276Z	info	Envoy proxy is NOT ready: 3 errors occurred:

* failed checking application ports. listeners="0.0.0.0:15090"
* envoy missing listener for inbound application port: 0
* envoy missing listener for inbound application port: 8000
2018-09-28T22:25:26.741555Z	info	Envoy proxy is NOT ready: 3 errors occurred:

* failed checking application ports. listeners="0.0.0.0:15090"
* envoy missing listener for inbound application port: 0
* envoy missing listener for inbound application port: 8000
[2018-09-28 22:25:27.443][11][warning][upstream] external/envoy/source/common/config/grpc_mux_impl.cc:231] gRPC config for type.googleapis.com/envoy.api.v2.Cluster update rejected: Proto constraint validation failed (ClusterValidationError.TlsContext: ["embedded message failed validation"] | caused by UpstreamTlsContextValidationError.CommonTlsContext: ["embedded message failed validation"] | caused by CommonTlsContextValidationError.TlsCertificateSdsSecretConfigs[i]: ["embedded message failed validation"] | caused by SdsSecretConfigValidationError.SdsConfig: ["embedded message failed validation"] | caused by ConfigSourceValidationError.ApiConfigSource: ["embedded message failed validation"] | caused by ApiConfigSourceValidationError.GrpcServices[i]: ["embedded message failed validation"] | caused by GrpcServiceValidationError.GoogleGrpc: ["embedded message failed validation"] | caused by GoogleGrpcValidationError.ChannelCredentials: ["embedded message failed validation"] | caused by field: "credential_specifier", reason: is required): name: "outbound|53||kube-dns.kube-system.svc.cluster.local"
type: EDS
eds_cluster_config {
  eds_config {
    ads {
    }
  }
  service_name: "outbound|53||kube-dns.kube-system.svc.cluster.local"
}
connect_timeout {
  seconds: 1
}
circuit_breakers {
  thresholds {
  }
}
tls_context {
  common_tls_context {
    validation_context {
      trusted_ca {
        filename: "/etc/istio/certs/ca-root-cert.pem"
      }
      verify_subject_alt_name: "spiffe://cluster.local/ns/kube-system/sa/kube-dns"
    }
    alpn_protocols: "istio"
    tls_certificate_sds_secret_configs {
      name: "spiffe://cluster.local/ns/kube-system/sa/kube-dns"
      sds_config {
        api_config_source {
          api_type: GRPC
          grpc_services {
            google_grpc {
              target_uri: "unix:/var/run/sds/uds_path"
              channel_credentials {
                3: ""
              }
              call_credentials {
                google_compute_engine {
                }
              }
              stat_prefix: "sdsstat"
            }
          }
        }
      }
    }
  }
  sni: "outbound|53||kube-dns.kube-system.svc.cluster.local"
}

[2018-09-28 22:25:27.443][11][warning][config] bazel-out/k8-opt/bin/external/envoy/source/common/config/_virtual_includes/grpc_mux_subscription_lib/common/config/grpc_mux_subscription_impl.h:70] gRPC config for type.googleapis.com/envoy.api.v2.Cluster rejected: Proto constraint validation failed (ClusterValidationError.TlsContext: ["embedded message failed validation"] | caused by UpstreamTlsContextValidationError.CommonTlsContext: ["embedded message failed validation"] | caused by CommonTlsContextValidationError.TlsCertificateSdsSecretConfigs[i]: ["embedded message failed validation"] | caused by SdsSecretConfigValidationError.SdsConfig: ["embedded message failed validation"] | caused by ConfigSourceValidationError.ApiConfigSource: ["embedded message failed validation"] | caused by ApiConfigSourceValidationError.GrpcServices[i]: ["embedded message failed validation"] | caused by GrpcServiceValidationError.GoogleGrpc: ["embedded message failed validation"] | caused by GoogleGrpcValidationError.ChannelCredentials: ["embedded message failed validation"] | caused by field: "credential_specifier", reason: is required): name: "outbound|53||kube-dns.kube-system.svc.cluster.local"
type: EDS
eds_cluster_config {
  eds_config {
    ads {
    }
  }
  service_name: "outbound|53||kube-dns.kube-system.svc.cluster.local"
}
connect_timeout {
  seconds: 1
}
circuit_breakers {
  thresholds {
  }
}
tls_context {
  common_tls_context {
    validation_context {
      trusted_ca {
        filename: "/etc/istio/certs/ca-root-cert.pem"
      }
      verify_subject_alt_name: "spiffe://cluster.local/ns/kube-system/sa/kube-dns"
    }
    alpn_protocols: "istio"
    tls_certificate_sds_secret_configs {
      name: "spiffe://cluster.local/ns/kube-system/sa/kube-dns"
      sds_config {
        api_config_source {
          api_type: GRPC
          grpc_services {
            google_grpc {
              target_uri: "unix:/var/run/sds/uds_path"
              channel_credentials {
                3: ""
              }
              call_credentials {
                google_compute_engine {
                }
              }
              stat_prefix: "sdsstat"
            }
          }
        }
      }
    }
  }
  sni: "outbound|53||kube-dns.kube-system.svc.cluster.local"
}

[2018-09-28 22:25:27.631][11][warning][upstream] external/envoy/source/common/config/grpc_mux_impl.cc:231] gRPC config for type.googleapis.com/envoy.api.v2.Listener update rejected: Proto constraint validation failed (ListenerValidationError.FilterChains[i]: ["embedded message failed validation"] | caused by FilterChainValidationError.TlsContext: ["embedded message failed validation"] | caused by DownstreamTlsContextValidationError.CommonTlsContext: ["embedded message failed validation"] | caused by CommonTlsContextValidationError.TlsCertificateSdsSecretConfigs[i]: ["embedded message failed validation"] | caused by SdsSecretConfigValidationError.SdsConfig: ["embedded message failed validation"] | caused by ConfigSourceValidationError.ApiConfigSource: ["embedded message failed validation"] | caused by ApiConfigSourceValidationError.GrpcServices[i]: ["embedded message failed validation"] | caused by GrpcServiceValidationError.GoogleGrpc: ["embedded message failed validation"] | caused by GoogleGrpcValidationError.ChannelCredentials: ["embedded message failed validation"] | caused by field: "credential_specifier", reason: is required): name: "10.16.0.69_8000"
address {
  socket_address {
    address: "10.16.0.69"
    port_value: 8000
  }
}
filter_chains {
  tls_context {
    common_tls_context {
      validation_context {
        trusted_ca {
          filename: "/etc/istio/certs/ca-root-cert.pem"
        }
      }
      alpn_protocols: "h2"
      alpn_protocols: "http/1.1"
      tls_certificate_sds_secret_configs {
        name: "spiffe://cluster.local/ns/foo/sa/default"
        sds_config {
          api_config_source {
            api_type: GRPC
            grpc_services {
              google_grpc {
                target_uri: "unix:/var/run/sds/uds_path"
                channel_credentials {
                  3: ""
                }
                call_credentials {
                  google_compute_engine {
                  }
                }
                stat_prefix: "sdsstat"
              }
            }
          }
        }
      }
    }
    require_client_certificate {
      value: true
    }
  }
  filters {
    name: "envoy.http_connection_manager"
    config {
      fields {
        key: "access_log"
        value {
          list_value {
            values {
              struct_value {
                fields {
                  key: "config"
                  value {
                    struct_value {
                      fields {
                        key: "format"
                        value {
                          string_value: "[%START_TIME%] \"%REQ(:METHOD)% %REQ(X-ENVOY-ORIGINAL-PATH?:PATH)%%PROTOCOL%\" %RESPONSE_CODE% %RESPONSE_FLAGS% %BYTES_RECEIVED% %BYTES_SENT% %DURATION% %RESP(X-ENVOY-UPSTREAM-SERVICE-TIME)% \"%REQ(X-FORWARDED-FOR)%\" \"%REQ(USER-AGENT)%\" \"%REQ(X-REQUEST-ID)%\" \"%REQ(:AUTHORITY)%\" \"%UPSTREAM_HOST%\" %UPSTREAM_CLUSTER% %UPSTREAM_LOCAL_ADDRESS% %DOWNSTREAM_LOCAL_ADDRESS% %DOWNSTREAM_REMOTE_ADDRESS% %REQUESTED_SERVER_NAME%\n"
                        }
                      }
                      fields {
                        key: "path"
                        value {
                          string_value: "/dev/stdout"
                        }
                      }
                    }
                  }
                }
                fields {
                  key: "name"
                  value {
                    string_value: "envoy.file_access_log"
                  }
                }
              }
            }
          }
        }
      }
      fields {
        key: "forward_client_cert_details"
        value {
          string_value: "APPEND_FORWARD"
        }
      }
      fields {
        key: "generate_request_id"
        value {
          bool_value: true
        }
      }
      fields {
        key: "http_filters"
        value {
          list_value {
            values {
              struct_value {
                fields {
                  key: "config"
                  value {
                    struct_value {
                      fields {
                        key: "policy"
                        value {
                          struct_value {
                            fields {
                              key: "peers"
                              value {
                                list_value {
                                  values {
                                    struct_value {
                                      fields {
                                        key: "mtls"
                                        value {
                                          struct_value {
                                          }
                                        }
                                      }
                                    }
                                  }
                                }
                              }
                            }
                          }
                        }
                      }
                    }
                  }
                }
                fields {
                  key: "name"
                  value {
                    string_value: "istio_authn"
                  }
                }
              }
            }
            values {
              struct_value {
                fields {
                  key: "config"
                  value {
                    struct_value {
                      fields {
                        key: "default_destination_service"
                        value {
                          string_value: "default"
                        }
                      }
                      fields {
                        key: "mixer_attributes"
                        value {
                          struct_value {
                            fields {
                              key: "attributes"
                              value {
                                struct_value {
                                  fields {
                                    key: "context.reporter.kind"
                                    value {
                                      struct_value {
                                        fields {
                                          key: "string_value"
                                          value {
                                            string_value: "inbound"
                                          }
                                        }
                                      }
                                    }
                                  }
                                  fields {
                                    key: "context.reporter.uid"
                                    value {
                                      struct_value {
                                        fields {
                                          key: "string_value"
                                          value {
                                            string_value: "kubernetes://httpbin-6d6c88c4f5-q8h2t.foo"
                                          }
                                        }
                                      }
                                    }
                                  }
                                  fields {
                                    key: "destination.ip"
                                    value {
                                      struct_value {
                                        fields {
                                          key: "bytes_value"
                                          value {
                                            string_value: "AAAAAAAAAAAAAP//ChAARQ=="
                                          }
                                        }
                                      }
                                    }
                                  }
                                  fields {
                                    key: "destination.namespace"
                                    value {
                                      struct_value {
                                        fields {
                                          key: "string_value"
                                          value {
                                            string_value: "foo"
                                          }
                                        }
                                      }
                                    }
                                  }
                                  fields {
                                    key: "destination.port"
                                    value {
                                      struct_value {
                                        fields {
                                          key: "int64_value"
                                          value {
                                            string_value: "8000"
                                          }
                                        }
                                      }
                                    }
                                  }
                                  fields {
                                    key: "destination.uid"
                                    value {
                                      struct_value {
                                        fields {
                                          key: "string_value"
                                          value {
                                            string_value: "kubernetes://httpbin-6d6c88c4f5-q8h2t.foo"
                                          }
                                        }
                                      }
                                    }
                                  }
                                }
                              }
                            }
                          }
                        }
                      }
                      fields {
                        key: "service_configs"
                        value {
                          struct_value {
                            fields {
                              key: "default"
                              value {
                                struct_value {
                                }
                              }
                            }
                          }
                        }
                      }
                      fields {
                        key: "transport"
                        value {
                          struct_value {
                            fields {
                              key: "attributes_for_mixer_proxy"
                              value {
                                struct_value {
                                  fields {
                                    key: "attributes"
                                    value {
                                      struct_value {
                                        fields {
                                          key: "source.uid"
                                          value {
                                            struct_value {
                                              fields {
                                                key: "string_value"
                                                value {
                                                  string_value: "kubernetes://httpbin-6d6c88c4f5-q8h2t.foo"
                                                }
                                              }
                                            }
                                          }
                                        }
                                      }
                                    }
                                  }
                                }
                              }
                            }
                            fields {
                              key: "check_cluster"
                              value {
                                string_value: "outbound|9091||istio-policy.istio-system.svc.cluster.local"
                              }
                            }
                            fields {
                              key: "network_fail_policy"
                              value {
                                struct_value {
                                  fields {
                                    key: "policy"
                                    value {
                                      string_value: "FAIL_CLOSE"
                                    }
                                  }
                                }
                              }
                            }
                            fields {
                              key: "report_cluster"
                              value {
                                string_value: "outbound|9091||istio-telemetry.istio-system.svc.cluster.local"
                              }
                            }
                          }
                        }
                      }
                    }
                  }
                }
                fields {
                  key: "name"
                  value {
                    string_value: "mixer"
                  }
                }
              }
            }
            values {
              struct_value {
                fields {
                  key: "name"
                  value {
                    string_value: "envoy.cors"
                  }
                }
              }
            }
            values {
              struct_value {
                fields {
                  key: "name"
                  value {
                    string_value: "envoy.fault"
                  }
                }
              }
            }
            values {
              struct_value {
                fields {
                  key: "name"
                  value {
                    string_value: "envoy.router"
                  }
                }
              }
            }
          }
        }
      }
      fields {
        key: "route_config"
        value {
          struct_value {
            fields {
              key: "name"
              value {
                string_value: "inbound|8000||httpbin.foo.svc.cluster.local"
              }
            }
            fields {
              key: "validate_clusters"
              value {
                bool_value: false
              }
            }
            fields {
              key: "virtual_hosts"
              value {
                list_value {
                  values {
                    struct_value {
                      fields {
                        key: "domains"
                        value {
                          list_value {
                            values {
                              string_value: "*"
                            }
                          }
                        }
                      }
                      fields {
                        key: "name"
                        value {
                          string_value: "inbound|http|8000"
                        }
                      }
                      fields {
                        key: "routes"
                        value {
                          list_value {
                            values {
                              struct_value {
                                fields {
                                  key: "decorator"
                                  value {
                                    struct_value {
                                      fields {
                                        key: "operation"
                                        value {
                                          string_value: "httpbin.foo.svc.cluster.local:8000/*"
                                        }
                                      }
                                    }
                                  }
                                }
                                fields {
                                  key: "match"
                                  value {
                                    struct_value {
                                      fields {
                                        key: "prefix"
                                        value {
                                          string_value: "/"
                                        }
                                      }
                                    }
                                  }
                                }
                                fields {
                                  key: "per_filter_config"
                                  value {
                                    struct_value {
                                      fields {
                                        key: "mixer"
                                        value {
                                          struct_value {
                                            fields {
                                              key: "mixer_attributes"
                                              value {
                                                struct_value {
                                                  fields {
                                                    key: "attributes"
                                                    value {
                                                      struct_value {
                                                        fields {
                                                          key: "destination.service.host"
                                                          value {
                                                            struct_value {
                                                              fields {
                                                                key: "string_value"
                                                                value {
                                                                  string_value: "httpbin.foo.svc.cluster.local"
                                                                }
                                                              }
                                                            }
                                                          }
                                                        }
                                                        fields {
                                                          key: "destination.service.name"
                                                          value {
                                                            struct_value {
                                                              fields {
                                                                key: "string_value"
                                                                value {
                                                                  string_value: "httpbin"
                                                                }
                                                              }
                                                            }
                                                          }
                                                        }
                                                        fields {
                                                          key: "destination.service.namespace"
                                                          value {
                                                            struct_value {
                                                              fields {
                                                                key: "string_value"
                                                                value {
                                                                  string_value: "foo"
                                                                }
                                                              }
                                                            }
                                                          }
                                                        }
                                                        fields {
                                                          key: "destination.service.uid"
                                                          value {
                                                            struct_value {
                                                              fields {
                                                                key: "string_value"
                                                                value {
                                                                  string_value: "istio://foo/services/httpbin"
                                                                }
                                                              }
                                                            }
                                                          }
                                                        }
                                                      }
                                                    }
                                                  }
                                                }
                                              }
                                            }
                                          }
                                        }
                                      }
                                    }
                                  }
                                }
                                fields {
                                  key: "route"
                                  value {
                                    struct_value {
                                      fields {
                                        key: "cluster"
                                        value {
                                          string_value: "inbound|8000||httpbin.foo.svc.cluster.local"
                                        }
                                      }
                                      fields {
                                        key: "max_grpc_timeout"
                                        value {
                                          string_value: "0s"
                                        }
                                      }
                                      fields {
                                        key: "timeout"
                                        value {
                                          string_value: "0s"
                                        }
                                      }
                                    }
                                  }
                                }
                              }
                            }
                          }
                        }
                      }
                    }
                  }
                }
              }
            }
          }
        }
      }
      fields {
        key: "stat_prefix"
        value {
          string_value: "10.16.0.69_8000"
        }
      }
      fields {
        key: "stream_idle_timeout"
        value {
          string_value: "0s"
        }
      }
      fields {
        key: "tracing"
        value {
          struct_value {
            fields {
              key: "client_sampling"
              value {
                struct_value {
                  fields {
                    key: "value"
                    value {
                      number_value: 100
                    }
                  }
                }
              }
            }
            fields {
              key: "overall_sampling"
              value {
                struct_value {
                  fields {
                    key: "value"
                    value {
                      number_value: 100
                    }
                  }
                }
              }
            }
            fields {
              key: "random_sampling"
              value {
                struct_value {
                  fields {
                    key: "value"
                    value {
                      number_value: 100
                    }
                  }
                }
              }
            }
          }
        }
      }
      fields {
        key: "upgrade_configs"
        value {
          list_value {
            values {
              struct_value {
                fields {
                  key: "upgrade_type"
                  value {
                    string_value: "websocket"
                  }
                }
              }
            }
          }
        }
      }
      fields {
        key: "use_remote_address"
        value {
          bool_value: false
        }
      }
    }
  }
}
deprecated_v1 {
  bind_to_port {
  }
}
listener_filters {
  name: "envoy.listener.tls_inspector"
}

[2018-09-28 22:25:27.633][11][warning][config] bazel-out/k8-opt/bin/external/envoy/source/common/config/_virtual_includes/grpc_mux_subscription_lib/common/config/grpc_mux_subscription_impl.h:70] gRPC config for type.googleapis.com/envoy.api.v2.Listener rejected: Proto constraint validation failed (ListenerValidationError.FilterChains[i]: ["embedded message failed validation"] | caused by FilterChainValidationError.TlsContext: ["embedded message failed validation"] | caused by DownstreamTlsContextValidationError.CommonTlsContext: ["embedded message failed validation"] | caused by CommonTlsContextValidationError.TlsCertificateSdsSecretConfigs[i]: ["embedded message failed validation"] | caused by SdsSecretConfigValidationError.SdsConfig: ["embedded message failed validation"] | caused by ConfigSourceValidationError.ApiConfigSource: ["embedded message failed validation"] | caused by ApiConfigSourceValidationError.GrpcServices[i]: ["embedded message failed validation"] | caused by GrpcServiceValidationError.GoogleGrpc: ["embedded message failed validation"] | caused by GoogleGrpcValidationError.ChannelCredentials: ["embedded message failed validation"] | caused by field: "credential_specifier", reason: is required): name: "10.16.0.69_8000"
address {
  socket_address {
    address: "10.16.0.69"
    port_value: 8000
  }
}
filter_chains {
  tls_context {
    common_tls_context {
      validation_context {
        trusted_ca {
          filename: "/etc/istio/certs/ca-root-cert.pem"
        }
      }
      alpn_protocols: "h2"
      alpn_protocols: "http/1.1"
      tls_certificate_sds_secret_configs {
        name: "spiffe://cluster.local/ns/foo/sa/default"
        sds_config {
          api_config_source {
            api_type: GRPC
            grpc_services {
              google_grpc {
                target_uri: "unix:/var/run/sds/uds_path"
                channel_credentials {
                  3: ""
                }
                call_credentials {
                  google_compute_engine {
                  }
                }
                stat_prefix: "sdsstat"
              }
            }
          }
        }
      }
    }
    require_client_certificate {
      value: true
    }
  }
  filters {
    name: "envoy.http_connection_manager"
    config {
      fields {
        key: "access_log"
        value {
          list_value {
            values {
              struct_value {
                fields {
                  key: "config"
                  value {
                    struct_value {
                      fields {
                        key: "format"
                        value {
                          string_value: "[%START_TIME%] \"%REQ(:METHOD)% %REQ(X-ENVOY-ORIGINAL-PATH?:PATH)%%PROTOCOL%\" %RESPONSE_CODE% %RESPONSE_FLAGS% %BYTES_RECEIVED% %BYTES_SENT% %DURATION% %RESP(X-ENVOY-UPSTREAM-SERVICE-TIME)% \"%REQ(X-FORWARDED-FOR)%\" \"%REQ(USER-AGENT)%\" \"%REQ(X-REQUEST-ID)%\" \"%REQ(:AUTHORITY)%\" \"%UPSTREAM_HOST%\" %UPSTREAM_CLUSTER% %UPSTREAM_LOCAL_ADDRESS% %DOWNSTREAM_LOCAL_ADDRESS% %DOWNSTREAM_REMOTE_ADDRESS% %REQUESTED_SERVER_NAME%\n"
                        }
                      }
                      fields {
                        key: "path"
                        value {
                          string_value: "/dev/stdout"
                        }
                      }
                    }
                  }
                }
                fields {
                  key: "name"
                  value {
                    string_value: "envoy.file_access_log"
                  }
                }
              }
            }
          }
        }
      }
      fields {
        key: "forward_client_cert_details"
        value {
          string_value: "APPEND_FORWARD"
        }
      }
      fields {
        key: "generate_request_id"
        value {
          bool_value: true
        }
      }
      fields {
        key: "http_filters"
        value {
          list_value {
            values {
              struct_value {
                fields {
                  key: "config"
                  value {
                    struct_value {
                      fields {
                        key: "policy"
                        value {
                          struct_value {
                            fields {
                              key: "peers"
                              value {
                                list_value {
                                  values {
                                    struct_value {
                                      fields {
                                        key: "mtls"
                                        value {
                                          struct_value {
                                          }
                                        }
                                      }
                                    }
                                  }
                                }
                              }
                            }
                          }
                        }
                      }
                    }
                  }
                }
                fields {
                  key: "name"
                  value {
                    string_value: "istio_authn"
                  }
                }
              }
            }
            values {
              struct_value {
                fields {
                  key: "config"
                  value {
                    struct_value {
                      fields {
                        key: "default_destination_service"
                        value {
                          string_value: "default"
                        }
                      }
                      fields {
                        key: "mixer_attributes"
                        value {
                          struct_value {
                            fields {
                              key: "attributes"
                              value {
                                struct_value {
                                  fields {
                                    key: "context.reporter.kind"
                                    value {
                                      struct_value {
                                        fields {
                                          key: "string_value"
                                          value {
                                            string_value: "inbound"
                                          }
                                        }
                                      }
                                    }
                                  }
                                  fields {
                                    key: "context.reporter.uid"
                                    value {
                                      struct_value {
                                        fields {
                                          key: "string_value"
                                          value {
                                            string_value: "kubernetes://httpbin-6d6c88c4f5-q8h2t.foo"
                                          }
                                        }
                                      }
                                    }
                                  }
                                  fields {
                                    key: "destination.ip"
                                    value {
                                      struct_value {
                                        fields {
                                          key: "bytes_value"
                                          value {
                                            string_value: "AAAAAAAAAAAAAP//ChAARQ=="
                                          }
                                        }
                                      }
                                    }
                                  }
                                  fields {
                                    key: "destination.namespace"
                                    value {
                                      struct_value {
                                        fields {
                                          key: "string_value"
                                          value {
                                            string_value: "foo"
                                          }
                                        }
                                      }
                                    }
                                  }
                                  fields {
                                    key: "destination.port"
                                    value {
                                      struct_value {
                                        fields {
                                          key: "int64_value"
                                          value {
                                            string_value: "8000"
                                          }
                                        }
                                      }
                                    }
                                  }
                                  fields {
                                    key: "destination.uid"
                                    value {
                                      struct_value {
                                        fields {
                                          key: "string_value"
                                          value {
                                            string_value: "kubernetes://httpbin-6d6c88c4f5-q8h2t.foo"
                                          }
                                        }
                                      }
                                    }
                                  }
                                }
                              }
                            }
                          }
                        }
                      }
                      fields {
                        key: "service_configs"
                        value {
                          struct_value {
                            fields {
                              key: "default"
                              value {
                                struct_value {
                                }
                              }
                            }
                          }
                        }
                      }
                      fields {
                        key: "transport"
                        value {
                          struct_value {
                            fields {
                              key: "attributes_for_mixer_proxy"
                              value {
                                struct_value {
                                  fields {
                                    key: "attributes"
                                    value {
                                      struct_value {
                                        fields {
                                          key: "source.uid"
                                          value {
                                            struct_value {
                                              fields {
                                                key: "string_value"
                                                value {
                                                  string_value: "kubernetes://httpbin-6d6c88c4f5-q8h2t.foo"
                                                }
                                              }
                                            }
                                          }
                                        }
                                      }
                                    }
                                  }
                                }
                              }
                            }
                            fields {
                              key: "check_cluster"
                              value {
                                string_value: "outbound|9091||istio-policy.istio-system.svc.cluster.local"
                              }
                            }
                            fields {
                              key: "network_fail_policy"
                              value {
                                struct_value {
                                  fields {
                                    key: "policy"
                                    value {
                                      string_value: "FAIL_CLOSE"
                                    }
                                  }
                                }
                              }
                            }
                            fields {
                              key: "report_cluster"
                              value {
                                string_value: "outbound|9091||istio-telemetry.istio-system.svc.cluster.local"
                              }
                            }
                          }
                        }
                      }
                    }
                  }
                }
                fields {
                  key: "name"
                  value {
                    string_value: "mixer"
                  }
                }
              }
            }
            values {
              struct_value {
                fields {
                  key: "name"
                  value {
                    string_value: "envoy.cors"
                  }
                }
              }
            }
            values {
              struct_value {
                fields {
                  key: "name"
                  value {
                    string_value: "envoy.fault"
                  }
                }
              }
            }
            values {
              struct_value {
                fields {
                  key: "name"
                  value {
                    string_value: "envoy.router"
                  }
                }
              }
            }
          }
        }
      }
      fields {
        key: "route_config"
        value {
          struct_value {
            fields {
              key: "name"
              value {
                string_value: "inbound|8000||httpbin.foo.svc.cluster.local"
              }
            }
            fields {
              key: "validate_clusters"
              value {
                bool_value: false
              }
            }
            fields {
              key: "virtual_hosts"
              value {
                list_value {
                  values {
                    struct_value {
                      fields {
                        key: "domains"
                        value {
                          list_value {
                            values {
                              string_value: "*"
                            }
                          }
                        }
                      }
                      fields {
                        key: "name"
                        value {
                          string_value: "inbound|http|8000"
                        }
                      }
                      fields {
                        key: "routes"
                        value {
                          list_value {
                            values {
                              struct_value {
                                fields {
                                  key: "decorator"
                                  value {
                                    struct_value {
                                      fields {
                                        key: "operation"
                                        value {
                                          string_value: "httpbin.foo.svc.cluster.local:8000/*"
                                        }
                                      }
                                    }
                                  }
                                }
                                fields {
                                  key: "match"
                                  value {
                                    struct_value {
                                      fields {
                                        key: "prefix"
                                        value {
                                          string_value: "/"
                                        }
                                      }
                                    }
                                  }
                                }
                                fields {
                                  key: "per_filter_config"
                                  value {
                                    struct_value {
                                      fields {
                                        key: "mixer"
                                        value {
                                          struct_value {
                                            fields {
                                              key: "mixer_attributes"
                                              value {
                                                struct_value {
                                                  fields {
                                                    key: "attributes"
                                                    value {
                                                      struct_value {
                                                        fields {
                                                          key: "destination.service.host"
                                                          value {
                                                            struct_value {
                                                              fields {
                                                                key: "string_value"
                                                                value {
                                                                  string_value: "httpbin.foo.svc.cluster.local"
                                                                }
                                                              }
                                                            }
                                                          }
                                                        }
                                                        fields {
                                                          key: "destination.service.name"
                                                          value {
                                                            struct_value {
                                                              fields {
                                                                key: "string_value"
                                                                value {
                                                                  string_value: "httpbin"
                                                                }
                                                              }
                                                            }
                                                          }
                                                        }
                                                        fields {
                                                          key: "destination.service.namespace"
                                                          value {
                                                            struct_value {
                                                              fields {
                                                                key: "string_value"
                                                                value {
                                                                  string_value: "foo"
                                                                }
                                                              }
                                                            }
                                                          }
                                                        }
                                                        fields {
                                                          key: "destination.service.uid"
                                                          value {
                                                            struct_value {
                                                              fields {
                                                                key: "string_value"
                                                                value {
                                                                  string_value: "istio://foo/services/httpbin"
                                                                }
                                                              }
                                                            }
                                                          }
                                                        }
                                                      }
                                                    }
                                                  }
                                                }
                                              }
                                            }
                                          }
                                        }
                                      }
                                    }
                                  }
                                }
                                fields {
                                  key: "route"
                                  value {
                                    struct_value {
                                      fields {
                                        key: "cluster"
                                        value {
                                          string_value: "inbound|8000||httpbin.foo.svc.cluster.local"
                                        }
                                      }
                                      fields {
                                        key: "max_grpc_timeout"
                                        value {
                                          string_value: "0s"
                                        }
                                      }
                                      fields {
                                        key: "timeout"
                                        value {
                                          string_value: "0s"
                                        }
                                      }
                                    }
                                  }
                                }
                              }
                            }
                          }
                        }
                      }
                    }
                  }
                }
              }
            }
          }
        }
      }
      fields {
        key: "stat_prefix"
        value {
          string_value: "10.16.0.69_8000"
        }
      }
      fields {
        key: "stream_idle_timeout"
        value {
          string_value: "0s"
        }
      }
      fields {
        key: "tracing"
        value {
          struct_value {
            fields {
              key: "client_sampling"
              value {
                struct_value {
                  fields {
                    key: "value"
                    value {
                      number_value: 100
                    }
                  }
                }
              }
            }
            fields {
              key: "overall_sampling"
              value {
                struct_value {
                  fields {
                    key: "value"
                    value {
                      number_value: 100
                    }
                  }
                }
              }
            }
            fields {
              key: "random_sampling"
              value {
                struct_value {
                  fields {
                    key: "value"
                    value {
                      number_value: 100
                    }
                  }
                }
              }
            }
          }
        }
      }
      fields {
        key: "upgrade_configs"
        value {
          list_value {
            values {
              struct_value {
                fields {
                  key: "upgrade_type"
                  value {
                    string_value: "websocket"
                  }
                }
              }
            }
          }
        }
      }
      fields {
        key: "use_remote_address"
        value {
          bool_value: false
        }
      }
    }
  }
}
deprecated_v1 {
  bind_to_port {
  }
}
listener_filters {
  name: "envoy.listener.tls_inspector"
}

2018-09-28T22:25:28.749280Z	info	Envoy proxy is NOT ready: 3 errors occurred:

* failed checking application ports. listeners="0.0.0.0:15090"
* envoy missing listener for inbound application port: 0
* envoy missing listener for inbound application port: 8000
[2018-09-28 22:25:29.001][11][warning][upstream] external/envoy/source/common/config/grpc_mux_impl.cc:231] gRPC config for type.googleapis.com/envoy.api.v2.Cluster update rejected: Proto constraint validation failed (ClusterValidationError.TlsContext: ["embedded message failed validation"] | caused by UpstreamTlsContextValidationError.CommonTlsContext: ["embedded message failed validation"] | caused by CommonTlsContextValidationError.TlsCertificateSdsSecretConfigs[i]: ["embedded message failed validation"] | caused by SdsSecretConfigValidationError.SdsConfig: ["embedded message failed validation"] | caused by ConfigSourceValidationError.ApiConfigSource: ["embedded message failed validation"] | caused by ApiConfigSourceValidationError.GrpcServices[i]: ["embedded message failed validation"] | caused by GrpcServiceValidationError.GoogleGrpc: ["embedded message failed validation"] | caused by GoogleGrpcValidationError.ChannelCredentials: ["embedded message failed validation"] | caused by field: "credential_specifier", reason: is required): name: "outbound|53||kube-dns.kube-system.svc.cluster.local"
type: EDS
eds_cluster_config {
  eds_config {
    ads {
    }
  }
  service_name: "outbound|53||kube-dns.kube-system.svc.cluster.local"
}
connect_timeout {
  seconds: 1
}
circuit_breakers {
  thresholds {
  }
}
tls_context {
  common_tls_context {
    validation_context {
      trusted_ca {
        filename: "/etc/istio/certs/ca-root-cert.pem"
      }
      verify_subject_alt_name: "spiffe://cluster.local/ns/kube-system/sa/kube-dns"
    }
    alpn_protocols: "istio"
    tls_certificate_sds_secret_configs {
      name: "spiffe://cluster.local/ns/kube-system/sa/kube-dns"
      sds_config {
        api_config_source {
          api_type: GRPC
          grpc_services {
            google_grpc {
              target_uri: "unix:/var/run/sds/uds_path"
              channel_credentials {
                3: ""
              }
              call_credentials {
                google_compute_engine {
                }
              }
              stat_prefix: "sdsstat"
            }
          }
        }
      }
    }
  }
  sni: "outbound|53||kube-dns.kube-system.svc.cluster.local"
}

[2018-09-28 22:25:29.001][11][warning][config] bazel-out/k8-opt/bin/external/envoy/source/common/config/_virtual_includes/grpc_mux_subscription_lib/common/config/grpc_mux_subscription_impl.h:70] gRPC config for type.googleapis.com/envoy.api.v2.Cluster rejected: Proto constraint validation failed (ClusterValidationError.TlsContext: ["embedded message failed validation"] | caused by UpstreamTlsContextValidationError.CommonTlsContext: ["embedded message failed validation"] | caused by CommonTlsContextValidationError.TlsCertificateSdsSecretConfigs[i]: ["embedded message failed validation"] | caused by SdsSecretConfigValidationError.SdsConfig: ["embedded message failed validation"] | caused by ConfigSourceValidationError.ApiConfigSource: ["embedded message failed validation"] | caused by ApiConfigSourceValidationError.GrpcServices[i]: ["embedded message failed validation"] | caused by GrpcServiceValidationError.GoogleGrpc: ["embedded message failed validation"] | caused by GoogleGrpcValidationError.ChannelCredentials: ["embedded message failed validation"] | caused by field: "credential_specifier", reason: is required): name: "outbound|53||kube-dns.kube-system.svc.cluster.local"
type: EDS
eds_cluster_config {
  eds_config {
    ads {
    }
  }
  service_name: "outbound|53||kube-dns.kube-system.svc.cluster.local"
}
connect_timeout {
  seconds: 1
}
circuit_breakers {
  thresholds {
  }
}
tls_context {
  common_tls_context {
    validation_context {
      trusted_ca {
        filename: "/etc/istio/certs/ca-root-cert.pem"
      }
      verify_subject_alt_name: "spiffe://cluster.local/ns/kube-system/sa/kube-dns"
    }
    alpn_protocols: "istio"
    tls_certificate_sds_secret_configs {
      name: "spiffe://cluster.local/ns/kube-system/sa/kube-dns"
      sds_config {
        api_config_source {
          api_type: GRPC
          grpc_services {
            google_grpc {
              target_uri: "unix:/var/run/sds/uds_path"
              channel_credentials {
                3: ""
              }
              call_credentials {
                google_compute_engine {
                }
              }
              stat_prefix: "sdsstat"
            }
          }
        }
      }
    }
  }
  sni: "outbound|53||kube-dns.kube-system.svc.cluster.local"
}

[2018-09-28 22:25:29.074][11][warning][upstream] external/envoy/source/common/config/grpc_mux_impl.cc:231] gRPC config for type.googleapis.com/envoy.api.v2.Listener update rejected: Proto constraint validation failed (ListenerValidationError.FilterChains[i]: ["embedded message failed validation"] | caused by FilterChainValidationError.TlsContext: ["embedded message failed validation"] | caused by DownstreamTlsContextValidationError.CommonTlsContext: ["embedded message failed validation"] | caused by CommonTlsContextValidationError.TlsCertificateSdsSecretConfigs[i]: ["embedded message failed validation"] | caused by SdsSecretConfigValidationError.SdsConfig: ["embedded message failed validation"] | caused by ConfigSourceValidationError.ApiConfigSource: ["embedded message failed validation"] | caused by ApiConfigSourceValidationError.GrpcServices[i]: ["embedded message failed validation"] | caused by GrpcServiceValidationError.GoogleGrpc: ["embedded message failed validation"] | caused by GoogleGrpcValidationError.ChannelCredentials: ["embedded message failed validation"] | caused by field: "credential_specifier", reason: is required): name: "10.16.0.69_8000"
address {
  socket_address {
    address: "10.16.0.69"
    port_value: 8000
  }
}
filter_chains {
  tls_context {
    common_tls_context {
      validation_context {
        trusted_ca {
          filename: "/etc/istio/certs/ca-root-cert.pem"
        }
      }
      alpn_protocols: "h2"
      alpn_protocols: "http/1.1"
      tls_certificate_sds_secret_configs {
        name: "spiffe://cluster.local/ns/foo/sa/default"
        sds_config {
          api_config_source {
            api_type: GRPC
            grpc_services {
              google_grpc {
                target_uri: "unix:/var/run/sds/uds_path"
                channel_credentials {
                  3: ""
                }
                call_credentials {
                  google_compute_engine {
                  }
                }
                stat_prefix: "sdsstat"
              }
            }
          }
        }
      }
    }
    require_client_certificate {
      value: true
    }
  }
  filters {
    name: "envoy.http_connection_manager"
    config {
      fields {
        key: "access_log"
        value {
          list_value {
            values {
              struct_value {
                fields {
                  key: "config"
                  value {
                    struct_value {
                      fields {
                        key: "format"
                        value {
                          string_value: "[%START_TIME%] \"%REQ(:METHOD)% %REQ(X-ENVOY-ORIGINAL-PATH?:PATH)%%PROTOCOL%\" %RESPONSE_CODE% %RESPONSE_FLAGS% %BYTES_RECEIVED% %BYTES_SENT% %DURATION% %RESP(X-ENVOY-UPSTREAM-SERVICE-TIME)% \"%REQ(X-FORWARDED-FOR)%\" \"%REQ(USER-AGENT)%\" \"%REQ(X-REQUEST-ID)%\" \"%REQ(:AUTHORITY)%\" \"%UPSTREAM_HOST%\" %UPSTREAM_CLUSTER% %UPSTREAM_LOCAL_ADDRESS% %DOWNSTREAM_LOCAL_ADDRESS% %DOWNSTREAM_REMOTE_ADDRESS% %REQUESTED_SERVER_NAME%\n"
                        }
                      }
                      fields {
                        key: "path"
                        value {
                          string_value: "/dev/stdout"
                        }
                      }
                    }
                  }
                }
                fields {
                  key: "name"
                  value {
                    string_value: "envoy.file_access_log"
                  }
                }
              }
            }
          }
        }
      }
      fields {
        key: "forward_client_cert_details"
        value {
          string_value: "APPEND_FORWARD"
        }
      }
      fields {
        key: "generate_request_id"
        value {
          bool_value: true
        }
      }
      fields {
        key: "http_filters"
        value {
          list_value {
            values {
              struct_value {
                fields {
                  key: "config"
                  value {
                    struct_value {
                      fields {
                        key: "policy"
                        value {
                          struct_value {
                            fields {
                              key: "peers"
                              value {
                                list_value {
                                  values {
                                    struct_value {
                                      fields {
                                        key: "mtls"
                                        value {
                                          struct_value {
                                          }
                                        }
                                      }
                                    }
                                  }
                                }
                              }
                            }
                          }
                        }
                      }
                    }
                  }
                }
                fields {
                  key: "name"
                  value {
                    string_value: "istio_authn"
                  }
                }
              }
            }
            values {
              struct_value {
                fields {
                  key: "config"
                  value {
                    struct_value {
                      fields {
                        key: "default_destination_service"
                        value {
                          string_value: "default"
                        }
                      }
                      fields {
                        key: "mixer_attributes"
                        value {
                          struct_value {
                            fields {
                              key: "attributes"
                              value {
                                struct_value {
                                  fields {
                                    key: "context.reporter.kind"
                                    value {
                                      struct_value {
                                        fields {
                                          key: "string_value"
                                          value {
                                            string_value: "inbound"
                                          }
                                        }
                                      }
                                    }
                                  }
                                  fields {
                                    key: "context.reporter.uid"
                                    value {
                                      struct_value {
                                        fields {
                                          key: "string_value"
                                          value {
                                            string_value: "kubernetes://httpbin-6d6c88c4f5-q8h2t.foo"
                                          }
                                        }
                                      }
                                    }
                                  }
                                  fields {
                                    key: "destination.ip"
                                    value {
                                      struct_value {
                                        fields {
                                          key: "bytes_value"
                                          value {
                                            string_value: "AAAAAAAAAAAAAP//ChAARQ=="
                                          }
                                        }
                                      }
                                    }
                                  }
                                  fields {
                                    key: "destination.namespace"
                                    value {
                                      struct_value {
                                        fields {
                                          key: "string_value"
                                          value {
                                            string_value: "foo"
                                          }
                                        }
                                      }
                                    }
                                  }
                                  fields {
                                    key: "destination.port"
                                    value {
                                      struct_value {
                                        fields {
                                          key: "int64_value"
                                          value {
                                            string_value: "8000"
                                          }
                                        }
                                      }
                                    }
                                  }
                                  fields {
                                    key: "destination.uid"
                                    value {
                                      struct_value {
                                        fields {
                                          key: "string_value"
                                          value {
                                            string_value: "kubernetes://httpbin-6d6c88c4f5-q8h2t.foo"
                                          }
                                        }
                                      }
                                    }
                                  }
                                }
                              }
                            }
                          }
                        }
                      }
                      fields {
                        key: "service_configs"
                        value {
                          struct_value {
                            fields {
                              key: "default"
                              value {
                                struct_value {
                                }
                              }
                            }
                          }
                        }
                      }
                      fields {
                        key: "transport"
                        value {
                          struct_value {
                            fields {
                              key: "attributes_for_mixer_proxy"
                              value {
                                struct_value {
                                  fields {
                                    key: "attributes"
                                    value {
                                      struct_value {
                                        fields {
                                          key: "source.uid"
                                          value {
                                            struct_value {
                                              fields {
                                                key: "string_value"
                                                value {
                                                  string_value: "kubernetes://httpbin-6d6c88c4f5-q8h2t.foo"
                                                }
                                              }
                                            }
                                          }
                                        }
                                      }
                                    }
                                  }
                                }
                              }
                            }
                            fields {
                              key: "check_cluster"
                              value {
                                string_value: "outbound|9091||istio-policy.istio-system.svc.cluster.local"
                              }
                            }
                            fields {
                              key: "network_fail_policy"
                              value {
                                struct_value {
                                  fields {
                                    key: "policy"
                                    value {
                                      string_value: "FAIL_CLOSE"
                                    }
                                  }
                                }
                              }
                            }
                            fields {
                              key: "report_cluster"
                              value {
                                string_value: "outbound|9091||istio-telemetry.istio-system.svc.cluster.local"
                              }
                            }
                          }
                        }
                      }
                    }
                  }
                }
                fields {
                  key: "name"
                  value {
                    string_value: "mixer"
                  }
                }
              }
            }
            values {
              struct_value {
                fields {
                  key: "name"
                  value {
                    string_value: "envoy.cors"
                  }
                }
              }
            }
            values {
              struct_value {
                fields {
                  key: "name"
                  value {
                    string_value: "envoy.fault"
                  }
                }
              }
            }
            values {
              struct_value {
                fields {
                  key: "name"
                  value {
                    string_value: "envoy.router"
                  }
                }
              }
            }
          }
        }
      }
      fields {
        key: "route_config"
        value {
          struct_value {
            fields {
              key: "name"
              value {
                string_value: "inbound|8000||httpbin.foo.svc.cluster.local"
              }
            }
            fields {
              key: "validate_clusters"
              value {
                bool_value: false
              }
            }
            fields {
              key: "virtual_hosts"
              value {
                list_value {
                  values {
                    struct_value {
                      fields {
                        key: "domains"
                        value {
                          list_value {
                            values {
                              string_value: "*"
                            }
                          }
                        }
                      }
                      fields {
                        key: "name"
                        value {
                          string_value: "inbound|http|8000"
                        }
                      }
                      fields {
                        key: "routes"
                        value {
                          list_value {
                            values {
                              struct_value {
                                fields {
                                  key: "decorator"
                                  value {
                                    struct_value {
                                      fields {
                                        key: "operation"
                                        value {
                                          string_value: "httpbin.foo.svc.cluster.local:8000/*"
                                        }
                                      }
                                    }
                                  }
                                }
                                fields {
                                  key: "match"
                                  value {
                                    struct_value {
                                      fields {
                                        key: "prefix"
                                        value {
                                          string_value: "/"
                                        }
                                      }
                                    }
                                  }
                                }
                                fields {
                                  key: "per_filter_config"
                                  value {
                                    struct_value {
                                      fields {
                                        key: "mixer"
                                        value {
                                          struct_value {
                                            fields {
                                              key: "mixer_attributes"
                                              value {
                                                struct_value {
                                                  fields {
                                                    key: "attributes"
                                                    value {
                                                      struct_value {
                                                        fields {
                                                          key: "destination.service.host"
                                                          value {
                                                            struct_value {
                                                              fields {
                                                                key: "string_value"
                                                                value {
                                                                  string_value: "httpbin.foo.svc.cluster.local"
                                                                }
                                                              }
                                                            }
                                                          }
                                                        }
                                                        fields {
                                                          key: "destination.service.name"
                                                          value {
                                                            struct_value {
                                                              fields {
                                                                key: "string_value"
                                                                value {
                                                                  string_value: "httpbin"
                                                                }
                                                              }
                                                            }
                                                          }
                                                        }
                                                        fields {
                                                          key: "destination.service.namespace"
                                                          value {
                                                            struct_value {
                                                              fields {
                                                                key: "string_value"
                                                                value {
                                                                  string_value: "foo"
                                                                }
                                                              }
                                                            }
                                                          }
                                                        }
                                                        fields {
                                                          key: "destination.service.uid"
                                                          value {
                                                            struct_value {
                                                              fields {
                                                                key: "string_value"
                                                                value {
                                                                  string_value: "istio://foo/services/httpbin"
                                                                }
                                                              }
                                                            }
                                                          }
                                                        }
                                                      }
                                                    }
                                                  }
                                                }
                                              }
                                            }
                                          }
                                        }
                                      }
                                    }
                                  }
                                }
                                fields {
                                  key: "route"
                                  value {
                                    struct_value {
                                      fields {
                                        key: "cluster"
                                        value {
                                          string_value: "inbound|8000||httpbin.foo.svc.cluster.local"
                                        }
                                      }
                                      fields {
                                        key: "max_grpc_timeout"
                                        value {
                                          string_value: "0s"
                                        }
                                      }
                                      fields {
                                        key: "timeout"
                                        value {
                                          string_value: "0s"
                                        }
                                      }
                                    }
                                  }
                                }
                              }
                            }
                          }
                        }
                      }
                    }
                  }
                }
              }
            }
          }
        }
      }
      fields {
        key: "stat_prefix"
        value {
          string_value: "10.16.0.69_8000"
        }
      }
      fields {
        key: "stream_idle_timeout"
        value {
          string_value: "0s"
        }
      }
      fields {
        key: "tracing"
        value {
          struct_value {
            fields {
              key: "client_sampling"
              value {
                struct_value {
                  fields {
                    key: "value"
                    value {
                      number_value: 100
                    }
                  }
                }
              }
            }
            fields {
              key: "overall_sampling"
              value {
                struct_value {
                  fields {
                    key: "value"
                    value {
                      number_value: 100
                    }
                  }
                }
              }
            }
            fields {
              key: "random_sampling"
              value {
                struct_value {
                  fields {
                    key: "value"
                    value {
                      number_value: 100
                    }
                  }
                }
              }
            }
          }
        }
      }
      fields {
        key: "upgrade_configs"
        value {
          list_value {
            values {
              struct_value {
                fields {
                  key: "upgrade_type"
                  value {
                    string_value: "websocket"
                  }
                }
              }
            }
          }
        }
      }
      fields {
        key: "use_remote_address"
        value {
          bool_value: false
        }
      }
    }
  }
}
deprecated_v1 {
  bind_to_port {
  }
}
listener_filters {
  name: "envoy.listener.tls_inspector"
}

[2018-09-28 22:25:29.077][11][warning][config] bazel-out/k8-opt/bin/external/envoy/source/common/config/_virtual_includes/grpc_mux_subscription_lib/common/config/grpc_mux_subscription_impl.h:70] gRPC config for type.googleapis.com/envoy.api.v2.Listener rejected: Proto constraint validation failed (ListenerValidationError.FilterChains[i]: ["embedded message failed validation"] | caused by FilterChainValidationError.TlsContext: ["embedded message failed validation"] | caused by DownstreamTlsContextValidationError.CommonTlsContext: ["embedded message failed validation"] | caused by CommonTlsContextValidationError.TlsCertificateSdsSecretConfigs[i]: ["embedded message failed validation"] | caused by SdsSecretConfigValidationError.SdsConfig: ["embedded message failed validation"] | caused by ConfigSourceValidationError.ApiConfigSource: ["embedded message failed validation"] | caused by ApiConfigSourceValidationError.GrpcServices[i]: ["embedded message failed validation"] | caused by GrpcServiceValidationError.GoogleGrpc: ["embedded message failed validation"] | caused by GoogleGrpcValidationError.ChannelCredentials: ["embedded message failed validation"] | caused by field: "credential_specifier", reason: is required): name: "10.16.0.69_8000"
address {
  socket_address {
    address: "10.16.0.69"
    port_value: 8000
  }
}
filter_chains {
  tls_context {
    common_tls_context {
      validation_context {
        trusted_ca {
          filename: "/etc/istio/certs/ca-root-cert.pem"
        }
      }
      alpn_protocols: "h2"
      alpn_protocols: "http/1.1"
      tls_certificate_sds_secret_configs {
        name: "spiffe://cluster.local/ns/foo/sa/default"
        sds_config {
          api_config_source {
            api_type: GRPC
            grpc_services {
              google_grpc {
                target_uri: "unix:/var/run/sds/uds_path"
                channel_credentials {
                  3: ""
                }
                call_credentials {
                  google_compute_engine {
                  }
                }
                stat_prefix: "sdsstat"
              }
            }
          }
        }
      }
    }
    require_client_certificate {
      value: true
    }
  }
  filters {
    name: "envoy.http_connection_manager"
    config {
      fields {
        key: "access_log"
        value {
          list_value {
            values {
              struct_value {
                fields {
                  key: "config"
                  value {
                    struct_value {
                      fields {
                        key: "format"
                        value {
                          string_value: "[%START_TIME%] \"%REQ(:METHOD)% %REQ(X-ENVOY-ORIGINAL-PATH?:PATH)%%PROTOCOL%\" %RESPONSE_CODE% %RESPONSE_FLAGS% %BYTES_RECEIVED% %BYTES_SENT% %DURATION% %RESP(X-ENVOY-UPSTREAM-SERVICE-TIME)% \"%REQ(X-FORWARDED-FOR)%\" \"%REQ(USER-AGENT)%\" \"%REQ(X-REQUEST-ID)%\" \"%REQ(:AUTHORITY)%\" \"%UPSTREAM_HOST%\" %UPSTREAM_CLUSTER% %UPSTREAM_LOCAL_ADDRESS% %DOWNSTREAM_LOCAL_ADDRESS% %DOWNSTREAM_REMOTE_ADDRESS% %REQUESTED_SERVER_NAME%\n"
                        }
                      }
                      fields {
                        key: "path"
                        value {
                          string_value: "/dev/stdout"
                        }
                      }
                    }
                  }
                }
                fields {
                  key: "name"
                  value {
                    string_value: "envoy.file_access_log"
                  }
                }
              }
            }
          }
        }
      }
      fields {
        key: "forward_client_cert_details"
        value {
          string_value: "APPEND_FORWARD"
        }
      }
      fields {
        key: "generate_request_id"
        value {
          bool_value: true
        }
      }
      fields {
        key: "http_filters"
        value {
          list_value {
            values {
              struct_value {
                fields {
                  key: "config"
                  value {
                    struct_value {
                      fields {
                        key: "policy"
                        value {
                          struct_value {
                            fields {
                              key: "peers"
                              value {
                                list_value {
                                  values {
                                    struct_value {
                                      fields {
                                        key: "mtls"
                                        value {
                                          struct_value {
                                          }
                                        }
                                      }
                                    }
                                  }
                                }
                              }
                            }
                          }
                        }
                      }
                    }
                  }
                }
                fields {
                  key: "name"
                  value {
                    string_value: "istio_authn"
                  }
                }
              }
            }
            values {
              struct_value {
                fields {
                  key: "config"
                  value {
                    struct_value {
                      fields {
                        key: "default_destination_service"
                        value {
                          string_value: "default"
                        }
                      }
                      fields {
                        key: "mixer_attributes"
                        value {
                          struct_value {
                            fields {
                              key: "attributes"
                              value {
                                struct_value {
                                  fields {
                                    key: "context.reporter.kind"
                                    value {
                                      struct_value {
                                        fields {
                                          key: "string_value"
                                          value {
                                            string_value: "inbound"
                                          }
                                        }
                                      }
                                    }
                                  }
                                  fields {
                                    key: "context.reporter.uid"
                                    value {
                                      struct_value {
                                        fields {
                                          key: "string_value"
                                          value {
                                            string_value: "kubernetes://httpbin-6d6c88c4f5-q8h2t.foo"
                                          }
                                        }
                                      }
                                    }
                                  }
                                  fields {
                                    key: "destination.ip"
                                    value {
                                      struct_value {
                                        fields {
                                          key: "bytes_value"
                                          value {
                                            string_value: "AAAAAAAAAAAAAP//ChAARQ=="
                                          }
                                        }
                                      }
                                    }
                                  }
                                  fields {
                                    key: "destination.namespace"
                                    value {
                                      struct_value {
                                        fields {
                                          key: "string_value"
                                          value {
                                            string_value: "foo"
                                          }
                                        }
                                      }
                                    }
                                  }
                                  fields {
                                    key: "destination.port"
                                    value {
                                      struct_value {
                                        fields {
                                          key: "int64_value"
                                          value {
                                            string_value: "8000"
                                          }
                                        }
                                      }
                                    }
                                  }
                                  fields {
                                    key: "destination.uid"
                                    value {
                                      struct_value {
                                        fields {
                                          key: "string_value"
                                          value {
                                            string_value: "kubernetes://httpbin-6d6c88c4f5-q8h2t.foo"
                                          }
                                        }
                                      }
                                    }
                                  }
                                }
                              }
                            }
                          }
                        }
                      }
                      fields {
                        key: "service_configs"
                        value {
                          struct_value {
                            fields {
                              key: "default"
                              value {
                                struct_value {
                                }
                              }
                            }
                          }
                        }
                      }
                      fields {
                        key: "transport"
                        value {
                          struct_value {
                            fields {
                              key: "attributes_for_mixer_proxy"
                              value {
                                struct_value {
                                  fields {
                                    key: "attributes"
                                    value {
                                      struct_value {
                                        fields {
                                          key: "source.uid"
                                          value {
                                            struct_value {
                                              fields {
                                                key: "string_value"
                                                value {
                                                  string_value: "kubernetes://httpbin-6d6c88c4f5-q8h2t.foo"
                                                }
                                              }
                                            }
                                          }
                                        }
                                      }
                                    }
                                  }
                                }
                              }
                            }
                            fields {
                              key: "check_cluster"
                              value {
                                string_value: "outbound|9091||istio-policy.istio-system.svc.cluster.local"
                              }
                            }
                            fields {
                              key: "network_fail_policy"
                              value {
                                struct_value {
                                  fields {
                                    key: "policy"
                                    value {
                                      string_value: "FAIL_CLOSE"
                                    }
                                  }
                                }
                              }
                            }
                            fields {
                              key: "report_cluster"
                              value {
                                string_value: "outbound|9091||istio-telemetry.istio-system.svc.cluster.local"
                              }
                            }
                          }
                        }
                      }
                    }
                  }
                }
                fields {
                  key: "name"
                  value {
                    string_value: "mixer"
                  }
                }
              }
            }
            values {
              struct_value {
                fields {
                  key: "name"
                  value {
                    string_value: "envoy.cors"
                  }
                }
              }
            }
            values {
              struct_value {
                fields {
                  key: "name"
                  value {
                    string_value: "envoy.fault"
                  }
                }
              }
            }
            values {
              struct_value {
                fields {
                  key: "name"
                  value {
                    string_value: "envoy.router"
                  }
                }
              }
            }
          }
        }
      }
      fields {
        key: "route_config"
        value {
          struct_value {
            fields {
              key: "name"
              value {
                string_value: "inbound|8000||httpbin.foo.svc.cluster.local"
              }
            }
            fields {
              key: "validate_clusters"
              value {
                bool_value: false
              }
            }
            fields {
              key: "virtual_hosts"
              value {
                list_value {
                  values {
                    struct_value {
                      fields {
                        key: "domains"
                        value {
                          list_value {
                            values {
                              string_value: "*"
                            }
                          }
                        }
                      }
                      fields {
                        key: "name"
                        value {
                          string_value: "inbound|http|8000"
                        }
                      }
                      fields {
                        key: "routes"
                        value {
                          list_value {
                            values {
                              struct_value {
                                fields {
                                  key: "decorator"
                                  value {
                                    struct_value {
                                      fields {
                                        key: "operation"
                                        value {
                                          string_value: "httpbin.foo.svc.cluster.local:8000/*"
                                        }
                                      }
                                    }
                                  }
                                }
                                fields {
                                  key: "match"
                                  value {
                                    struct_value {
                                      fields {
                                        key: "prefix"
                                        value {
                                          string_value: "/"
                                        }
                                      }
                                    }
                                  }
                                }
                                fields {
                                  key: "per_filter_config"
                                  value {
                                    struct_value {
                                      fields {
                                        key: "mixer"
                                        value {
                                          struct_value {
                                            fields {
                                              key: "mixer_attributes"
                                              value {
                                                struct_value {
                                                  fields {
                                                    key: "attributes"
                                                    value {
                                                      struct_value {
                                                        fields {
                                                          key: "destination.service.host"
                                                          value {
                                                            struct_value {
                                                              fields {
                                                                key: "string_value"
                                                                value {
                                                                  string_value: "httpbin.foo.svc.cluster.local"
                                                                }
                                                              }
                                                            }
                                                          }
                                                        }
                                                        fields {
                                                          key: "destination.service.name"
                                                          value {
                                                            struct_value {
                                                              fields {
                                                                key: "string_value"
                                                                value {
                                                                  string_value: "httpbin"
                                                                }
                                                              }
                                                            }
                                                          }
                                                        }
                                                        fields {
                                                          key: "destination.service.namespace"
                                                          value {
                                                            struct_value {
                                                              fields {
                                                                key: "string_value"
                                                                value {
                                                                  string_value: "foo"
                                                                }
                                                              }
                                                            }
                                                          }
                                                        }
                                                        fields {
                                                          key: "destination.service.uid"
                                                          value {
                                                            struct_value {
                                                              fields {
                                                                key: "string_value"
                                                                value {
                                                                  string_value: "istio://foo/services/httpbin"
                                                                }
                                                              }
                                                            }
                                                          }
                                                        }
                                                      }
                                                    }
                                                  }
                                                }
                                              }
                                            }
                                          }
                                        }
                                      }
                                    }
                                  }
                                }
                                fields {
                                  key: "route"
                                  value {
                                    struct_value {
                                      fields {
                                        key: "cluster"
                                        value {
                                          string_value: "inbound|8000||httpbin.foo.svc.cluster.local"
                                        }
                                      }
                                      fields {
                                        key: "max_grpc_timeout"
                                        value {
                                          string_value: "0s"
                                        }
                                      }
                                      fields {
                                        key: "timeout"
                                        value {
                                          string_value: "0s"
                                        }
                                      }
                                    }
                                  }
                                }
                              }
                            }
                          }
                        }
                      }
                    }
                  }
                }
              }
            }
          }
        }
      }
      fields {
        key: "stat_prefix"
        value {
          string_value: "10.16.0.69_8000"
        }
      }
      fields {
        key: "stream_idle_timeout"
        value {
          string_value: "0s"
        }
      }
      fields {
        key: "tracing"
        value {
          struct_value {
            fields {
              key: "client_sampling"
              value {
                struct_value {
                  fields {
                    key: "value"
                    value {
                      number_value: 100
                    }
                  }
                }
              }
            }
            fields {
              key: "overall_sampling"
              value {
                struct_value {
                  fields {
                    key: "value"
                    value {
                      number_value: 100
                    }
                  }
                }
              }
            }
            fields {
              key: "random_sampling"
              value {
                struct_value {
                  fields {
                    key: "value"
                    value {
                      number_value: 100
                    }
                  }
                }
              }
            }
          }
        }
      }
      fields {
        key: "upgrade_configs"
        value {
          list_value {
            values {
              struct_value {
                fields {
                  key: "upgrade_type"
                  value {
                    string_value: "websocket"
                  }
                }
              }
            }
          }
        }
      }
      fields {
        key: "use_remote_address"
        value {
          bool_value: false
        }
      }
    }
  }
}
deprecated_v1 {
  bind_to_port {
  }
}
listener_filters {
  name: "envoy.listener.tls_inspector"
}

2018-09-28T22:25:30.741348Z	info	Envoy proxy is NOT ready: 3 errors occurred:

* failed checking application ports. listeners="0.0.0.0:15090"
* envoy missing listener for inbound application port: 0
* envoy missing listener for inbound application port: 8000
[2018-09-28T22:25:22.741Z] "GET /listeners HTTP/1.1" 200 - 0 17 0 - "10.16.0.69" "Go-http-client/1.1" "-" "127.0.0.1:15000" "-"
[2018-09-28T22:25:24.741Z] "GET /listeners HTTP/1.1" 200 - 0 17 1 - "10.16.0.69" "Go-http-client/1.1" "-" "127.0.0.1:15000" "-"
[2018-09-28T22:25:26.741Z] "GET /listeners HTTP/1.1" 200 - 0 17 0 - "10.16.0.69" "Go-http-client/1.1" "-" "127.0.0.1:15000" "-"
[2018-09-28T22:25:28.746Z] "GET /listeners HTTP/1.1" 200 - 0 17 10 - "10.16.0.69" "Go-http-client/1.1" "-" "127.0.0.1:15000" "-"
[2018-09-28T22:25:30.741Z] "GET /listeners HTTP/1.1" 200 - 0 17 1 - "10.16.0.69" "Go-http-client/1.1" "-" "127.0.0.1:15000" "-"
[2018-09-28 22:25:30.933][11][warning][upstream] external/envoy/source/common/config/grpc_mux_impl.cc:231] gRPC config for type.googleapis.com/envoy.api.v2.Cluster update rejected: Proto constraint validation failed (ClusterValidationError.TlsContext: ["embedded message failed validation"] | caused by UpstreamTlsContextValidationError.CommonTlsContext: ["embedded message failed validation"] | caused by CommonTlsContextValidationError.TlsCertificateSdsSecretConfigs[i]: ["embedded message failed validation"] | caused by SdsSecretConfigValidationError.SdsConfig: ["embedded message failed validation"] | caused by ConfigSourceValidationError.ApiConfigSource: ["embedded message failed validation"] | caused by ApiConfigSourceValidationError.GrpcServices[i]: ["embedded message failed validation"] | caused by GrpcServiceValidationError.GoogleGrpc: ["embedded message failed validation"] | caused by GoogleGrpcValidationError.ChannelCredentials: ["embedded message failed validation"] | caused by field: "credential_specifier", reason: is required): name: "outbound|80||default-http-backend.kube-system.svc.cluster.local"
type: EDS
eds_cluster_config {
  eds_config {
    ads {
    }
  }
  service_name: "outbound|80||default-http-backend.kube-system.svc.cluster.local"
}
connect_timeout {
  seconds: 1
}
circuit_breakers {
  thresholds {
  }
}
tls_context {
  common_tls_context {
    validation_context {
      trusted_ca {
        filename: "/etc/istio/certs/ca-root-cert.pem"
      }
      verify_subject_alt_name: "spiffe://cluster.local/ns/kube-system/sa/default"
    }
    alpn_protocols: "istio"
    tls_certificate_sds_secret_configs {
      name: "spiffe://cluster.local/ns/kube-system/sa/default"
      sds_config {
        api_config_source {
          api_type: GRPC
          grpc_services {
            google_grpc {
              target_uri: "unix:/var/run/sds/uds_path"
              channel_credentials {
                3: ""
              }
              call_credentials {
                google_compute_engine {
                }
              }
              stat_prefix: "sdsstat"
            }
          }
        }
      }
    }
  }
  sni: "outbound|80||default-http-backend.kube-system.svc.cluster.local"
}

[2018-09-28 22:25:30.934][11][warning][config] bazel-out/k8-opt/bin/external/envoy/source/common/config/_virtual_includes/grpc_mux_subscription_lib/common/config/grpc_mux_subscription_impl.h:70] gRPC config for type.googleapis.com/envoy.api.v2.Cluster rejected: Proto constraint validation failed (ClusterValidationError.TlsContext: ["embedded message failed validation"] | caused by UpstreamTlsContextValidationError.CommonTlsContext: ["embedded message failed validation"] | caused by CommonTlsContextValidationError.TlsCertificateSdsSecretConfigs[i]: ["embedded message failed validation"] | caused by SdsSecretConfigValidationError.SdsConfig: ["embedded message failed validation"] | caused by ConfigSourceValidationError.ApiConfigSource: ["embedded message failed validation"] | caused by ApiConfigSourceValidationError.GrpcServices[i]: ["embedded message failed validation"] | caused by GrpcServiceValidationError.GoogleGrpc: ["embedded message failed validation"] | caused by GoogleGrpcValidationError.ChannelCredentials: ["embedded message failed validation"] | caused by field: "credential_specifier", reason: is required): name: "outbound|80||default-http-backend.kube-system.svc.cluster.local"
type: EDS
eds_cluster_config {
  eds_config {
    ads {
    }
  }
  service_name: "outbound|80||default-http-backend.kube-system.svc.cluster.local"
}
connect_timeout {
  seconds: 1
}
circuit_breakers {
  thresholds {
  }
}
tls_context {
  common_tls_context {
    validation_context {
      trusted_ca {
        filename: "/etc/istio/certs/ca-root-cert.pem"
      }
      verify_subject_alt_name: "spiffe://cluster.local/ns/kube-system/sa/default"
    }
    alpn_protocols: "istio"
    tls_certificate_sds_secret_configs {
      name: "spiffe://cluster.local/ns/kube-system/sa/default"
      sds_config {
        api_config_source {
          api_type: GRPC
          grpc_services {
            google_grpc {
              target_uri: "unix:/var/run/sds/uds_path"
              channel_credentials {
                3: ""
              }
              call_credentials {
                google_compute_engine {
                }
              }
              stat_prefix: "sdsstat"
            }
          }
        }
      }
    }
  }
  sni: "outbound|80||default-http-backend.kube-system.svc.cluster.local"
}

[2018-09-28 22:25:31.052][11][warning][upstream] external/envoy/source/common/config/grpc_mux_impl.cc:231] gRPC config for type.googleapis.com/envoy.api.v2.Listener update rejected: Proto constraint validation failed (ListenerValidationError.FilterChains[i]: ["embedded message failed validation"] | caused by FilterChainValidationError.TlsContext: ["embedded message failed validation"] | caused by DownstreamTlsContextValidationError.CommonTlsContext: ["embedded message failed validation"] | caused by CommonTlsContextValidationError.TlsCertificateSdsSecretConfigs[i]: ["embedded message failed validation"] | caused by SdsSecretConfigValidationError.SdsConfig: ["embedded message failed validation"] | caused by ConfigSourceValidationError.ApiConfigSource: ["embedded message failed validation"] | caused by ApiConfigSourceValidationError.GrpcServices[i]: ["embedded message failed validation"] | caused by GrpcServiceValidationError.GoogleGrpc: ["embedded message failed validation"] | caused by GoogleGrpcValidationError.ChannelCredentials: ["embedded message failed validation"] | caused by field: "credential_specifier", reason: is required): name: "10.16.0.69_8000"
address {
  socket_address {
    address: "10.16.0.69"
    port_value: 8000
  }
}
filter_chains {
  tls_context {
    common_tls_context {
      validation_context {
        trusted_ca {
          filename: "/etc/istio/certs/ca-root-cert.pem"
        }
      }
      alpn_protocols: "h2"
      alpn_protocols: "http/1.1"
      tls_certificate_sds_secret_configs {
        name: "spiffe://cluster.local/ns/foo/sa/default"
        sds_config {
          api_config_source {
            api_type: GRPC
            grpc_services {
              google_grpc {
                target_uri: "unix:/var/run/sds/uds_path"
                channel_credentials {
                  3: ""
                }
                call_credentials {
                  google_compute_engine {
                  }
                }
                stat_prefix: "sdsstat"
              }
            }
          }
        }
      }
    }
    require_client_certificate {
      value: true
    }
  }
  filters {
    name: "envoy.http_connection_manager"
    config {
      fields {
        key: "access_log"
        value {
          list_value {
            values {
              struct_value {
                fields {
                  key: "config"
                  value {
                    struct_value {
                      fields {
                        key: "format"
                        value {
                          string_value: "[%START_TIME%] \"%REQ(:METHOD)% %REQ(X-ENVOY-ORIGINAL-PATH?:PATH)%%PROTOCOL%\" %RESPONSE_CODE% %RESPONSE_FLAGS% %BYTES_RECEIVED% %BYTES_SENT% %DURATION% %RESP(X-ENVOY-UPSTREAM-SERVICE-TIME)% \"%REQ(X-FORWARDED-FOR)%\" \"%REQ(USER-AGENT)%\" \"%REQ(X-REQUEST-ID)%\" \"%REQ(:AUTHORITY)%\" \"%UPSTREAM_HOST%\" %UPSTREAM_CLUSTER% %UPSTREAM_LOCAL_ADDRESS% %DOWNSTREAM_LOCAL_ADDRESS% %DOWNSTREAM_REMOTE_ADDRESS% %REQUESTED_SERVER_NAME%\n"
                        }
                      }
                      fields {
                        key: "path"
                        value {
                          string_value: "/dev/stdout"
                        }
                      }
                    }
                  }
                }
                fields {
                  key: "name"
                  value {
                    string_value: "envoy.file_access_log"
                  }
                }
              }
            }
          }
        }
      }
      fields {
        key: "forward_client_cert_details"
        value {
          string_value: "APPEND_FORWARD"
        }
      }
      fields {
        key: "generate_request_id"
        value {
          bool_value: true
        }
      }
      fields {
        key: "http_filters"
        value {
          list_value {
            values {
              struct_value {
                fields {
                  key: "config"
                  value {
                    struct_value {
                      fields {
                        key: "policy"
                        value {
                          struct_value {
                            fields {
                              key: "peers"
                              value {
                                list_value {
                                  values {
                                    struct_value {
                                      fields {
                                        key: "mtls"
                                        value {
                                          struct_value {
                                          }
                                        }
                                      }
                                    }
                                  }
                                }
                              }
                            }
                          }
                        }
                      }
                    }
                  }
                }
                fields {
                  key: "name"
                  value {
                    string_value: "istio_authn"
                  }
                }
              }
            }
            values {
              struct_value {
                fields {
                  key: "config"
                  value {
                    struct_value {
                      fields {
                        key: "default_destination_service"
                        value {
                          string_value: "default"
                        }
                      }
                      fields {
                        key: "mixer_attributes"
                        value {
                          struct_value {
                            fields {
                              key: "attributes"
                              value {
                                struct_value {
                                  fields {
                                    key: "context.reporter.kind"
                                    value {
                                      struct_value {
                                        fields {
                                          key: "string_value"
                                          value {
                                            string_value: "inbound"
                                          }
                                        }
                                      }
                                    }
                                  }
                                  fields {
                                    key: "context.reporter.uid"
                                    value {
                                      struct_value {
                                        fields {
                                          key: "string_value"
                                          value {
                                            string_value: "kubernetes://httpbin-6d6c88c4f5-q8h2t.foo"
                                          }
                                        }
                                      }
                                    }
                                  }
                                  fields {
                                    key: "destination.ip"
                                    value {
                                      struct_value {
                                        fields {
                                          key: "bytes_value"
                                          value {
                                            string_value: "AAAAAAAAAAAAAP//ChAARQ=="
                                          }
                                        }
                                      }
                                    }
                                  }
                                  fields {
                                    key: "destination.namespace"
                                    value {
                                      struct_value {
                                        fields {
                                          key: "string_value"
                                          value {
                                            string_value: "foo"
                                          }
                                        }
                                      }
                                    }
                                  }
                                  fields {
                                    key: "destination.port"
                                    value {
                                      struct_value {
                                        fields {
                                          key: "int64_value"
                                          value {
                                            string_value: "8000"
                                          }
                                        }
                                      }
                                    }
                                  }
                                  fields {
                                    key: "destination.uid"
                                    value {
                                      struct_value {
                                        fields {
                                          key: "string_value"
                                          value {
                                            string_value: "kubernetes://httpbin-6d6c88c4f5-q8h2t.foo"
                                          }
                                        }
                                      }
                                    }
                                  }
                                }
                              }
                            }
                          }
                        }
                      }
                      fields {
                        key: "service_configs"
                        value {
                          struct_value {
                            fields {
                              key: "default"
                              value {
                                struct_value {
                                }
                              }
                            }
                          }
                        }
                      }
                      fields {
                        key: "transport"
                        value {
                          struct_value {
                            fields {
                              key: "attributes_for_mixer_proxy"
                              value {
                                struct_value {
                                  fields {
                                    key: "attributes"
                                    value {
                                      struct_value {
                                        fields {
                                          key: "source.uid"
                                          value {
                                            struct_value {
                                              fields {
                                                key: "string_value"
                                                value {
                                                  string_value: "kubernetes://httpbin-6d6c88c4f5-q8h2t.foo"
                                                }
                                              }
                                            }
                                          }
                                        }
                                      }
                                    }
                                  }
                                }
                              }
                            }
                            fields {
                              key: "check_cluster"
                              value {
                                string_value: "outbound|9091||istio-policy.istio-system.svc.cluster.local"
                              }
                            }
                            fields {
                              key: "network_fail_policy"
                              value {
                                struct_value {
                                  fields {
                                    key: "policy"
                                    value {
                                      string_value: "FAIL_CLOSE"
                                    }
                                  }
                                }
                              }
                            }
                            fields {
                              key: "report_cluster"
                              value {
                                string_value: "outbound|9091||istio-telemetry.istio-system.svc.cluster.local"
                              }
                            }
                          }
                        }
                      }
                    }
                  }
                }
                fields {
                  key: "name"
                  value {
                    string_value: "mixer"
                  }
                }
              }
            }
            values {
              struct_value {
                fields {
                  key: "name"
                  value {
                    string_value: "envoy.cors"
                  }
                }
              }
            }
            values {
              struct_value {
                fields {
                  key: "name"
                  value {
                    string_value: "envoy.fault"
                  }
                }
              }
            }
            values {
              struct_value {
                fields {
                  key: "name"
                  value {
                    string_value: "envoy.router"
                  }
                }
              }
            }
          }
        }
      }
      fields {
        key: "route_config"
        value {
          struct_value {
            fields {
              key: "name"
              value {
                string_value: "inbound|8000||httpbin.foo.svc.cluster.local"
              }
            }
            fields {
              key: "validate_clusters"
              value {
                bool_value: false
              }
            }
            fields {
              key: "virtual_hosts"
              value {
                list_value {
                  values {
                    struct_value {
                      fields {
                        key: "domains"
                        value {
                          list_value {
                            values {
                              string_value: "*"
                            }
                          }
                        }
                      }
                      fields {
                        key: "name"
                        value {
                          string_value: "inbound|http|8000"
                        }
                      }
                      fields {
                        key: "routes"
                        value {
                          list_value {
                            values {
                              struct_value {
                                fields {
                                  key: "decorator"
                                  value {
                                    struct_value {
                                      fields {
                                        key: "operation"
                                        value {
                                          string_value: "httpbin.foo.svc.cluster.local:8000/*"
                                        }
                                      }
                                    }
                                  }
                                }
                                fields {
                                  key: "match"
                                  value {
                                    struct_value {
                                      fields {
                                        key: "prefix"
                                        value {
                                          string_value: "/"
                                        }
                                      }
                                    }
                                  }
                                }
                                fields {
                                  key: "per_filter_config"
                                  value {
                                    struct_value {
                                      fields {
                                        key: "mixer"
                                        value {
                                          struct_value {
                                            fields {
                                              key: "mixer_attributes"
                                              value {
                                                struct_value {
                                                  fields {
                                                    key: "attributes"
                                                    value {
                                                      struct_value {
                                                        fields {
                                                          key: "destination.service.host"
                                                          value {
                                                            struct_value {
                                                              fields {
                                                                key: "string_value"
                                                                value {
                                                                  string_value: "httpbin.foo.svc.cluster.local"
                                                                }
                                                              }
                                                            }
                                                          }
                                                        }
                                                        fields {
                                                          key: "destination.service.name"
                                                          value {
                                                            struct_value {
                                                              fields {
                                                                key: "string_value"
                                                                value {
                                                                  string_value: "httpbin"
                                                                }
                                                              }
                                                            }
                                                          }
                                                        }
                                                        fields {
                                                          key: "destination.service.namespace"
                                                          value {
                                                            struct_value {
                                                              fields {
                                                                key: "string_value"
                                                                value {
                                                                  string_value: "foo"
                                                                }
                                                              }
                                                            }
                                                          }
                                                        }
                                                        fields {
                                                          key: "destination.service.uid"
                                                          value {
                                                            struct_value {
                                                              fields {
                                                                key: "string_value"
                                                                value {
                                                                  string_value: "istio://foo/services/httpbin"
                                                                }
                                                              }
                                                            }
                                                          }
                                                        }
                                                      }
                                                    }
                                                  }
                                                }
                                              }
                                            }
                                          }
                                        }
                                      }
                                    }
                                  }
                                }
                                fields {
                                  key: "route"
                                  value {
                                    struct_value {
                                      fields {
                                        key: "cluster"
                                        value {
                                          string_value: "inbound|8000||httpbin.foo.svc.cluster.local"
                                        }
                                      }
                                      fields {
                                        key: "max_grpc_timeout"
                                        value {
                                          string_value: "0s"
                                        }
                                      }
                                      fields {
                                        key: "timeout"
                                        value {
                                          string_value: "0s"
                                        }
                                      }
                                    }
                                  }
                                }
                              }
                            }
                          }
                        }
                      }
                    }
                  }
                }
              }
            }
          }
        }
      }
      fields {
        key: "stat_prefix"
        value {
          string_value: "10.16.0.69_8000"
        }
      }
      fields {
        key: "stream_idle_timeout"
        value {
          string_value: "0s"
        }
      }
      fields {
        key: "tracing"
        value {
          struct_value {
            fields {
              key: "client_sampling"
              value {
                struct_value {
                  fields {
                    key: "value"
                    value {
                      number_value: 100
                    }
                  }
                }
              }
            }
            fields {
              key: "overall_sampling"
              value {
                struct_value {
                  fields {
                    key: "value"
                    value {
                      number_value: 100
                    }
                  }
                }
              }
            }
            fields {
              key: "random_sampling"
              value {
                struct_value {
                  fields {
                    key: "value"
                    value {
                      number_value: 100
                    }
                  }
                }
              }
            }
          }
        }
      }
      fields {
        key: "upgrade_configs"
        value {
          list_value {
            values {
              struct_value {
                fields {
                  key: "upgrade_type"
                  value {
                    string_value: "websocket"
                  }
                }
              }
            }
          }
        }
      }
      fields {
        key: "use_remote_address"
        value {
          bool_value: false
        }
      }
    }
  }
}
deprecated_v1 {
  bind_to_port {
  }
}
listener_filters {
  name: "envoy.listener.tls_inspector"
}

[2018-09-28 22:25:31.054][11][warning][config] bazel-out/k8-opt/bin/external/envoy/source/common/config/_virtual_includes/grpc_mux_subscription_lib/common/config/grpc_mux_subscription_impl.h:70] gRPC config for type.googleapis.com/envoy.api.v2.Listener rejected: Proto constraint validation failed (ListenerValidationError.FilterChains[i]: ["embedded message failed validation"] | caused by FilterChainValidationError.TlsContext: ["embedded message failed validation"] | caused by DownstreamTlsContextValidationError.CommonTlsContext: ["embedded message failed validation"] | caused by CommonTlsContextValidationError.TlsCertificateSdsSecretConfigs[i]: ["embedded message failed validation"] | caused by SdsSecretConfigValidationError.SdsConfig: ["embedded message failed validation"] | caused by ConfigSourceValidationError.ApiConfigSource: ["embedded message failed validation"] | caused by ApiConfigSourceValidationError.GrpcServices[i]: ["embedded message failed validation"] | caused by GrpcServiceValidationError.GoogleGrpc: ["embedded message failed validation"] | caused by GoogleGrpcValidationError.ChannelCredentials: ["embedded message failed validation"] | caused by field: "credential_specifier", reason: is required): name: "10.16.0.69_8000"
address {
  socket_address {
    address: "10.16.0.69"
    port_value: 8000
  }
}
filter_chains {
  tls_context {
    common_tls_context {
      validation_context {
        trusted_ca {
          filename: "/etc/istio/certs/ca-root-cert.pem"
        }
      }
      alpn_protocols: "h2"
      alpn_protocols: "http/1.1"
      tls_certificate_sds_secret_configs {
        name: "spiffe://cluster.local/ns/foo/sa/default"
        sds_config {
          api_config_source {
            api_type: GRPC
            grpc_services {
              google_grpc {
                target_uri: "unix:/var/run/sds/uds_path"
                channel_credentials {
                  3: ""
                }
                call_credentials {
                  google_compute_engine {
                  }
                }
                stat_prefix: "sdsstat"
              }
            }
          }
        }
      }
    }
    require_client_certificate {
      value: true
    }
  }
  filters {
    name: "envoy.http_connection_manager"
    config {
      fields {
        key: "access_log"
        value {
          list_value {
            values {
              struct_value {
                fields {
                  key: "config"
                  value {
                    struct_value {
                      fields {
                        key: "format"
                        value {
                          string_value: "[%START_TIME%] \"%REQ(:METHOD)% %REQ(X-ENVOY-ORIGINAL-PATH?:PATH)%%PROTOCOL%\" %RESPONSE_CODE% %RESPONSE_FLAGS% %BYTES_RECEIVED% %BYTES_SENT% %DURATION% %RESP(X-ENVOY-UPSTREAM-SERVICE-TIME)% \"%REQ(X-FORWARDED-FOR)%\" \"%REQ(USER-AGENT)%\" \"%REQ(X-REQUEST-ID)%\" \"%REQ(:AUTHORITY)%\" \"%UPSTREAM_HOST%\" %UPSTREAM_CLUSTER% %UPSTREAM_LOCAL_ADDRESS% %DOWNSTREAM_LOCAL_ADDRESS% %DOWNSTREAM_REMOTE_ADDRESS% %REQUESTED_SERVER_NAME%\n"
                        }
                      }
                      fields {
                        key: "path"
                        value {
                          string_value: "/dev/stdout"
                        }
                      }
                    }
                  }
                }
                fields {
                  key: "name"
                  value {
                    string_value: "envoy.file_access_log"
                  }
                }
              }
            }
          }
        }
      }
      fields {
        key: "forward_client_cert_details"
        value {
          string_value: "APPEND_FORWARD"
        }
      }
      fields {
        key: "generate_request_id"
        value {
          bool_value: true
        }
      }
      fields {
        key: "http_filters"
        value {
          list_value {
            values {
              struct_value {
                fields {
                  key: "config"
                  value {
                    struct_value {
                      fields {
                        key: "policy"
                        value {
                          struct_value {
                            fields {
                              key: "peers"
                              value {
                                list_value {
                                  values {
                                    struct_value {
                                      fields {
                                        key: "mtls"
                                        value {
                                          struct_value {
                                          }
                                        }
                                      }
                                    }
                                  }
                                }
                              }
                            }
                          }
                        }
                      }
                    }
                  }
                }
                fields {
                  key: "name"
                  value {
                    string_value: "istio_authn"
                  }
                }
              }
            }
            values {
              struct_value {
                fields {
                  key: "config"
                  value {
                    struct_value {
                      fields {
                        key: "default_destination_service"
                        value {
                          string_value: "default"
                        }
                      }
                      fields {
                        key: "mixer_attributes"
                        value {
                          struct_value {
                            fields {
                              key: "attributes"
                              value {
                                struct_value {
                                  fields {
                                    key: "context.reporter.kind"
                                    value {
                                      struct_value {
                                        fields {
                                          key: "string_value"
                                          value {
                                            string_value: "inbound"
                                          }
                                        }
                                      }
                                    }
                                  }
                                  fields {
                                    key: "context.reporter.uid"
                                    value {
                                      struct_value {
                                        fields {
                                          key: "string_value"
                                          value {
                                            string_value: "kubernetes://httpbin-6d6c88c4f5-q8h2t.foo"
                                          }
                                        }
                                      }
                                    }
                                  }
                                  fields {
                                    key: "destination.ip"
                                    value {
                                      struct_value {
                                        fields {
                                          key: "bytes_value"
                                          value {
                                            string_value: "AAAAAAAAAAAAAP//ChAARQ=="
                                          }
                                        }
                                      }
                                    }
                                  }
                                  fields {
                                    key: "destination.namespace"
                                    value {
                                      struct_value {
                                        fields {
                                          key: "string_value"
                                          value {
                                            string_value: "foo"
                                          }
                                        }
                                      }
                                    }
                                  }
                                  fields {
                                    key: "destination.port"
                                    value {
                                      struct_value {
                                        fields {
                                          key: "int64_value"
                                          value {
                                            string_value: "8000"
                                          }
                                        }
                                      }
                                    }
                                  }
                                  fields {
                                    key: "destination.uid"
                                    value {
                                      struct_value {
                                        fields {
                                          key: "string_value"
                                          value {
                                            string_value: "kubernetes://httpbin-6d6c88c4f5-q8h2t.foo"
                                          }
                                        }
                                      }
                                    }
                                  }
                                }
                              }
                            }
                          }
                        }
                      }
                      fields {
                        key: "service_configs"
                        value {
                          struct_value {
                            fields {
                              key: "default"
                              value {
                                struct_value {
                                }
                              }
                            }
                          }
                        }
                      }
                      fields {
                        key: "transport"
                        value {
                          struct_value {
                            fields {
                              key: "attributes_for_mixer_proxy"
                              value {
                                struct_value {
                                  fields {
                                    key: "attributes"
                                    value {
                                      struct_value {
                                        fields {
                                          key: "source.uid"
                                          value {
                                            struct_value {
                                              fields {
                                                key: "string_value"
                                                value {
                                                  string_value: "kubernetes://httpbin-6d6c88c4f5-q8h2t.foo"
                                                }
                                              }
                                            }
                                          }
                                        }
                                      }
                                    }
                                  }
                                }
                              }
                            }
                            fields {
                              key: "check_cluster"
                              value {
                                string_value: "outbound|9091||istio-policy.istio-system.svc.cluster.local"
                              }
                            }
                            fields {
                              key: "network_fail_policy"
                              value {
                                struct_value {
                                  fields {
                                    key: "policy"
                                    value {
                                      string_value: "FAIL_CLOSE"
                                    }
                                  }
                                }
                              }
                            }
                            fields {
                              key: "report_cluster"
                              value {
                                string_value: "outbound|9091||istio-telemetry.istio-system.svc.cluster.local"
                              }
                            }
                          }
                        }
                      }
                    }
                  }
                }
                fields {
                  key: "name"
                  value {
                    string_value: "mixer"
                  }
                }
              }
            }
            values {
              struct_value {
                fields {
                  key: "name"
                  value {
                    string_value: "envoy.cors"
                  }
                }
              }
            }
            values {
              struct_value {
                fields {
                  key: "name"
                  value {
                    string_value: "envoy.fault"
                  }
                }
              }
            }
            values {
              struct_value {
                fields {
                  key: "name"
                  value {
                    string_value: "envoy.router"
                  }
                }
              }
            }
          }
        }
      }
      fields {
        key: "route_config"
        value {
          struct_value {
            fields {
              key: "name"
              value {
                string_value: "inbound|8000||httpbin.foo.svc.cluster.local"
              }
            }
            fields {
              key: "validate_clusters"
              value {
                bool_value: false
              }
            }
            fields {
              key: "virtual_hosts"
              value {
                list_value {
                  values {
                    struct_value {
                      fields {
                        key: "domains"
                        value {
                          list_value {
                            values {
                              string_value: "*"
                            }
                          }
                        }
                      }
                      fields {
                        key: "name"
                        value {
                          string_value: "inbound|http|8000"
                        }
                      }
                      fields {
                        key: "routes"
                        value {
                          list_value {
                            values {
                              struct_value {
                                fields {
                                  key: "decorator"
                                  value {
                                    struct_value {
                                      fields {
                                        key: "operation"
                                        value {
                                          string_value: "httpbin.foo.svc.cluster.local:8000/*"
                                        }
                                      }
                                    }
                                  }
                                }
                                fields {
                                  key: "match"
                                  value {
                                    struct_value {
                                      fields {
                                        key: "prefix"
                                        value {
                                          string_value: "/"
                                        }
                                      }
                                    }
                                  }
                                }
                                fields {
                                  key: "per_filter_config"
                                  value {
                                    struct_value {
                                      fields {
                                        key: "mixer"
                                        value {
                                          struct_value {
                                            fields {
                                              key: "mixer_attributes"
                                              value {
                                                struct_value {
                                                  fields {
                                                    key: "attributes"
                                                    value {
                                                      struct_value {
                                                        fields {
                                                          key: "destination.service.host"
                                                          value {
                                                            struct_value {
                                                              fields {
                                                                key: "string_value"
                                                                value {
                                                                  string_value: "httpbin.foo.svc.cluster.local"
                                                                }
                                                              }
                                                            }
                                                          }
                                                        }
                                                        fields {
                                                          key: "destination.service.name"
                                                          value {
                                                            struct_value {
                                                              fields {
                                                                key: "string_value"
                                                                value {
                                                                  string_value: "httpbin"
                                                                }
                                                              }
                                                            }
                                                          }
                                                        }
                                                        fields {
                                                          key: "destination.service.namespace"
                                                          value {
                                                            struct_value {
                                                              fields {
                                                                key: "string_value"
                                                                value {
                                                                  string_value: "foo"
                                                                }
                                                              }
                                                            }
                                                          }
                                                        }
                                                        fields {
                                                          key: "destination.service.uid"
                                                          value {
                                                            struct_value {
                                                              fields {
                                                                key: "string_value"
                                                                value {
                                                                  string_value: "istio://foo/services/httpbin"
                                                                }
                                                              }
                                                            }
                                                          }
                                                        }
                                                      }
                                                    }
                                                  }
                                                }
                                              }
                                            }
                                          }
                                        }
                                      }
                                    }
                                  }
                                }
                                fields {
                                  key: "route"
                                  value {
                                    struct_value {
                                      fields {
                                        key: "cluster"
                                        value {
                                          string_value: "inbound|8000||httpbin.foo.svc.cluster.local"
                                        }
                                      }
                                      fields {
                                        key: "max_grpc_timeout"
                                        value {
                                          string_value: "0s"
                                        }
                                      }
                                      fields {
                                        key: "timeout"
                                        value {
                                          string_value: "0s"
                                        }
                                      }
                                    }
                                  }
                                }
                              }
                            }
                          }
                        }
                      }
                    }
                  }
                }
              }
            }
          }
        }
      }
      fields {
        key: "stat_prefix"
        value {
          string_value: "10.16.0.69_8000"
        }
      }
      fields {
        key: "stream_idle_timeout"
        value {
          string_value: "0s"
        }
      }
      fields {
        key: "tracing"
        value {
          struct_value {
            fields {
              key: "client_sampling"
              value {
                struct_value {
                  fields {
                    key: "value"
                    value {
                      number_value: 100
                    }
                  }
                }
              }
            }
            fields {
              key: "overall_sampling"
              value {
                struct_value {
                  fields {
                    key: "value"
                    value {
                      number_value: 100
                    }
                  }
                }
              }
            }
            fields {
              key: "random_sampling"
              value {
                struct_value {
                  fields {
                    key: "value"
                    value {
                      number_value: 100
                    }
                  }
                }
              }
            }
          }
        }
      }
      fields {
        key: "upgrade_configs"
        value {
          list_value {
            values {
              struct_value {
                fields {
                  key: "upgrade_type"
                  value {
                    string_value: "websocket"
                  }
                }
              }
            }
          }
        }
      }
      fields {
        key: "use_remote_address"
        value {
          bool_value: false
        }
      }
    }
  }
}
deprecated_v1 {
  bind_to_port {
  }
}
listener_filters {
  name: "envoy.listener.tls_inspector"
}

2018-09-28T22:25:32.741370Z	info	Envoy proxy is NOT ready: 3 errors occurred:

* failed checking application ports. listeners="0.0.0.0:15090"
* envoy missing listener for inbound application port: 0
* envoy missing listener for inbound application port: 8000
2018-09-28T22:25:34.741338Z	info	Envoy proxy is NOT ready: 3 errors occurred:

* failed checking application ports. listeners="0.0.0.0:15090"
* envoy missing listener for inbound application port: 0
* envoy missing listener for inbound application port: 8000
[2018-09-28 22:25:35.151][11][warning][upstream] external/envoy/source/common/config/grpc_mux_impl.cc:231] gRPC config for type.googleapis.com/envoy.api.v2.Cluster update rejected: Proto constraint validation failed (ClusterValidationError.TlsContext: ["embedded message failed validation"] | caused by UpstreamTlsContextValidationError.CommonTlsContext: ["embedded message failed validation"] | caused by CommonTlsContextValidationError.TlsCertificateSdsSecretConfigs[i]: ["embedded message failed validation"] | caused by SdsSecretConfigValidationError.SdsConfig: ["embedded message failed validation"] | caused by ConfigSourceValidationError.ApiConfigSource: ["embedded message failed validation"] | caused by ApiConfigSourceValidationError.GrpcServices[i]: ["embedded message failed validation"] | caused by GrpcServiceValidationError.GoogleGrpc: ["embedded message failed validation"] | caused by GoogleGrpcValidationError.ChannelCredentials: ["embedded message failed validation"] | caused by field: "credential_specifier", reason: is required): name: "outbound|53||kube-dns.kube-system.svc.cluster.local"
type: EDS
eds_cluster_config {
  eds_config {
    ads {
    }
  }
  service_name: "outbound|53||kube-dns.kube-system.svc.cluster.local"
}
connect_timeout {
  seconds: 1
}
circuit_breakers {
  thresholds {
  }
}
tls_context {
  common_tls_context {
    validation_context {
      trusted_ca {
        filename: "/etc/istio/certs/ca-root-cert.pem"
      }
      verify_subject_alt_name: "spiffe://cluster.local/ns/kube-system/sa/kube-dns"
    }
    alpn_protocols: "istio"
    tls_certificate_sds_secret_configs {
      name: "spiffe://cluster.local/ns/kube-system/sa/kube-dns"
      sds_config {
        api_config_source {
          api_type: GRPC
          grpc_services {
            google_grpc {
              target_uri: "unix:/var/run/sds/uds_path"
              channel_credentials {
                3: ""
              }
              call_credentials {
                google_compute_engine {
                }
              }
              stat_prefix: "sdsstat"
            }
          }
        }
      }
    }
  }
  sni: "outbound|53||kube-dns.kube-system.svc.cluster.local"
}

[2018-09-28 22:25:35.153][11][warning][config] bazel-out/k8-opt/bin/external/envoy/source/common/config/_virtual_includes/grpc_mux_subscription_lib/common/config/grpc_mux_subscription_impl.h:70] gRPC config for type.googleapis.com/envoy.api.v2.Cluster rejected: Proto constraint validation failed (ClusterValidationError.TlsContext: ["embedded message failed validation"] | caused by UpstreamTlsContextValidationError.CommonTlsContext: ["embedded message failed validation"] | caused by CommonTlsContextValidationError.TlsCertificateSdsSecretConfigs[i]: ["embedded message failed validation"] | caused by SdsSecretConfigValidationError.SdsConfig: ["embedded message failed validation"] | caused by ConfigSourceValidationError.ApiConfigSource: ["embedded message failed validation"] | caused by ApiConfigSourceValidationError.GrpcServices[i]: ["embedded message failed validation"] | caused by GrpcServiceValidationError.GoogleGrpc: ["embedded message failed validation"] | caused by GoogleGrpcValidationError.ChannelCredentials: ["embedded message failed validation"] | caused by field: "credential_specifier", reason: is required): name: "outbound|53||kube-dns.kube-system.svc.cluster.local"
type: EDS
eds_cluster_config {
  eds_config {
    ads {
    }
  }
  service_name: "outbound|53||kube-dns.kube-system.svc.cluster.local"
}
connect_timeout {
  seconds: 1
}
circuit_breakers {
  thresholds {
  }
}
tls_context {
  common_tls_context {
    validation_context {
      trusted_ca {
        filename: "/etc/istio/certs/ca-root-cert.pem"
      }
      verify_subject_alt_name: "spiffe://cluster.local/ns/kube-system/sa/kube-dns"
    }
    alpn_protocols: "istio"
    tls_certificate_sds_secret_configs {
      name: "spiffe://cluster.local/ns/kube-system/sa/kube-dns"
      sds_config {
        api_config_source {
          api_type: GRPC
          grpc_services {
            google_grpc {
              target_uri: "unix:/var/run/sds/uds_path"
              channel_credentials {
                3: ""
              }
              call_credentials {
                google_compute_engine {
                }
              }
              stat_prefix: "sdsstat"
            }
          }
        }
      }
    }
  }
  sni: "outbound|53||kube-dns.kube-system.svc.cluster.local"
}

[2018-09-28 22:25:35.362][11][warning][upstream] external/envoy/source/common/config/grpc_mux_impl.cc:231] gRPC config for type.googleapis.com/envoy.api.v2.Listener update rejected: Proto constraint validation failed (ListenerValidationError.FilterChains[i]: ["embedded message failed validation"] | caused by FilterChainValidationError.TlsContext: ["embedded message failed validation"] | caused by DownstreamTlsContextValidationError.CommonTlsContext: ["embedded message failed validation"] | caused by CommonTlsContextValidationError.TlsCertificateSdsSecretConfigs[i]: ["embedded message failed validation"] | caused by SdsSecretConfigValidationError.SdsConfig: ["embedded message failed validation"] | caused by ConfigSourceValidationError.ApiConfigSource: ["embedded message failed validation"] | caused by ApiConfigSourceValidationError.GrpcServices[i]: ["embedded message failed validation"] | caused by GrpcServiceValidationError.GoogleGrpc: ["embedded message failed validation"] | caused by GoogleGrpcValidationError.ChannelCredentials: ["embedded message failed validation"] | caused by field: "credential_specifier", reason: is required): name: "10.16.0.69_8000"
address {
  socket_address {
    address: "10.16.0.69"
    port_value: 8000
  }
}
filter_chains {
  tls_context {
    common_tls_context {
      validation_context {
        trusted_ca {
          filename: "/etc/istio/certs/ca-root-cert.pem"
        }
      }
      alpn_protocols: "h2"
      alpn_protocols: "http/1.1"
      tls_certificate_sds_secret_configs {
        name: "spiffe://cluster.local/ns/foo/sa/default"
        sds_config {
          api_config_source {
            api_type: GRPC
            grpc_services {
              google_grpc {
                target_uri: "unix:/var/run/sds/uds_path"
                channel_credentials {
                  3: ""
                }
                call_credentials {
                  google_compute_engine {
                  }
                }
                stat_prefix: "sdsstat"
              }
            }
          }
        }
      }
    }
    require_client_certificate {
      value: true
    }
  }
  filters {
    name: "envoy.http_connection_manager"
    config {
      fields {
        key: "access_log"
        value {
          list_value {
            values {
              struct_value {
                fields {
                  key: "config"
                  value {
                    struct_value {
                      fields {
                        key: "format"
                        value {
                          string_value: "[%START_TIME%] \"%REQ(:METHOD)% %REQ(X-ENVOY-ORIGINAL-PATH?:PATH)%%PROTOCOL%\" %RESPONSE_CODE% %RESPONSE_FLAGS% %BYTES_RECEIVED% %BYTES_SENT% %DURATION% %RESP(X-ENVOY-UPSTREAM-SERVICE-TIME)% \"%REQ(X-FORWARDED-FOR)%\" \"%REQ(USER-AGENT)%\" \"%REQ(X-REQUEST-ID)%\" \"%REQ(:AUTHORITY)%\" \"%UPSTREAM_HOST%\" %UPSTREAM_CLUSTER% %UPSTREAM_LOCAL_ADDRESS% %DOWNSTREAM_LOCAL_ADDRESS% %DOWNSTREAM_REMOTE_ADDRESS% %REQUESTED_SERVER_NAME%\n"
                        }
                      }
                      fields {
                        key: "path"
                        value {
                          string_value: "/dev/stdout"
                        }
                      }
                    }
                  }
                }
                fields {
                  key: "name"
                  value {
                    string_value: "envoy.file_access_log"
                  }
                }
              }
            }
          }
        }
      }
      fields {
        key: "forward_client_cert_details"
        value {
          string_value: "APPEND_FORWARD"
        }
      }
      fields {
        key: "generate_request_id"
        value {
          bool_value: true
        }
      }
      fields {
        key: "http_filters"
        value {
          list_value {
            values {
              struct_value {
                fields {
                  key: "config"
                  value {
                    struct_value {
                      fields {
                        key: "policy"
                        value {
                          struct_value {
                            fields {
                              key: "peers"
                              value {
                                list_value {
                                  values {
                                    struct_value {
                                      fields {
                                        key: "mtls"
                                        value {
                                          struct_value {
                                          }
                                        }
                                      }
                                    }
                                  }
                                }
                              }
                            }
                          }
                        }
                      }
                    }
                  }
                }
                fields {
                  key: "name"
                  value {
                    string_value: "istio_authn"
                  }
                }
              }
            }
            values {
              struct_value {
                fields {
                  key: "config"
                  value {
                    struct_value {
                      fields {
                        key: "default_destination_service"
                        value {
                          string_value: "default"
                        }
                      }
                      fields {
                        key: "mixer_attributes"
                        value {
                          struct_value {
                            fields {
                              key: "attributes"
                              value {
                                struct_value {
                                  fields {
                                    key: "context.reporter.kind"
                                    value {
                                      struct_value {
                                        fields {
                                          key: "string_value"
                                          value {
                                            string_value: "inbound"
                                          }
                                        }
                                      }
                                    }
                                  }
                                  fields {
                                    key: "context.reporter.uid"
                                    value {
                                      struct_value {
                                        fields {
                                          key: "string_value"
                                          value {
                                            string_value: "kubernetes://httpbin-6d6c88c4f5-q8h2t.foo"
                                          }
                                        }
                                      }
                                    }
                                  }
                                  fields {
                                    key: "destination.ip"
                                    value {
                                      struct_value {
                                        fields {
                                          key: "bytes_value"
                                          value {
                                            string_value: "AAAAAAAAAAAAAP//ChAARQ=="
                                          }
                                        }
                                      }
                                    }
                                  }
                                  fields {
                                    key: "destination.namespace"
                                    value {
                                      struct_value {
                                        fields {
                                          key: "string_value"
                                          value {
                                            string_value: "foo"
                                          }
                                        }
                                      }
                                    }
                                  }
                                  fields {
                                    key: "destination.port"
                                    value {
                                      struct_value {
                                        fields {
                                          key: "int64_value"
                                          value {
                                            string_value: "8000"
                                          }
                                        }
                                      }
                                    }
                                  }
                                  fields {
                                    key: "destination.uid"
                                    value {
                                      struct_value {
                                        fields {
                                          key: "string_value"
                                          value {
                                            string_value: "kubernetes://httpbin-6d6c88c4f5-q8h2t.foo"
                                          }
                                        }
                                      }
                                    }
                                  }
                                }
                              }
                            }
                          }
                        }
                      }
                      fields {
                        key: "service_configs"
                        value {
                          struct_value {
                            fields {
                              key: "default"
                              value {
                                struct_value {
                                }
                              }
                            }
                          }
                        }
                      }
                      fields {
                        key: "transport"
                        value {
                          struct_value {
                            fields {
                              key: "attributes_for_mixer_proxy"
                              value {
                                struct_value {
                                  fields {
                                    key: "attributes"
                                    value {
                                      struct_value {
                                        fields {
                                          key: "source.uid"
                                          value {
                                            struct_value {
                                              fields {
                                                key: "string_value"
                                                value {
                                                  string_value: "kubernetes://httpbin-6d6c88c4f5-q8h2t.foo"
                                                }
                                              }
                                            }
                                          }
                                        }
                                      }
                                    }
                                  }
                                }
                              }
                            }
                            fields {
                              key: "check_cluster"
                              value {
                                string_value: "outbound|9091||istio-policy.istio-system.svc.cluster.local"
                              }
                            }
                            fields {
                              key: "network_fail_policy"
                              value {
                                struct_value {
                                  fields {
                                    key: "policy"
                                    value {
                                      string_value: "FAIL_CLOSE"
                                    }
                                  }
                                }
                              }
                            }
                            fields {
                              key: "report_cluster"
                              value {
                                string_value: "outbound|9091||istio-telemetry.istio-system.svc.cluster.local"
                              }
                            }
                          }
                        }
                      }
                    }
                  }
                }
                fields {
                  key: "name"
                  value {
                    string_value: "mixer"
                  }
                }
              }
            }
            values {
              struct_value {
                fields {
                  key: "name"
                  value {
                    string_value: "envoy.cors"
                  }
                }
              }
            }
            values {
              struct_value {
                fields {
                  key: "name"
                  value {
                    string_value: "envoy.fault"
                  }
                }
              }
            }
            values {
              struct_value {
                fields {
                  key: "name"
                  value {
                    string_value: "envoy.router"
                  }
                }
              }
            }
          }
        }
      }
      fields {
        key: "route_config"
        value {
          struct_value {
            fields {
              key: "name"
              value {
                string_value: "inbound|8000||httpbin.foo.svc.cluster.local"
              }
            }
            fields {
              key: "validate_clusters"
              value {
                bool_value: false
              }
            }
            fields {
              key: "virtual_hosts"
              value {
                list_value {
                  values {
                    struct_value {
                      fields {
                        key: "domains"
                        value {
                          list_value {
                            values {
                              string_value: "*"
                            }
                          }
                        }
                      }
                      fields {
                        key: "name"
                        value {
                          string_value: "inbound|http|8000"
                        }
                      }
                      fields {
                        key: "routes"
                        value {
                          list_value {
                            values {
                              struct_value {
                                fields {
                                  key: "decorator"
                                  value {
                                    struct_value {
                                      fields {
                                        key: "operation"
                                        value {
                                          string_value: "httpbin.foo.svc.cluster.local:8000/*"
                                        }
                                      }
                                    }
                                  }
                                }
                                fields {
                                  key: "match"
                                  value {
                                    struct_value {
                                      fields {
                                        key: "prefix"
                                        value {
                                          string_value: "/"
                                        }
                                      }
                                    }
                                  }
                                }
                                fields {
                                  key: "per_filter_config"
                                  value {
                                    struct_value {
                                      fields {
                                        key: "mixer"
                                        value {
                                          struct_value {
                                            fields {
                                              key: "mixer_attributes"
                                              value {
                                                struct_value {
                                                  fields {
                                                    key: "attributes"
                                                    value {
                                                      struct_value {
                                                        fields {
                                                          key: "destination.service.host"
                                                          value {
                                                            struct_value {
                                                              fields {
                                                                key: "string_value"
                                                                value {
                                                                  string_value: "httpbin.foo.svc.cluster.local"
                                                                }
                                                              }
                                                            }
                                                          }
                                                        }
                                                        fields {
                                                          key: "destination.service.name"
                                                          value {
                                                            struct_value {
                                                              fields {
                                                                key: "string_value"
                                                                value {
                                                                  string_value: "httpbin"
                                                                }
                                                              }
                                                            }
                                                          }
                                                        }
                                                        fields {
                                                          key: "destination.service.namespace"
                                                          value {
                                                            struct_value {
                                                              fields {
                                                                key: "string_value"
                                                                value {
                                                                  string_value: "foo"
                                                                }
                                                              }
                                                            }
                                                          }
                                                        }
                                                        fields {
                                                          key: "destination.service.uid"
                                                          value {
                                                            struct_value {
                                                              fields {
                                                                key: "string_value"
                                                                value {
                                                                  string_value: "istio://foo/services/httpbin"
                                                                }
                                                              }
                                                            }
                                                          }
                                                        }
                                                      }
                                                    }
                                                  }
                                                }
                                              }
                                            }
                                          }
                                        }
                                      }
                                    }
                                  }
                                }
                                fields {
                                  key: "route"
                                  value {
                                    struct_value {
                                      fields {
                                        key: "cluster"
                                        value {
                                          string_value: "inbound|8000||httpbin.foo.svc.cluster.local"
                                        }
                                      }
                                      fields {
                                        key: "max_grpc_timeout"
                                        value {
                                          string_value: "0s"
                                        }
                                      }
                                      fields {
                                        key: "timeout"
                                        value {
                                          string_value: "0s"
                                        }
                                      }
                                    }
                                  }
                                }
                              }
                            }
                          }
                        }
                      }
                    }
                  }
                }
              }
            }
          }
        }
      }
      fields {
        key: "stat_prefix"
        value {
          string_value: "10.16.0.69_8000"
        }
      }
      fields {
        key: "stream_idle_timeout"
        value {
          string_value: "0s"
        }
      }
      fields {
        key: "tracing"
        value {
          struct_value {
            fields {
              key: "client_sampling"
              value {
                struct_value {
                  fields {
                    key: "value"
                    value {
                      number_value: 100
                    }
                  }
                }
              }
            }
            fields {
              key: "overall_sampling"
              value {
                struct_value {
                  fields {
                    key: "value"
                    value {
                      number_value: 100
                    }
                  }
                }
              }
            }
            fields {
              key: "random_sampling"
              value {
                struct_value {
                  fields {
                    key: "value"
                    value {
                      number_value: 100
                    }
                  }
                }
              }
            }
          }
        }
      }
      fields {
        key: "upgrade_configs"
        value {
          list_value {
            values {
              struct_value {
                fields {
                  key: "upgrade_type"
                  value {
                    string_value: "websocket"
                  }
                }
              }
            }
          }
        }
      }
      fields {
        key: "use_remote_address"
        value {
          bool_value: false
        }
      }
    }
  }
}
deprecated_v1 {
  bind_to_port {
  }
}
listener_filters {
  name: "envoy.listener.tls_inspector"
}

[2018-09-28 22:25:35.362][11][warning][config] bazel-out/k8-opt/bin/external/envoy/source/common/config/_virtual_includes/grpc_mux_subscription_lib/common/config/grpc_mux_subscription_impl.h:70] gRPC config for type.googleapis.com/envoy.api.v2.Listener rejected: Proto constraint validation failed (ListenerValidationError.FilterChains[i]: ["embedded message failed validation"] | caused by FilterChainValidationError.TlsContext: ["embedded message failed validation"] | caused by DownstreamTlsContextValidationError.CommonTlsContext: ["embedded message failed validation"] | caused by CommonTlsContextValidationError.TlsCertificateSdsSecretConfigs[i]: ["embedded message failed validation"] | caused by SdsSecretConfigValidationError.SdsConfig: ["embedded message failed validation"] | caused by ConfigSourceValidationError.ApiConfigSource: ["embedded message failed validation"] | caused by ApiConfigSourceValidationError.GrpcServices[i]: ["embedded message failed validation"] | caused by GrpcServiceValidationError.GoogleGrpc: ["embedded message failed validation"] | caused by GoogleGrpcValidationError.ChannelCredentials: ["embedded message failed validation"] | caused by field: "credential_specifier", reason: is required): name: "10.16.0.69_8000"
address {
  socket_address {
    address: "10.16.0.69"
    port_value: 8000
  }
}
filter_chains {
  tls_context {
    common_tls_context {
      validation_context {
        trusted_ca {
          filename: "/etc/istio/certs/ca-root-cert.pem"
        }
      }
      alpn_protocols: "h2"
      alpn_protocols: "http/1.1"
      tls_certificate_sds_secret_configs {
        name: "spiffe://cluster.local/ns/foo/sa/default"
        sds_config {
          api_config_source {
            api_type: GRPC
            grpc_services {
              google_grpc {
                target_uri: "unix:/var/run/sds/uds_path"
                channel_credentials {
                  3: ""
                }
                call_credentials {
                  google_compute_engine {
                  }
                }
                stat_prefix: "sdsstat"
              }
            }
          }
        }
      }
    }
    require_client_certificate {
      value: true
    }
  }
  filters {
    name: "envoy.http_connection_manager"
    config {
      fields {
        key: "access_log"
        value {
          list_value {
            values {
              struct_value {
                fields {
                  key: "config"
                  value {
                    struct_value {
                      fields {
                        key: "format"
                        value {
                          string_value: "[%START_TIME%] \"%REQ(:METHOD)% %REQ(X-ENVOY-ORIGINAL-PATH?:PATH)%%PROTOCOL%\" %RESPONSE_CODE% %RESPONSE_FLAGS% %BYTES_RECEIVED% %BYTES_SENT% %DURATION% %RESP(X-ENVOY-UPSTREAM-SERVICE-TIME)% \"%REQ(X-FORWARDED-FOR)%\" \"%REQ(USER-AGENT)%\" \"%REQ(X-REQUEST-ID)%\" \"%REQ(:AUTHORITY)%\" \"%UPSTREAM_HOST%\" %UPSTREAM_CLUSTER% %UPSTREAM_LOCAL_ADDRESS% %DOWNSTREAM_LOCAL_ADDRESS% %DOWNSTREAM_REMOTE_ADDRESS% %REQUESTED_SERVER_NAME%\n"
                        }
                      }
                      fields {
                        key: "path"
                        value {
                          string_value: "/dev/stdout"
                        }
                      }
                    }
                  }
                }
                fields {
                  key: "name"
                  value {
                    string_value: "envoy.file_access_log"
                  }
                }
              }
            }
          }
        }
      }
      fields {
        key: "forward_client_cert_details"
        value {
          string_value: "APPEND_FORWARD"
        }
      }
      fields {
        key: "generate_request_id"
        value {
          bool_value: true
        }
      }
      fields {
        key: "http_filters"
        value {
          list_value {
            values {
              struct_value {
                fields {
                  key: "config"
                  value {
                    struct_value {
                      fields {
                        key: "policy"
                        value {
                          struct_value {
                            fields {
                              key: "peers"
                              value {
                                list_value {
                                  values {
                                    struct_value {
                                      fields {
                                        key: "mtls"
                                        value {
                                          struct_value {
                                          }
                                        }
                                      }
                                    }
                                  }
                                }
                              }
                            }
                          }
                        }
                      }
                    }
                  }
                }
                fields {
                  key: "name"
                  value {
                    string_value: "istio_authn"
                  }
                }
              }
            }
            values {
              struct_value {
                fields {
                  key: "config"
                  value {
                    struct_value {
                      fields {
                        key: "default_destination_service"
                        value {
                          string_value: "default"
                        }
                      }
                      fields {
                        key: "mixer_attributes"
                        value {
                          struct_value {
                            fields {
                              key: "attributes"
                              value {
                                struct_value {
                                  fields {
                                    key: "context.reporter.kind"
                                    value {
                                      struct_value {
                                        fields {
                                          key: "string_value"
                                          value {
                                            string_value: "inbound"
                                          }
                                        }
                                      }
                                    }
                                  }
                                  fields {
                                    key: "context.reporter.uid"
                                    value {
                                      struct_value {
                                        fields {
                                          key: "string_value"
                                          value {
                                            string_value: "kubernetes://httpbin-6d6c88c4f5-q8h2t.foo"
                                          }
                                        }
                                      }
                                    }
                                  }
                                  fields {
                                    key: "destination.ip"
                                    value {
                                      struct_value {
                                        fields {
                                          key: "bytes_value"
                                          value {
                                            string_value: "AAAAAAAAAAAAAP//ChAARQ=="
                                          }
                                        }
                                      }
                                    }
                                  }
                                  fields {
                                    key: "destination.namespace"
                                    value {
                                      struct_value {
                                        fields {
                                          key: "string_value"
                                          value {
                                            string_value: "foo"
                                          }
                                        }
                                      }
                                    }
                                  }
                                  fields {
                                    key: "destination.port"
                                    value {
                                      struct_value {
                                        fields {
                                          key: "int64_value"
                                          value {
                                            string_value: "8000"
                                          }
                                        }
                                      }
                                    }
                                  }
                                  fields {
                                    key: "destination.uid"
                                    value {
                                      struct_value {
                                        fields {
                                          key: "string_value"
                                          value {
                                            string_value: "kubernetes://httpbin-6d6c88c4f5-q8h2t.foo"
                                          }
                                        }
                                      }
                                    }
                                  }
                                }
                              }
                            }
                          }
                        }
                      }
                      fields {
                        key: "service_configs"
                        value {
                          struct_value {
                            fields {
                              key: "default"
                              value {
                                struct_value {
                                }
                              }
                            }
                          }
                        }
                      }
                      fields {
                        key: "transport"
                        value {
                          struct_value {
                            fields {
                              key: "attributes_for_mixer_proxy"
                              value {
                                struct_value {
                                  fields {
                                    key: "attributes"
                                    value {
                                      struct_value {
                                        fields {
                                          key: "source.uid"
                                          value {
                                            struct_value {
                                              fields {
                                                key: "string_value"
                                                value {
                                                  string_value: "kubernetes://httpbin-6d6c88c4f5-q8h2t.foo"
                                                }
                                              }
                                            }
                                          }
                                        }
                                      }
                                    }
                                  }
                                }
                              }
                            }
                            fields {
                              key: "check_cluster"
                              value {
                                string_value: "outbound|9091||istio-policy.istio-system.svc.cluster.local"
                              }
                            }
                            fields {
                              key: "network_fail_policy"
                              value {
                                struct_value {
                                  fields {
                                    key: "policy"
                                    value {
                                      string_value: "FAIL_CLOSE"
                                    }
                                  }
                                }
                              }
                            }
                            fields {
                              key: "report_cluster"
                              value {
                                string_value: "outbound|9091||istio-telemetry.istio-system.svc.cluster.local"
                              }
                            }
                          }
                        }
                      }
                    }
                  }
                }
                fields {
                  key: "name"
                  value {
                    string_value: "mixer"
                  }
                }
              }
            }
            values {
              struct_value {
                fields {
                  key: "name"
                  value {
                    string_value: "envoy.cors"
                  }
                }
              }
            }
            values {
              struct_value {
                fields {
                  key: "name"
                  value {
                    string_value: "envoy.fault"
                  }
                }
              }
            }
            values {
              struct_value {
                fields {
                  key: "name"
                  value {
                    string_value: "envoy.router"
                  }
                }
              }
            }
          }
        }
      }
      fields {
        key: "route_config"
        value {
          struct_value {
            fields {
              key: "name"
              value {
                string_value: "inbound|8000||httpbin.foo.svc.cluster.local"
              }
            }
            fields {
              key: "validate_clusters"
              value {
                bool_value: false
              }
            }
            fields {
              key: "virtual_hosts"
              value {
                list_value {
                  values {
                    struct_value {
                      fields {
                        key: "domains"
                        value {
                          list_value {
                            values {
                              string_value: "*"
                            }
                          }
                        }
                      }
                      fields {
                        key: "name"
                        value {
                          string_value: "inbound|http|8000"
                        }
                      }
                      fields {
                        key: "routes"
                        value {
                          list_value {
                            values {
                              struct_value {
                                fields {
                                  key: "decorator"
                                  value {
                                    struct_value {
                                      fields {
                                        key: "operation"
                                        value {
                                          string_value: "httpbin.foo.svc.cluster.local:8000/*"
                                        }
                                      }
                                    }
                                  }
                                }
                                fields {
                                  key: "match"
                                  value {
                                    struct_value {
                                      fields {
                                        key: "prefix"
                                        value {
                                          string_value: "/"
                                        }
                                      }
                                    }
                                  }
                                }
                                fields {
                                  key: "per_filter_config"
                                  value {
                                    struct_value {
                                      fields {
                                        key: "mixer"
                                        value {
                                          struct_value {
                                            fields {
                                              key: "mixer_attributes"
                                              value {
                                                struct_value {
                                                  fields {
                                                    key: "attributes"
                                                    value {
                                                      struct_value {
                                                        fields {
                                                          key: "destination.service.host"
                                                          value {
                                                            struct_value {
                                                              fields {
                                                                key: "string_value"
                                                                value {
                                                                  string_value: "httpbin.foo.svc.cluster.local"
                                                                }
                                                              }
                                                            }
                                                          }
                                                        }
                                                        fields {
                                                          key: "destination.service.name"
                                                          value {
                                                            struct_value {
                                                              fields {
                                                                key: "string_value"
                                                                value {
                                                                  string_value: "httpbin"
                                                                }
                                                              }
                                                            }
                                                          }
                                                        }
                                                        fields {
                                                          key: "destination.service.namespace"
                                                          value {
                                                            struct_value {
                                                              fields {
                                                                key: "string_value"
                                                                value {
                                                                  string_value: "foo"
                                                                }
                                                              }
                                                            }
                                                          }
                                                        }
                                                        fields {
                                                          key: "destination.service.uid"
                                                          value {
                                                            struct_value {
                                                              fields {
                                                                key: "string_value"
                                                                value {
                                                                  string_value: "istio://foo/services/httpbin"
                                                                }
                                                              }
                                                            }
                                                          }
                                                        }
                                                      }
                                                    }
                                                  }
                                                }
                                              }
                                            }
                                          }
                                        }
                                      }
                                    }
                                  }
                                }
                                fields {
                                  key: "route"
                                  value {
                                    struct_value {
                                      fields {
                                        key: "cluster"
                                        value {
                                          string_value: "inbound|8000||httpbin.foo.svc.cluster.local"
                                        }
                                      }
                                      fields {
                                        key: "max_grpc_timeout"
                                        value {
                                          string_value: "0s"
                                        }
                                      }
                                      fields {
                                        key: "timeout"
                                        value {
                                          string_value: "0s"
                                        }
                                      }
                                    }
                                  }
                                }
                              }
                            }
                          }
                        }
                      }
                    }
                  }
                }
              }
            }
          }
        }
      }
      fields {
        key: "stat_prefix"
        value {
          string_value: "10.16.0.69_8000"
        }
      }
      fields {
        key: "stream_idle_timeout"
        value {
          string_value: "0s"
        }
      }
      fields {
        key: "tracing"
        value {
          struct_value {
            fields {
              key: "client_sampling"
              value {
                struct_value {
                  fields {
                    key: "value"
                    value {
                      number_value: 100
                    }
                  }
                }
              }
            }
            fields {
              key: "overall_sampling"
              value {
                struct_value {
                  fields {
                    key: "value"
                    value {
                      number_value: 100
                    }
                  }
                }
              }
            }
            fields {
              key: "random_sampling"
              value {
                struct_value {
                  fields {
                    key: "value"
                    value {
                      number_value: 100
                    }
                  }
                }
              }
            }
          }
        }
      }
      fields {
        key: "upgrade_configs"
        value {
          list_value {
            values {
              struct_value {
                fields {
                  key: "upgrade_type"
                  value {
                    string_value: "websocket"
                  }
                }
              }
            }
          }
        }
      }
      fields {
        key: "use_remote_address"
        value {
          bool_value: false
        }
      }
    }
  }
}
deprecated_v1 {
  bind_to_port {
  }
}
listener_filters {
  name: "envoy.listener.tls_inspector"
}

[2018-09-28 22:25:36.292][11][warning][upstream] external/envoy/source/common/config/grpc_mux_impl.cc:231] gRPC config for type.googleapis.com/envoy.api.v2.Cluster update rejected: Proto constraint validation failed (ClusterValidationError.TlsContext: ["embedded message failed validation"] | caused by UpstreamTlsContextValidationError.CommonTlsContext: ["embedded message failed validation"] | caused by CommonTlsContextValidationError.TlsCertificateSdsSecretConfigs[i]: ["embedded message failed validation"] | caused by SdsSecretConfigValidationError.SdsConfig: ["embedded message failed validation"] | caused by ConfigSourceValidationError.ApiConfigSource: ["embedded message failed validation"] | caused by ApiConfigSourceValidationError.GrpcServices[i]: ["embedded message failed validation"] | caused by GrpcServiceValidationError.GoogleGrpc: ["embedded message failed validation"] | caused by GoogleGrpcValidationError.ChannelCredentials: ["embedded message failed validation"] | caused by field: "credential_specifier", reason: is required): name: "outbound|80||default-http-backend.kube-system.svc.cluster.local"
type: EDS
eds_cluster_config {
  eds_config {
    ads {
    }
  }
  service_name: "outbound|80||default-http-backend.kube-system.svc.cluster.local"
}
connect_timeout {
  seconds: 1
}
circuit_breakers {
  thresholds {
  }
}
tls_context {
  common_tls_context {
    validation_context {
      trusted_ca {
        filename: "/etc/istio/certs/ca-root-cert.pem"
      }
      verify_subject_alt_name: "spiffe://cluster.local/ns/kube-system/sa/default"
    }
    alpn_protocols: "istio"
    tls_certificate_sds_secret_configs {
      name: "spiffe://cluster.local/ns/kube-system/sa/default"
      sds_config {
        api_config_source {
          api_type: GRPC
          grpc_services {
            google_grpc {
              target_uri: "unix:/var/run/sds/uds_path"
              channel_credentials {
                3: ""
              }
              call_credentials {
                google_compute_engine {
                }
              }
              stat_prefix: "sdsstat"
            }
          }
        }
      }
    }
  }
  sni: "outbound|80||default-http-backend.kube-system.svc.cluster.local"
}

[2018-09-28 22:25:36.292][11][warning][config] bazel-out/k8-opt/bin/external/envoy/source/common/config/_virtual_includes/grpc_mux_subscription_lib/common/config/grpc_mux_subscription_impl.h:70] gRPC config for type.googleapis.com/envoy.api.v2.Cluster rejected: Proto constraint validation failed (ClusterValidationError.TlsContext: ["embedded message failed validation"] | caused by UpstreamTlsContextValidationError.CommonTlsContext: ["embedded message failed validation"] | caused by CommonTlsContextValidationError.TlsCertificateSdsSecretConfigs[i]: ["embedded message failed validation"] | caused by SdsSecretConfigValidationError.SdsConfig: ["embedded message failed validation"] | caused by ConfigSourceValidationError.ApiConfigSource: ["embedded message failed validation"] | caused by ApiConfigSourceValidationError.GrpcServices[i]: ["embedded message failed validation"] | caused by GrpcServiceValidationError.GoogleGrpc: ["embedded message failed validation"] | caused by GoogleGrpcValidationError.ChannelCredentials: ["embedded message failed validation"] | caused by field: "credential_specifier", reason: is required): name: "outbound|80||default-http-backend.kube-system.svc.cluster.local"
type: EDS
eds_cluster_config {
  eds_config {
    ads {
    }
  }
  service_name: "outbound|80||default-http-backend.kube-system.svc.cluster.local"
}
connect_timeout {
  seconds: 1
}
circuit_breakers {
  thresholds {
  }
}
tls_context {
  common_tls_context {
    validation_context {
      trusted_ca {
        filename: "/etc/istio/certs/ca-root-cert.pem"
      }
      verify_subject_alt_name: "spiffe://cluster.local/ns/kube-system/sa/default"
    }
    alpn_protocols: "istio"
    tls_certificate_sds_secret_configs {
      name: "spiffe://cluster.local/ns/kube-system/sa/default"
      sds_config {
        api_config_source {
          api_type: GRPC
          grpc_services {
            google_grpc {
              target_uri: "unix:/var/run/sds/uds_path"
              channel_credentials {
                3: ""
              }
              call_credentials {
                google_compute_engine {
                }
              }
              stat_prefix: "sdsstat"
            }
          }
        }
      }
    }
  }
  sni: "outbound|80||default-http-backend.kube-system.svc.cluster.local"
}

[2018-09-28 22:25:36.422][11][warning][upstream] external/envoy/source/common/config/grpc_mux_impl.cc:231] gRPC config for type.googleapis.com/envoy.api.v2.Listener update rejected: Proto constraint validation failed (ListenerValidationError.FilterChains[i]: ["embedded message failed validation"] | caused by FilterChainValidationError.TlsContext: ["embedded message failed validation"] | caused by DownstreamTlsContextValidationError.CommonTlsContext: ["embedded message failed validation"] | caused by CommonTlsContextValidationError.TlsCertificateSdsSecretConfigs[i]: ["embedded message failed validation"] | caused by SdsSecretConfigValidationError.SdsConfig: ["embedded message failed validation"] | caused by ConfigSourceValidationError.ApiConfigSource: ["embedded message failed validation"] | caused by ApiConfigSourceValidationError.GrpcServices[i]: ["embedded message failed validation"] | caused by GrpcServiceValidationError.GoogleGrpc: ["embedded message failed validation"] | caused by GoogleGrpcValidationError.ChannelCredentials: ["embedded message failed validation"] | caused by field: "credential_specifier", reason: is required): name: "10.16.0.69_8000"
address {
  socket_address {
    address: "10.16.0.69"
    port_value: 8000
  }
}
filter_chains {
  tls_context {
    common_tls_context {
      validation_context {
        trusted_ca {
          filename: "/etc/istio/certs/ca-root-cert.pem"
        }
      }
      alpn_protocols: "h2"
      alpn_protocols: "http/1.1"
      tls_certificate_sds_secret_configs {
        name: "spiffe://cluster.local/ns/foo/sa/default"
        sds_config {
          api_config_source {
            api_type: GRPC
            grpc_services {
              google_grpc {
                target_uri: "unix:/var/run/sds/uds_path"
                channel_credentials {
                  3: ""
                }
                call_credentials {
                  google_compute_engine {
                  }
                }
                stat_prefix: "sdsstat"
              }
            }
          }
        }
      }
    }
    require_client_certificate {
      value: true
    }
  }
  filters {
    name: "envoy.http_connection_manager"
    config {
      fields {
        key: "access_log"
        value {
          list_value {
            values {
              struct_value {
                fields {
                  key: "config"
                  value {
                    struct_value {
                      fields {
                        key: "format"
                        value {
                          string_value: "[%START_TIME%] \"%REQ(:METHOD)% %REQ(X-ENVOY-ORIGINAL-PATH?:PATH)%%PROTOCOL%\" %RESPONSE_CODE% %RESPONSE_FLAGS% %BYTES_RECEIVED% %BYTES_SENT% %DURATION% %RESP(X-ENVOY-UPSTREAM-SERVICE-TIME)% \"%REQ(X-FORWARDED-FOR)%\" \"%REQ(USER-AGENT)%\" \"%REQ(X-REQUEST-ID)%\" \"%REQ(:AUTHORITY)%\" \"%UPSTREAM_HOST%\" %UPSTREAM_CLUSTER% %UPSTREAM_LOCAL_ADDRESS% %DOWNSTREAM_LOCAL_ADDRESS% %DOWNSTREAM_REMOTE_ADDRESS% %REQUESTED_SERVER_NAME%\n"
                        }
                      }
                      fields {
                        key: "path"
                        value {
                          string_value: "/dev/stdout"
                        }
                      }
                    }
                  }
                }
                fields {
                  key: "name"
                  value {
                    string_value: "envoy.file_access_log"
                  }
                }
              }
            }
          }
        }
      }
      fields {
        key: "forward_client_cert_details"
        value {
          string_value: "APPEND_FORWARD"
        }
      }
      fields {
        key: "generate_request_id"
        value {
          bool_value: true
        }
      }
      fields {
        key: "http_filters"
        value {
          list_value {
            values {
              struct_value {
                fields {
                  key: "config"
                  value {
                    struct_value {
                      fields {
                        key: "policy"
                        value {
                          struct_value {
                            fields {
                              key: "peers"
                              value {
                                list_value {
                                  values {
                                    struct_value {
                                      fields {
                                        key: "mtls"
                                        value {
                                          struct_value {
                                          }
                                        }
                                      }
                                    }
                                  }
                                }
                              }
                            }
                          }
                        }
                      }
                    }
                  }
                }
                fields {
                  key: "name"
                  value {
                    string_value: "istio_authn"
                  }
                }
              }
            }
            values {
              struct_value {
                fields {
                  key: "config"
                  value {
                    struct_value {
                      fields {
                        key: "default_destination_service"
                        value {
                          string_value: "default"
                        }
                      }
                      fields {
                        key: "mixer_attributes"
                        value {
                          struct_value {
                            fields {
                              key: "attributes"
                              value {
                                struct_value {
                                  fields {
                                    key: "context.reporter.kind"
                                    value {
                                      struct_value {
                                        fields {
                                          key: "string_value"
                                          value {
                                            string_value: "inbound"
                                          }
                                        }
                                      }
                                    }
                                  }
                                  fields {
                                    key: "context.reporter.uid"
                                    value {
                                      struct_value {
                                        fields {
                                          key: "string_value"
                                          value {
                                            string_value: "kubernetes://httpbin-6d6c88c4f5-q8h2t.foo"
                                          }
                                        }
                                      }
                                    }
                                  }
                                  fields {
                                    key: "destination.ip"
                                    value {
                                      struct_value {
                                        fields {
                                          key: "bytes_value"
                                          value {
                                            string_value: "AAAAAAAAAAAAAP//ChAARQ=="
                                          }
                                        }
                                      }
                                    }
                                  }
                                  fields {
                                    key: "destination.namespace"
                                    value {
                                      struct_value {
                                        fields {
                                          key: "string_value"
                                          value {
                                            string_value: "foo"
                                          }
                                        }
                                      }
                                    }
                                  }
                                  fields {
                                    key: "destination.port"
                                    value {
                                      struct_value {
                                        fields {
                                          key: "int64_value"
                                          value {
                                            string_value: "8000"
                                          }
                                        }
                                      }
                                    }
                                  }
                                  fields {
                                    key: "destination.uid"
                                    value {
                                      struct_value {
                                        fields {
                                          key: "string_value"
                                          value {
                                            string_value: "kubernetes://httpbin-6d6c88c4f5-q8h2t.foo"
                                          }
                                        }
                                      }
                                    }
                                  }
                                }
                              }
                            }
                          }
                        }
                      }
                      fields {
                        key: "service_configs"
                        value {
                          struct_value {
                            fields {
                              key: "default"
                              value {
                                struct_value {
                                }
                              }
                            }
                          }
                        }
                      }
                      fields {
                        key: "transport"
                        value {
                          struct_value {
                            fields {
                              key: "attributes_for_mixer_proxy"
                              value {
                                struct_value {
                                  fields {
                                    key: "attributes"
                                    value {
                                      struct_value {
                                        fields {
                                          key: "source.uid"
                                          value {
                                            struct_value {
                                              fields {
                                                key: "string_value"
                                                value {
                                                  string_value: "kubernetes://httpbin-6d6c88c4f5-q8h2t.foo"
                                                }
                                              }
                                            }
                                          }
                                        }
                                      }
                                    }
                                  }
                                }
                              }
                            }
                            fields {
                              key: "check_cluster"
                              value {
                                string_value: "outbound|9091||istio-policy.istio-system.svc.cluster.local"
                              }
                            }
                            fields {
                              key: "network_fail_policy"
                              value {
                                struct_value {
                                  fields {
                                    key: "policy"
                                    value {
                                      string_value: "FAIL_CLOSE"
                                    }
                                  }
                                }
                              }
                            }
                            fields {
                              key: "report_cluster"
                              value {
                                string_value: "outbound|9091||istio-telemetry.istio-system.svc.cluster.local"
                              }
                            }
                          }
                        }
                      }
                    }
                  }
                }
                fields {
                  key: "name"
                  value {
                    string_value: "mixer"
                  }
                }
              }
            }
            values {
              struct_value {
                fields {
                  key: "name"
                  value {
                    string_value: "envoy.cors"
                  }
                }
              }
            }
            values {
              struct_value {
                fields {
                  key: "name"
                  value {
                    string_value: "envoy.fault"
                  }
                }
              }
            }
            values {
              struct_value {
                fields {
                  key: "name"
                  value {
                    string_value: "envoy.router"
                  }
                }
              }
            }
          }
        }
      }
      fields {
        key: "route_config"
        value {
          struct_value {
            fields {
              key: "name"
              value {
                string_value: "inbound|8000||httpbin.foo.svc.cluster.local"
              }
            }
            fields {
              key: "validate_clusters"
              value {
                bool_value: false
              }
            }
            fields {
              key: "virtual_hosts"
              value {
                list_value {
                  values {
                    struct_value {
                      fields {
                        key: "domains"
                        value {
                          list_value {
                            values {
                              string_value: "*"
                            }
                          }
                        }
                      }
                      fields {
                        key: "name"
                        value {
                          string_value: "inbound|http|8000"
                        }
                      }
                      fields {
                        key: "routes"
                        value {
                          list_value {
                            values {
                              struct_value {
                                fields {
                                  key: "decorator"
                                  value {
                                    struct_value {
                                      fields {
                                        key: "operation"
                                        value {
                                          string_value: "httpbin.foo.svc.cluster.local:8000/*"
                                        }
                                      }
                                    }
                                  }
                                }
                                fields {
                                  key: "match"
                                  value {
                                    struct_value {
                                      fields {
                                        key: "prefix"
                                        value {
                                          string_value: "/"
                                        }
                                      }
                                    }
                                  }
                                }
                                fields {
                                  key: "per_filter_config"
                                  value {
                                    struct_value {
                                      fields {
                                        key: "mixer"
                                        value {
                                          struct_value {
                                            fields {
                                              key: "mixer_attributes"
                                              value {
                                                struct_value {
                                                  fields {
                                                    key: "attributes"
                                                    value {
                                                      struct_value {
                                                        fields {
                                                          key: "destination.service.host"
                                                          value {
                                                            struct_value {
                                                              fields {
                                                                key: "string_value"
                                                                value {
                                                                  string_value: "httpbin.foo.svc.cluster.local"
                                                                }
                                                              }
                                                            }
                                                          }
                                                        }
                                                        fields {
                                                          key: "destination.service.name"
                                                          value {
                                                            struct_value {
                                                              fields {
                                                                key: "string_value"
                                                                value {
                                                                  string_value: "httpbin"
                                                                }
                                                              }
                                                            }
                                                          }
                                                        }
                                                        fields {
                                                          key: "destination.service.namespace"
                                                          value {
                                                            struct_value {
                                                              fields {
                                                                key: "string_value"
                                                                value {
                                                                  string_value: "foo"
                                                                }
                                                              }
                                                            }
                                                          }
                                                        }
                                                        fields {
                                                          key: "destination.service.uid"
                                                          value {
                                                            struct_value {
                                                              fields {
                                                                key: "string_value"
                                                                value {
                                                                  string_value: "istio://foo/services/httpbin"
                                                                }
                                                              }
                                                            }
                                                          }
                                                        }
                                                      }
                                                    }
                                                  }
                                                }
                                              }
                                            }
                                          }
                                        }
                                      }
                                    }
                                  }
                                }
                                fields {
                                  key: "route"
                                  value {
                                    struct_value {
                                      fields {
                                        key: "cluster"
                                        value {
                                          string_value: "inbound|8000||httpbin.foo.svc.cluster.local"
                                        }
                                      }
                                      fields {
                                        key: "max_grpc_timeout"
                                        value {
                                          string_value: "0s"
                                        }
                                      }
                                      fields {
                                        key: "timeout"
                                        value {
                                          string_value: "0s"
                                        }
                                      }
                                    }
                                  }
                                }
                              }
                            }
                          }
                        }
                      }
                    }
                  }
                }
              }
            }
          }
        }
      }
      fields {
        key: "stat_prefix"
        value {
          string_value: "10.16.0.69_8000"
        }
      }
      fields {
        key: "stream_idle_timeout"
        value {
          string_value: "0s"
        }
      }
      fields {
        key: "tracing"
        value {
          struct_value {
            fields {
              key: "client_sampling"
              value {
                struct_value {
                  fields {
                    key: "value"
                    value {
                      number_value: 100
                    }
                  }
                }
              }
            }
            fields {
              key: "overall_sampling"
              value {
                struct_value {
                  fields {
                    key: "value"
                    value {
                      number_value: 100
                    }
                  }
                }
              }
            }
            fields {
              key: "random_sampling"
              value {
                struct_value {
                  fields {
                    key: "value"
                    value {
                      number_value: 100
                    }
                  }
                }
              }
            }
          }
        }
      }
      fields {
        key: "upgrade_configs"
        value {
          list_value {
            values {
              struct_value {
                fields {
                  key: "upgrade_type"
                  value {
                    string_value: "websocket"
                  }
                }
              }
            }
          }
        }
      }
      fields {
        key: "use_remote_address"
        value {
          bool_value: false
        }
      }
    }
  }
}
deprecated_v1 {
  bind_to_port {
  }
}
listener_filters {
  name: "envoy.listener.tls_inspector"
}

[2018-09-28 22:25:36.424][11][warning][config] bazel-out/k8-opt/bin/external/envoy/source/common/config/_virtual_includes/grpc_mux_subscription_lib/common/config/grpc_mux_subscription_impl.h:70] gRPC config for type.googleapis.com/envoy.api.v2.Listener rejected: Proto constraint validation failed (ListenerValidationError.FilterChains[i]: ["embedded message failed validation"] | caused by FilterChainValidationError.TlsContext: ["embedded message failed validation"] | caused by DownstreamTlsContextValidationError.CommonTlsContext: ["embedded message failed validation"] | caused by CommonTlsContextValidationError.TlsCertificateSdsSecretConfigs[i]: ["embedded message failed validation"] | caused by SdsSecretConfigValidationError.SdsConfig: ["embedded message failed validation"] | caused by ConfigSourceValidationError.ApiConfigSource: ["embedded message failed validation"] | caused by ApiConfigSourceValidationError.GrpcServices[i]: ["embedded message failed validation"] | caused by GrpcServiceValidationError.GoogleGrpc: ["embedded message failed validation"] | caused by GoogleGrpcValidationError.ChannelCredentials: ["embedded message failed validation"] | caused by field: "credential_specifier", reason: is required): name: "10.16.0.69_8000"
address {
  socket_address {
    address: "10.16.0.69"
    port_value: 8000
  }
}
filter_chains {
  tls_context {
    common_tls_context {
      validation_context {
        trusted_ca {
          filename: "/etc/istio/certs/ca-root-cert.pem"
        }
      }
      alpn_protocols: "h2"
      alpn_protocols: "http/1.1"
      tls_certificate_sds_secret_configs {
        name: "spiffe://cluster.local/ns/foo/sa/default"
        sds_config {
          api_config_source {
            api_type: GRPC
            grpc_services {
              google_grpc {
                target_uri: "unix:/var/run/sds/uds_path"
                channel_credentials {
                  3: ""
                }
                call_credentials {
                  google_compute_engine {
                  }
                }
                stat_prefix: "sdsstat"
              }
            }
          }
        }
      }
    }
    require_client_certificate {
      value: true
    }
  }
  filters {
    name: "envoy.http_connection_manager"
    config {
      fields {
        key: "access_log"
        value {
          list_value {
            values {
              struct_value {
                fields {
                  key: "config"
                  value {
                    struct_value {
                      fields {
                        key: "format"
                        value {
                          string_value: "[%START_TIME%] \"%REQ(:METHOD)% %REQ(X-ENVOY-ORIGINAL-PATH?:PATH)%%PROTOCOL%\" %RESPONSE_CODE% %RESPONSE_FLAGS% %BYTES_RECEIVED% %BYTES_SENT% %DURATION% %RESP(X-ENVOY-UPSTREAM-SERVICE-TIME)% \"%REQ(X-FORWARDED-FOR)%\" \"%REQ(USER-AGENT)%\" \"%REQ(X-REQUEST-ID)%\" \"%REQ(:AUTHORITY)%\" \"%UPSTREAM_HOST%\" %UPSTREAM_CLUSTER% %UPSTREAM_LOCAL_ADDRESS% %DOWNSTREAM_LOCAL_ADDRESS% %DOWNSTREAM_REMOTE_ADDRESS% %REQUESTED_SERVER_NAME%\n"
                        }
                      }
                      fields {
                        key: "path"
                        value {
                          string_value: "/dev/stdout"
                        }
                      }
                    }
                  }
                }
                fields {
                  key: "name"
                  value {
                    string_value: "envoy.file_access_log"
                  }
                }
              }
            }
          }
        }
      }
      fields {
        key: "forward_client_cert_details"
        value {
          string_value: "APPEND_FORWARD"
        }
      }
      fields {
        key: "generate_request_id"
        value {
          bool_value: true
        }
      }
      fields {
        key: "http_filters"
        value {
          list_value {
            values {
              struct_value {
                fields {
                  key: "config"
                  value {
                    struct_value {
                      fields {
                        key: "policy"
                        value {
                          struct_value {
                            fields {
                              key: "peers"
                              value {
                                list_value {
                                  values {
                                    struct_value {
                                      fields {
                                        key: "mtls"
                                        value {
                                          struct_value {
                                          }
                                        }
                                      }
                                    }
                                  }
                                }
                              }
                            }
                          }
                        }
                      }
                    }
                  }
                }
                fields {
                  key: "name"
                  value {
                    string_value: "istio_authn"
                  }
                }
              }
            }
            values {
              struct_value {
                fields {
                  key: "config"
                  value {
                    struct_value {
                      fields {
                        key: "default_destination_service"
                        value {
                          string_value: "default"
                        }
                      }
                      fields {
                        key: "mixer_attributes"
                        value {
                          struct_value {
                            fields {
                              key: "attributes"
                              value {
                                struct_value {
                                  fields {
                                    key: "context.reporter.kind"
                                    value {
                                      struct_value {
                                        fields {
                                          key: "string_value"
                                          value {
                                            string_value: "inbound"
                                          }
                                        }
                                      }
                                    }
                                  }
                                  fields {
                                    key: "context.reporter.uid"
                                    value {
                                      struct_value {
                                        fields {
                                          key: "string_value"
                                          value {
                                            string_value: "kubernetes://httpbin-6d6c88c4f5-q8h2t.foo"
                                          }
                                        }
                                      }
                                    }
                                  }
                                  fields {
                                    key: "destination.ip"
                                    value {
                                      struct_value {
                                        fields {
                                          key: "bytes_value"
                                          value {
                                            string_value: "AAAAAAAAAAAAAP//ChAARQ=="
                                          }
                                        }
                                      }
                                    }
                                  }
                                  fields {
                                    key: "destination.namespace"
                                    value {
                                      struct_value {
                                        fields {
                                          key: "string_value"
                                          value {
                                            string_value: "foo"
                                          }
                                        }
                                      }
                                    }
                                  }
                                  fields {
                                    key: "destination.port"
                                    value {
                                      struct_value {
                                        fields {
                                          key: "int64_value"
                                          value {
                                            string_value: "8000"
                                          }
                                        }
                                      }
                                    }
                                  }
                                  fields {
                                    key: "destination.uid"
                                    value {
                                      struct_value {
                                        fields {
                                          key: "string_value"
                                          value {
                                            string_value: "kubernetes://httpbin-6d6c88c4f5-q8h2t.foo"
                                          }
                                        }
                                      }
                                    }
                                  }
                                }
                              }
                            }
                          }
                        }
                      }
                      fields {
                        key: "service_configs"
                        value {
                          struct_value {
                            fields {
                              key: "default"
                              value {
                                struct_value {
                                }
                              }
                            }
                          }
                        }
                      }
                      fields {
                        key: "transport"
                        value {
                          struct_value {
                            fields {
                              key: "attributes_for_mixer_proxy"
                              value {
                                struct_value {
                                  fields {
                                    key: "attributes"
                                    value {
                                      struct_value {
                                        fields {
                                          key: "source.uid"
                                          value {
                                            struct_value {
                                              fields {
                                                key: "string_value"
                                                value {
                                                  string_value: "kubernetes://httpbin-6d6c88c4f5-q8h2t.foo"
                                                }
                                              }
                                            }
                                          }
                                        }
                                      }
                                    }
                                  }
                                }
                              }
                            }
                            fields {
                              key: "check_cluster"
                              value {
                                string_value: "outbound|9091||istio-policy.istio-system.svc.cluster.local"
                              }
                            }
                            fields {
                              key: "network_fail_policy"
                              value {
                                struct_value {
                                  fields {
                                    key: "policy"
                                    value {
                                      string_value: "FAIL_CLOSE"
                                    }
                                  }
                                }
                              }
                            }
                            fields {
                              key: "report_cluster"
                              value {
                                string_value: "outbound|9091||istio-telemetry.istio-system.svc.cluster.local"
                              }
                            }
                          }
                        }
                      }
                    }
                  }
                }
                fields {
                  key: "name"
                  value {
                    string_value: "mixer"
                  }
                }
              }
            }
            values {
              struct_value {
                fields {
                  key: "name"
                  value {
                    string_value: "envoy.cors"
                  }
                }
              }
            }
            values {
              struct_value {
                fields {
                  key: "name"
                  value {
                    string_value: "envoy.fault"
                  }
                }
              }
            }
            values {
              struct_value {
                fields {
                  key: "name"
                  value {
                    string_value: "envoy.router"
                  }
                }
              }
            }
          }
        }
      }
      fields {
        key: "route_config"
        value {
          struct_value {
            fields {
              key: "name"
              value {
                string_value: "inbound|8000||httpbin.foo.svc.cluster.local"
              }
            }
            fields {
              key: "validate_clusters"
              value {
                bool_value: false
              }
            }
            fields {
              key: "virtual_hosts"
              value {
                list_value {
                  values {
                    struct_value {
                      fields {
                        key: "domains"
                        value {
                          list_value {
                            values {
                              string_value: "*"
                            }
                          }
                        }
                      }
                      fields {
                        key: "name"
                        value {
                          string_value: "inbound|http|8000"
                        }
                      }
                      fields {
                        key: "routes"
                        value {
                          list_value {
                            values {
                              struct_value {
                                fields {
                                  key: "decorator"
                                  value {
                                    struct_value {
                                      fields {
                                        key: "operation"
                                        value {
                                          string_value: "httpbin.foo.svc.cluster.local:8000/*"
                                        }
                                      }
                                    }
                                  }
                                }
                                fields {
                                  key: "match"
                                  value {
                                    struct_value {
                                      fields {
                                        key: "prefix"
                                        value {
                                          string_value: "/"
                                        }
                                      }
                                    }
                                  }
                                }
                                fields {
                                  key: "per_filter_config"
                                  value {
                                    struct_value {
                                      fields {
                                        key: "mixer"
                                        value {
                                          struct_value {
                                            fields {
                                              key: "mixer_attributes"
                                              value {
                                                struct_value {
                                                  fields {
                                                    key: "attributes"
                                                    value {
                                                      struct_value {
                                                        fields {
                                                          key: "destination.service.host"
                                                          value {
                                                            struct_value {
                                                              fields {
                                                                key: "string_value"
                                                                value {
                                                                  string_value: "httpbin.foo.svc.cluster.local"
                                                                }
                                                              }
                                                            }
                                                          }
                                                        }
                                                        fields {
                                                          key: "destination.service.name"
                                                          value {
                                                            struct_value {
                                                              fields {
                                                                key: "string_value"
                                                                value {
                                                                  string_value: "httpbin"
                                                                }
                                                              }
                                                            }
                                                          }
                                                        }
                                                        fields {
                                                          key: "destination.service.namespace"
                                                          value {
                                                            struct_value {
                                                              fields {
                                                                key: "string_value"
                                                                value {
                                                                  string_value: "foo"
                                                                }
                                                              }
                                                            }
                                                          }
                                                        }
                                                        fields {
                                                          key: "destination.service.uid"
                                                          value {
                                                            struct_value {
                                                              fields {
                                                                key: "string_value"
                                                                value {
                                                                  string_value: "istio://foo/services/httpbin"
                                                                }
                                                              }
                                                            }
                                                          }
                                                        }
                                                      }
                                                    }
                                                  }
                                                }
                                              }
                                            }
                                          }
                                        }
                                      }
                                    }
                                  }
                                }
                                fields {
                                  key: "route"
                                  value {
                                    struct_value {
                                      fields {
                                        key: "cluster"
                                        value {
                                          string_value: "inbound|8000||httpbin.foo.svc.cluster.local"
                                        }
                                      }
                                      fields {
                                        key: "max_grpc_timeout"
                                        value {
                                          string_value: "0s"
                                        }
                                      }
                                      fields {
                                        key: "timeout"
                                        value {
                                          string_value: "0s"
                                        }
                                      }
                                    }
                                  }
                                }
                              }
                            }
                          }
                        }
                      }
                    }
                  }
                }
              }
            }
          }
        }
      }
      fields {
        key: "stat_prefix"
        value {
          string_value: "10.16.0.69_8000"
        }
      }
      fields {
        key: "stream_idle_timeout"
        value {
          string_value: "0s"
        }
      }
      fields {
        key: "tracing"
        value {
          struct_value {
            fields {
              key: "client_sampling"
              value {
                struct_value {
                  fields {
                    key: "value"
                    value {
                      number_value: 100
                    }
                  }
                }
              }
            }
            fields {
              key: "overall_sampling"
              value {
                struct_value {
                  fields {
                    key: "value"
                    value {
                      number_value: 100
                    }
                  }
                }
              }
            }
            fields {
              key: "random_sampling"
              value {
                struct_value {
                  fields {
                    key: "value"
                    value {
                      number_value: 100
                    }
                  }
                }
              }
            }
          }
        }
      }
      fields {
        key: "upgrade_configs"
        value {
          list_value {
            values {
              struct_value {
                fields {
                  key: "upgrade_type"
                  value {
                    string_value: "websocket"
                  }
                }
              }
            }
          }
        }
      }
      fields {
        key: "use_remote_address"
        value {
          bool_value: false
        }
      }
    }
  }
}
deprecated_v1 {
  bind_to_port {
  }
}
listener_filters {
  name: "envoy.listener.tls_inspector"
}

2018-09-28T22:25:36.741372Z	info	Envoy proxy is NOT ready: 3 errors occurred:

* failed checking application ports. listeners="0.0.0.0:15090"
* envoy missing listener for inbound application port: 0
* envoy missing listener for inbound application port: 8000
2018-09-28T22:25:38.741370Z	info	Envoy proxy is NOT ready: 3 errors occurred:

* failed checking application ports. listeners="0.0.0.0:15090"
* envoy missing listener for inbound application port: 0
* envoy missing listener for inbound application port: 8000
2018-09-28T22:25:40.741320Z	info	Envoy proxy is NOT ready: 3 errors occurred:

* failed checking application ports. listeners="0.0.0.0:15090"
* envoy missing listener for inbound application port: 0
* envoy missing listener for inbound application port: 8000
[2018-09-28T22:25:32.741Z] "GET /listeners HTTP/1.1" 200 - 0 17 2 - "10.16.0.69" "Go-http-client/1.1" "-" "127.0.0.1:15000" "-"
[2018-09-28T22:25:34.741Z] "GET /listeners HTTP/1.1" 200 - 0 17 1 - "10.16.0.69" "Go-http-client/1.1" "-" "127.0.0.1:15000" "-"
[2018-09-28T22:25:36.741Z] "GET /listeners HTTP/1.1" 200 - 0 17 2 - "10.16.0.69" "Go-http-client/1.1" "-" "127.0.0.1:15000" "-"
[2018-09-28T22:25:38.741Z] "GET /listeners HTTP/1.1" 200 - 0 17 0 - "10.16.0.69" "Go-http-client/1.1" "-" "127.0.0.1:15000" "-"
[2018-09-28T22:25:40.741Z] "GET /listeners HTTP/1.1" 200 - 0 17 0 - "10.16.0.69" "Go-http-client/1.1" "-" "127.0.0.1:15000" "-"
2018-09-28T22:25:42.741319Z	info	Envoy proxy is NOT ready: 3 errors occurred:

* failed checking application ports. listeners="0.0.0.0:15090"
* envoy missing listener for inbound application port: 0
* envoy missing listener for inbound application port: 8000
2018-09-28T22:25:44.741200Z	info	Envoy proxy is NOT ready: 3 errors occurred:

* failed checking application ports. listeners="0.0.0.0:15090"
* envoy missing listener for inbound application port: 0
* envoy missing listener for inbound application port: 8000
2018-09-28T22:25:46.741295Z	info	Envoy proxy is NOT ready: 3 errors occurred:

* failed checking application ports. listeners="0.0.0.0:15090"
* envoy missing listener for inbound application port: 0
* envoy missing listener for inbound application port: 8000
2018-09-28T22:25:48.741118Z	info	Envoy proxy is NOT ready: 3 errors occurred:

* failed checking application ports. listeners="0.0.0.0:15090"
* envoy missing listener for inbound application port: 0
* envoy missing listener for inbound application port: 8000
2018-09-28T22:25:50.741354Z	info	Envoy proxy is NOT ready: 3 errors occurred:

* failed checking application ports. listeners="0.0.0.0:15090"
* envoy missing listener for inbound application port: 0
* envoy missing listener for inbound application port: 8000
[2018-09-28T22:25:42.741Z] "GET /listeners HTTP/1.1" 200 - 0 17 1 - "10.16.0.69" "Go-http-client/1.1" "-" "127.0.0.1:15000" "-"
[2018-09-28T22:25:44.740Z] "GET /listeners HTTP/1.1" 200 - 0 17 1 - "10.16.0.69" "Go-http-client/1.1" "-" "127.0.0.1:15000" "-"
[2018-09-28T22:25:46.740Z] "GET /listeners HTTP/1.1" 200 - 0 17 1 - "10.16.0.69" "Go-http-client/1.1" "-" "127.0.0.1:15000" "-"
[2018-09-28T22:25:48.740Z] "GET /listeners HTTP/1.1" 200 - 0 17 1 - "10.16.0.69" "Go-http-client/1.1" "-" "127.0.0.1:15000" "-"
[2018-09-28T22:25:50.741Z] "GET /listeners HTTP/1.1" 200 - 0 17 1 - "10.16.0.69" "Go-http-client/1.1" "-" "127.0.0.1:15000" "-"
2018-09-28T22:25:52.741399Z	info	Envoy proxy is NOT ready: 3 errors occurred:

* failed checking application ports. listeners="0.0.0.0:15090"
* envoy missing listener for inbound application port: 0
* envoy missing listener for inbound application port: 8000
2018-09-28T22:25:54.741262Z	info	Envoy proxy is NOT ready: 3 errors occurred:

* failed checking application ports. listeners="0.0.0.0:15090"
* envoy missing listener for inbound application port: 0
* envoy missing listener for inbound application port: 8000
2018-09-28T22:25:56.741429Z	info	Envoy proxy is NOT ready: 3 errors occurred:

* failed checking application ports. listeners="0.0.0.0:15090"
* envoy missing listener for inbound application port: 0
* envoy missing listener for inbound application port: 8000
2018-09-28T22:25:58.792788Z	info	Envoy proxy is NOT ready: 3 errors occurred:

* failed checking application ports. listeners="0.0.0.0:15090"
* envoy missing listener for inbound application port: 0
* envoy missing listener for inbound application port: 8000
2018-09-28T22:26:00.742588Z	info	Envoy proxy is NOT ready: 3 errors occurred:

* failed checking application ports. listeners="0.0.0.0:15090"
* envoy missing listener for inbound application port: 0
* envoy missing listener for inbound application port: 8000
[2018-09-28T22:25:52.741Z] "GET /listeners HTTP/1.1" 200 - 0 17 1 - "10.16.0.69" "Go-http-client/1.1" "-" "127.0.0.1:15000" "-"
[2018-09-28T22:25:54.741Z] "GET /listeners HTTP/1.1" 200 - 0 17 0 - "10.16.0.69" "Go-http-client/1.1" "-" "127.0.0.1:15000" "-"
[2018-09-28T22:25:56.741Z] "GET /listeners HTTP/1.1" 200 - 0 17 1 - "10.16.0.69" "Go-http-client/1.1" "-" "127.0.0.1:15000" "-"
[2018-09-28T22:25:58.792Z] "GET /listeners HTTP/1.1" 200 - 0 17 0 - "10.16.0.69" "Go-http-client/1.1" "-" "127.0.0.1:15000" "-"
[2018-09-28T22:26:00.742Z] "GET /listeners HTTP/1.1" 200 - 0 17 0 - "10.16.0.69" "Go-http-client/1.1" "-" "127.0.0.1:15000" "-"
2018-09-28T22:26:02.741267Z	info	Envoy proxy is NOT ready: 3 errors occurred:

* failed checking application ports. listeners="0.0.0.0:15090"
* envoy missing listener for inbound application port: 0
* envoy missing listener for inbound application port: 8000
2018-09-28T22:26:04.741445Z	info	Envoy proxy is NOT ready: 3 errors occurred:

* failed checking application ports. listeners="0.0.0.0:15090"
* envoy missing listener for inbound application port: 0
* envoy missing listener for inbound application port: 8000
2018-09-28T22:26:06.741361Z	info	Envoy proxy is NOT ready: 3 errors occurred:

* failed checking application ports. listeners="0.0.0.0:15090"
* envoy missing listener for inbound application port: 0
* envoy missing listener for inbound application port: 8000
2018-09-28T22:26:08.741401Z	info	Envoy proxy is NOT ready: 3 errors occurred:

* failed checking application ports. listeners="0.0.0.0:15090"
* envoy missing listener for inbound application port: 0
* envoy missing listener for inbound application port: 8000
2018-09-28T22:26:10.741171Z	info	Envoy proxy is NOT ready: 3 errors occurred:

* failed checking application ports. listeners="0.0.0.0:15090"
* envoy missing listener for inbound application port: 0
* envoy missing listener for inbound application port: 8000
[2018-09-28T22:26:02.741Z] "GET /listeners HTTP/1.1" 200 - 0 17 1 - "10.16.0.69" "Go-http-client/1.1" "-" "127.0.0.1:15000" "-"
[2018-09-28T22:26:04.741Z] "GET /listeners HTTP/1.1" 200 - 0 17 1 - "10.16.0.69" "Go-http-client/1.1" "-" "127.0.0.1:15000" "-"
[2018-09-28T22:26:06.741Z] "GET /listeners HTTP/1.1" 200 - 0 17 0 - "10.16.0.69" "Go-http-client/1.1" "-" "127.0.0.1:15000" "-"
[2018-09-28T22:26:08.741Z] "GET /listeners HTTP/1.1" 200 - 0 17 0 - "10.16.0.69" "Go-http-client/1.1" "-" "127.0.0.1:15000" "-"
[2018-09-28T22:26:10.740Z] "GET /listeners HTTP/1.1" 200 - 0 17 1 - "10.16.0.69" "Go-http-client/1.1" "-" "127.0.0.1:15000" "-"
2018-09-28T22:26:12.741266Z	info	Envoy proxy is NOT ready: 3 errors occurred:

* failed checking application ports. listeners="0.0.0.0:15090"
* envoy missing listener for inbound application port: 0
* envoy missing listener for inbound application port: 8000
2018-09-28T22:26:14.741163Z	info	Envoy proxy is NOT ready: 3 errors occurred:

* failed checking application ports. listeners="0.0.0.0:15090"
* envoy missing listener for inbound application port: 0
* envoy missing listener for inbound application port: 8000
2018-09-28T22:26:16.741174Z	info	Envoy proxy is NOT ready: 3 errors occurred:

* failed checking application ports. listeners="0.0.0.0:15090"
* envoy missing listener for inbound application port: 0
* envoy missing listener for inbound application port: 8000
2018-09-28T22:26:18.741227Z	info	Envoy proxy is NOT ready: 3 errors occurred:

* failed checking application ports. listeners="0.0.0.0:15090"
* envoy missing listener for inbound application port: 0
* envoy missing listener for inbound application port: 8000
[2018-09-28 22:26:20.648][11][info][main] external/envoy/source/server/drain_manager_impl.cc:63] shutting down parent after drain
2018-09-28T22:26:20.741377Z	info	Envoy proxy is NOT ready: 3 errors occurred:

* failed checking application ports. listeners="0.0.0.0:15090"
* envoy missing listener for inbound application port: 0
* envoy missing listener for inbound application port: 8000
[2018-09-28T22:26:12.741Z] "GET /listeners HTTP/1.1" 200 - 0 17 1 - "10.16.0.69" "Go-http-client/1.1" "-" "127.0.0.1:15000" "-"
[2018-09-28T22:26:14.740Z] "GET /listeners HTTP/1.1" 200 - 0 17 1 - "10.16.0.69" "Go-http-client/1.1" "-" "127.0.0.1:15000" "-"
[2018-09-28T22:26:16.740Z] "GET /listeners HTTP/1.1" 200 - 0 17 1 - "10.16.0.69" "Go-http-client/1.1" "-" "127.0.0.1:15000" "-"
[2018-09-28T22:26:18.740Z] "GET /listeners HTTP/1.1" 200 - 0 17 0 - "10.16.0.69" "Go-http-client/1.1" "-" "127.0.0.1:15000" "-"
[2018-09-28T22:26:20.741Z] "GET /listeners HTTP/1.1" 200 - 0 17 0 - "10.16.0.69" "Go-http-client/1.1" "-" "127.0.0.1:15000" "-"
2018-09-28T22:26:22.741139Z	info	Envoy proxy is NOT ready: 3 errors occurred:

* failed checking application ports. listeners="0.0.0.0:15090"
* envoy missing listener for inbound application port: 0
* envoy missing listener for inbound application port: 8000
2018-09-28T22:26:24.741185Z	info	Envoy proxy is NOT ready: 3 errors occurred:

* failed checking application ports. listeners="0.0.0.0:15090"
* envoy missing listener for inbound application port: 0
* envoy missing listener for inbound application port: 8000
2018-09-28T22:26:26.741533Z	info	Envoy proxy is NOT ready: 3 errors occurred:

* failed checking application ports. listeners="0.0.0.0:15090"
* envoy missing listener for inbound application port: 0
* envoy missing listener for inbound application port: 8000
2018-09-28T22:26:28.741222Z	info	Envoy proxy is NOT ready: 3 errors occurred:

* failed checking application ports. listeners="0.0.0.0:15090"
* envoy missing listener for inbound application port: 0
* envoy missing listener for inbound application port: 8000
2018-09-28T22:26:30.742024Z	info	Envoy proxy is NOT ready: 3 errors occurred:

* failed checking application ports. listeners="0.0.0.0:15090"
* envoy missing listener for inbound application port: 0
* envoy missing listener for inbound application port: 8000
[2018-09-28T22:26:22.740Z] "GET /listeners HTTP/1.1" 200 - 0 17 1 - "10.16.0.69" "Go-http-client/1.1" "-" "127.0.0.1:15000" "-"
[2018-09-28T22:26:24.740Z] "GET /listeners HTTP/1.1" 200 - 0 17 0 - "10.16.0.69" "Go-http-client/1.1" "-" "127.0.0.1:15000" "-"
[2018-09-28T22:26:26.741Z] "GET /listeners HTTP/1.1" 200 - 0 17 1 - "10.16.0.69" "Go-http-client/1.1" "-" "127.0.0.1:15000" "-"
[2018-09-28T22:26:28.740Z] "GET /listeners HTTP/1.1" 200 - 0 17 0 - "10.16.0.69" "Go-http-client/1.1" "-" "127.0.0.1:15000" "-"
[2018-09-28T22:26:30.741Z] "GET /listeners HTTP/1.1" 200 - 0 17 1 - "10.16.0.69" "Go-http-client/1.1" "-" "127.0.0.1:15000" "-"
2018-09-28T22:26:32.741556Z	info	Envoy proxy is NOT ready: 3 errors occurred:

* failed checking application ports. listeners="0.0.0.0:15090"
* envoy missing listener for inbound application port: 0
* envoy missing listener for inbound application port: 8000
2018-09-28T22:26:34.741609Z	info	Envoy proxy is NOT ready: 3 errors occurred:

* failed checking application ports. listeners="0.0.0.0:15090"
* envoy missing listener for inbound application port: 0
* envoy missing listener for inbound application port: 8000
2018-09-28T22:26:36.741255Z	info	Envoy proxy is NOT ready: 3 errors occurred:

* failed checking application ports. listeners="0.0.0.0:15090"
* envoy missing listener for inbound application port: 0
* envoy missing listener for inbound application port: 8000
2018-09-28T22:26:38.741281Z	info	Envoy proxy is NOT ready: 3 errors occurred:

* failed checking application ports. listeners="0.0.0.0:15090"
* envoy missing listener for inbound application port: 0
* envoy missing listener for inbound application port: 8000
2018-09-28T22:26:40.741416Z	info	Envoy proxy is NOT ready: 3 errors occurred:

* failed checking application ports. listeners="0.0.0.0:15090"
* envoy missing listener for inbound application port: 0
* envoy missing listener for inbound application port: 8000
[2018-09-28T22:26:32.741Z] "GET /listeners HTTP/1.1" 200 - 0 17 1 - "10.16.0.69" "Go-http-client/1.1" "-" "127.0.0.1:15000" "-"
[2018-09-28T22:26:34.741Z] "GET /listeners HTTP/1.1" 200 - 0 17 1 - "10.16.0.69" "Go-http-client/1.1" "-" "127.0.0.1:15000" "-"
[2018-09-28T22:26:36.741Z] "GET /listeners HTTP/1.1" 200 - 0 17 1 - "10.16.0.69" "Go-http-client/1.1" "-" "127.0.0.1:15000" "-"
[2018-09-28T22:26:38.741Z] "GET /listeners HTTP/1.1" 200 - 0 17 1 - "10.16.0.69" "Go-http-client/1.1" "-" "127.0.0.1:15000" "-"
[2018-09-28T22:26:40.741Z] "GET /listeners HTTP/1.1" 200 - 0 17 1 - "10.16.0.69" "Go-http-client/1.1" "-" "127.0.0.1:15000" "-"
2018-09-28T22:26:42.741598Z	info	Envoy proxy is NOT ready: 3 errors occurred:

* failed checking application ports. listeners="0.0.0.0:15090"
* envoy missing listener for inbound application port: 0
* envoy missing listener for inbound application port: 8000
2018-09-28T22:26:44.741316Z	info	Envoy proxy is NOT ready: 3 errors occurred:

* failed checking application ports. listeners="0.0.0.0:15090"
* envoy missing listener for inbound application port: 0
* envoy missing listener for inbound application port: 8000
2018-09-28T22:26:46.743143Z	info	Envoy proxy is NOT ready: 3 errors occurred:

* failed checking application ports. listeners="0.0.0.0:15090"
* envoy missing listener for inbound application port: 0
* envoy missing listener for inbound application port: 8000
2018-09-28T22:26:48.741405Z	info	Envoy proxy is NOT ready: 3 errors occurred:

* failed checking application ports. listeners="0.0.0.0:15090"
* envoy missing listener for inbound application port: 0
* envoy missing listener for inbound application port: 8000
2018-09-28T22:26:50.741841Z	info	Envoy proxy is NOT ready: 3 errors occurred:

* failed checking application ports. listeners="0.0.0.0:15090"
* envoy missing listener for inbound application port: 0
* envoy missing listener for inbound application port: 8000
[2018-09-28T22:26:42.741Z] "GET /listeners HTTP/1.1" 200 - 0 17 1 - "10.16.0.69" "Go-http-client/1.1" "-" "127.0.0.1:15000" "-"
[2018-09-28T22:26:44.741Z] "GET /listeners HTTP/1.1" 200 - 0 17 0 - "10.16.0.69" "Go-http-client/1.1" "-" "127.0.0.1:15000" "-"
[2018-09-28T22:26:46.742Z] "GET /listeners HTTP/1.1" 200 - 0 17 0 - "10.16.0.69" "Go-http-client/1.1" "-" "127.0.0.1:15000" "-"
[2018-09-28T22:26:48.741Z] "GET /listeners HTTP/1.1" 200 - 0 17 1 - "10.16.0.69" "Go-http-client/1.1" "-" "127.0.0.1:15000" "-"
[2018-09-28T22:26:50.741Z] "GET /listeners HTTP/1.1" 200 - 0 17 2 - "10.16.0.69" "Go-http-client/1.1" "-" "127.0.0.1:15000" "-"
2018-09-28T22:26:52.741429Z	info	Envoy proxy is NOT ready: 3 errors occurred:

* failed checking application ports. listeners="0.0.0.0:15090"
* envoy missing listener for inbound application port: 0
* envoy missing listener for inbound application port: 8000
2018-09-28T22:26:54.741282Z	info	Envoy proxy is NOT ready: 3 errors occurred:

* failed checking application ports. listeners="0.0.0.0:15090"
* envoy missing listener for inbound application port: 0
* envoy missing listener for inbound application port: 8000
2018-09-28T22:26:56.741153Z	info	Envoy proxy is NOT ready: 3 errors occurred:

* failed checking application ports. listeners="0.0.0.0:15090"
* envoy missing listener for inbound application port: 0
* envoy missing listener for inbound application port: 8000
2018-09-28T22:26:58.741294Z	info	Envoy proxy is NOT ready: 3 errors occurred:

* failed checking application ports. listeners="0.0.0.0:15090"
* envoy missing listener for inbound application port: 0
* envoy missing listener for inbound application port: 8000
2018-09-28T22:27:00.741481Z	info	Envoy proxy is NOT ready: 3 errors occurred:

* failed checking application ports. listeners="0.0.0.0:15090"
* envoy missing listener for inbound application port: 0
* envoy missing listener for inbound application port: 8000
[2018-09-28T22:26:52.741Z] "GET /listeners HTTP/1.1" 200 - 0 17 1 - "10.16.0.69" "Go-http-client/1.1" "-" "127.0.0.1:15000" "-"
[2018-09-28T22:26:54.741Z] "GET /listeners HTTP/1.1" 200 - 0 17 1 - "10.16.0.69" "Go-http-client/1.1" "-" "127.0.0.1:15000" "-"
[2018-09-28T22:26:56.740Z] "GET /listeners HTTP/1.1" 200 - 0 17 1 - "10.16.0.69" "Go-http-client/1.1" "-" "127.0.0.1:15000" "-"
[2018-09-28T22:26:58.741Z] "GET /listeners HTTP/1.1" 200 - 0 17 1 - "10.16.0.69" "Go-http-client/1.1" "-" "127.0.0.1:15000" "-"
[2018-09-28T22:27:00.741Z] "GET /listeners HTTP/1.1" 200 - 0 17 1 - "10.16.0.69" "Go-http-client/1.1" "-" "127.0.0.1:15000" "-"
2018-09-28T22:27:02.741315Z	info	Envoy proxy is NOT ready: 3 errors occurred:

* failed checking application ports. listeners="0.0.0.0:15090"
* envoy missing listener for inbound application port: 0
* envoy missing listener for inbound application port: 8000
2018-09-28T22:27:04.741224Z	info	Envoy proxy is NOT ready: 3 errors occurred:

* failed checking application ports. listeners="0.0.0.0:15090"
* envoy missing listener for inbound application port: 0
* envoy missing listener for inbound application port: 8000
2018-09-28T22:27:06.741247Z	info	Envoy proxy is NOT ready: 3 errors occurred:

* failed checking application ports. listeners="0.0.0.0:15090"
* envoy missing listener for inbound application port: 0
* envoy missing listener for inbound application port: 8000
2018-09-28T22:27:08.741754Z	info	Envoy proxy is NOT ready: 3 errors occurred:

* failed checking application ports. listeners="0.0.0.0:15090"
* envoy missing listener for inbound application port: 0
* envoy missing listener for inbound application port: 8000
2018-09-28T22:27:10.741205Z	info	Envoy proxy is NOT ready: 3 errors occurred:

* failed checking application ports. listeners="0.0.0.0:15090"
* envoy missing listener for inbound application port: 0
* envoy missing listener for inbound application port: 8000
[2018-09-28T22:27:02.741Z] "GET /listeners HTTP/1.1" 200 - 0 17 1 - "10.16.0.69" "Go-http-client/1.1" "-" "127.0.0.1:15000" "-"
[2018-09-28T22:27:04.740Z] "GET /listeners HTTP/1.1" 200 - 0 17 0 - "10.16.0.69" "Go-http-client/1.1" "-" "127.0.0.1:15000" "-"
[2018-09-28T22:27:06.740Z] "GET /listeners HTTP/1.1" 200 - 0 17 1 - "10.16.0.69" "Go-http-client/1.1" "-" "127.0.0.1:15000" "-"
[2018-09-28T22:27:08.741Z] "GET /listeners HTTP/1.1" 200 - 0 17 1 - "10.16.0.69" "Go-http-client/1.1" "-" "127.0.0.1:15000" "-"
[2018-09-28T22:27:10.740Z] "GET /listeners HTTP/1.1" 200 - 0 17 1 - "10.16.0.69" "Go-http-client/1.1" "-" "127.0.0.1:15000" "-"
2018-09-28T22:27:12.741165Z	info	Envoy proxy is NOT ready: 3 errors occurred:

* failed checking application ports. listeners="0.0.0.0:15090"
* envoy missing listener for inbound application port: 0
* envoy missing listener for inbound application port: 8000
2018-09-28T22:27:14.741180Z	info	Envoy proxy is NOT ready: 3 errors occurred:

* failed checking application ports. listeners="0.0.0.0:15090"
* envoy missing listener for inbound application port: 0
* envoy missing listener for inbound application port: 8000
2018-09-28T22:27:16.741223Z	info	Envoy proxy is NOT ready: 3 errors occurred:

* failed checking application ports. listeners="0.0.0.0:15090"
* envoy missing listener for inbound application port: 0
* envoy missing listener for inbound application port: 8000
2018-09-28T22:27:18.741284Z	info	Envoy proxy is NOT ready: 3 errors occurred:

* failed checking application ports. listeners="0.0.0.0:15090"
* envoy missing listener for inbound application port: 0
* envoy missing listener for inbound application port: 8000
2018-09-28T22:27:20.742932Z	info	Envoy proxy is NOT ready: 3 errors occurred:

* failed checking application ports. listeners="0.0.0.0:15090"
* envoy missing listener for inbound application port: 0
* envoy missing listener for inbound application port: 8000
[2018-09-28T22:27:12.740Z] "GET /listeners HTTP/1.1" 200 - 0 17 1 - "10.16.0.69" "Go-http-client/1.1" "-" "127.0.0.1:15000" "-"
[2018-09-28T22:27:14.740Z] "GET /listeners HTTP/1.1" 200 - 0 17 0 - "10.16.0.69" "Go-http-client/1.1" "-" "127.0.0.1:15000" "-"
[2018-09-28T22:27:16.740Z] "GET /listeners HTTP/1.1" 200 - 0 17 0 - "10.16.0.69" "Go-http-client/1.1" "-" "127.0.0.1:15000" "-"
[2018-09-28T22:27:18.741Z] "GET /listeners HTTP/1.1" 200 - 0 17 1 - "10.16.0.69" "Go-http-client/1.1" "-" "127.0.0.1:15000" "-"
[2018-09-28T22:27:20.742Z] "GET /listeners HTTP/1.1" 200 - 0 17 1 - "10.16.0.69" "Go-http-client/1.1" "-" "127.0.0.1:15000" "-"
2018-09-28T22:27:22.741447Z	info	Envoy proxy is NOT ready: 3 errors occurred:

* failed checking application ports. listeners="0.0.0.0:15090"
* envoy missing listener for inbound application port: 0
* envoy missing listener for inbound application port: 8000
2018-09-28T22:27:24.741382Z	info	Envoy proxy is NOT ready: 3 errors occurred:

* failed checking application ports. listeners="0.0.0.0:15090"
* envoy missing listener for inbound application port: 0
* envoy missing listener for inbound application port: 8000
2018-09-28T22:27:26.741818Z	info	Envoy proxy is NOT ready: 3 errors occurred:

* failed checking application ports. listeners="0.0.0.0:15090"
* envoy missing listener for inbound application port: 0
* envoy missing listener for inbound application port: 8000
2018-09-28T22:27:28.741510Z	info	Envoy proxy is NOT ready: 3 errors occurred:

* failed checking application ports. listeners="0.0.0.0:15090"
* envoy missing listener for inbound application port: 0
* envoy missing listener for inbound application port: 8000
2018-09-28T22:27:30.742230Z	info	Envoy proxy is NOT ready: 3 errors occurred:

* failed checking application ports. listeners="0.0.0.0:15090"
* envoy missing listener for inbound application port: 0
* envoy missing listener for inbound application port: 8000
[2018-09-28T22:27:22.741Z] "GET /listeners HTTP/1.1" 200 - 0 17 1 - "10.16.0.69" "Go-http-client/1.1" "-" "127.0.0.1:15000" "-"
[2018-09-28T22:27:24.741Z] "GET /listeners HTTP/1.1" 200 - 0 17 0 - "10.16.0.69" "Go-http-client/1.1" "-" "127.0.0.1:15000" "-"
[2018-09-28T22:27:26.741Z] "GET /listeners HTTP/1.1" 200 - 0 17 1 - "10.16.0.69" "Go-http-client/1.1" "-" "127.0.0.1:15000" "-"
[2018-09-28T22:27:28.741Z] "GET /listeners HTTP/1.1" 200 - 0 17 1 - "10.16.0.69" "Go-http-client/1.1" "-" "127.0.0.1:15000" "-"
[2018-09-28T22:27:30.740Z] "GET /listeners HTTP/1.1" 200 - 0 17 3 - "10.16.0.69" "Go-http-client/1.1" "-" "127.0.0.1:15000" "-"
2018-09-28T22:27:32.741226Z	info	Envoy proxy is NOT ready: 3 errors occurred:

* failed checking application ports. listeners="0.0.0.0:15090"
* envoy missing listener for inbound application port: 0
* envoy missing listener for inbound application port: 8000
2018-09-28T22:27:34.741175Z	info	Envoy proxy is NOT ready: 3 errors occurred:

* failed checking application ports. listeners="0.0.0.0:15090"
* envoy missing listener for inbound application port: 0
* envoy missing listener for inbound application port: 8000
2018-09-28T22:27:36.741199Z	info	Envoy proxy is NOT ready: 3 errors occurred:

* failed checking application ports. listeners="0.0.0.0:15090"
* envoy missing listener for inbound application port: 0
* envoy missing listener for inbound application port: 8000
2018-09-28T22:27:38.741068Z	info	Envoy proxy is NOT ready: 3 errors occurred:

* failed checking application ports. listeners="0.0.0.0:15090"
* envoy missing listener for inbound application port: 0
* envoy missing listener for inbound application port: 8000
2018-09-28T22:27:40.741113Z	info	Envoy proxy is NOT ready: 3 errors occurred:

* failed checking application ports. listeners="0.0.0.0:15090"
* envoy missing listener for inbound application port: 0
* envoy missing listener for inbound application port: 8000
[2018-09-28T22:27:32.740Z] "GET /listeners HTTP/1.1" 200 - 0 17 0 - "10.16.0.69" "Go-http-client/1.1" "-" "127.0.0.1:15000" "-"
[2018-09-28T22:27:34.740Z] "GET /listeners HTTP/1.1" 200 - 0 17 0 - "10.16.0.69" "Go-http-client/1.1" "-" "127.0.0.1:15000" "-"
[2018-09-28T22:27:36.740Z] "GET /listeners HTTP/1.1" 200 - 0 17 1 - "10.16.0.69" "Go-http-client/1.1" "-" "127.0.0.1:15000" "-"
[2018-09-28T22:27:38.740Z] "GET /listeners HTTP/1.1" 200 - 0 17 0 - "10.16.0.69" "Go-http-client/1.1" "-" "127.0.0.1:15000" "-"
[2018-09-28T22:27:40.740Z] "GET /listeners HTTP/1.1" 200 - 0 17 1 - "10.16.0.69" "Go-http-client/1.1" "-" "127.0.0.1:15000" "-"
2018-09-28T22:27:42.741234Z	info	Envoy proxy is NOT ready: 3 errors occurred:

* failed checking application ports. listeners="0.0.0.0:15090"
* envoy missing listener for inbound application port: 0
* envoy missing listener for inbound application port: 8000
2018-09-28T22:27:44.741094Z	info	Envoy proxy is NOT ready: 3 errors occurred:

* failed checking application ports. listeners="0.0.0.0:15090"
* envoy missing listener for inbound application port: 0
* envoy missing listener for inbound application port: 8000
2018-09-28T22:27:46.741211Z	info	Envoy proxy is NOT ready: 3 errors occurred:

* failed checking application ports. listeners="0.0.0.0:15090"
* envoy missing listener for inbound application port: 0
* envoy missing listener for inbound application port: 8000
2018-09-28T22:27:48.741249Z	info	Envoy proxy is NOT ready: 3 errors occurred:

* failed checking application ports. listeners="0.0.0.0:15090"
* envoy missing listener for inbound application port: 0
* envoy missing listener for inbound application port: 8000
2018-09-28T22:27:50.741190Z	info	Envoy proxy is NOT ready: 3 errors occurred:

* failed checking application ports. listeners="0.0.0.0:15090"
* envoy missing listener for inbound application port: 0
* envoy missing listener for inbound application port: 8000
[2018-09-28T22:27:42.740Z] "GET /listeners HTTP/1.1" 200 - 0 17 1 - "10.16.0.69" "Go-http-client/1.1" "-" "127.0.0.1:15000" "-"
[2018-09-28T22:27:44.740Z] "GET /listeners HTTP/1.1" 200 - 0 17 0 - "10.16.0.69" "Go-http-client/1.1" "-" "127.0.0.1:15000" "-"
[2018-09-28T22:27:46.740Z] "GET /listeners HTTP/1.1" 200 - 0 17 0 - "10.16.0.69" "Go-http-client/1.1" "-" "127.0.0.1:15000" "-"
[2018-09-28T22:27:48.740Z] "GET /listeners HTTP/1.1" 200 - 0 17 0 - "10.16.0.69" "Go-http-client/1.1" "-" "127.0.0.1:15000" "-"
[2018-09-28T22:27:50.740Z] "GET /listeners HTTP/1.1" 200 - 0 17 1 - "10.16.0.69" "Go-http-client/1.1" "-" "127.0.0.1:15000" "-"
2018-09-28T22:27:52.741347Z	info	Envoy proxy is NOT ready: 3 errors occurred:

* failed checking application ports. listeners="0.0.0.0:15090"
* envoy missing listener for inbound application port: 0
* envoy missing listener for inbound application port: 8000
2018-09-28T22:27:54.741424Z	info	Envoy proxy is NOT ready: 3 errors occurred:

* failed checking application ports. listeners="0.0.0.0:15090"
* envoy missing listener for inbound application port: 0
* envoy missing listener for inbound application port: 8000
2018-09-28T22:27:56.741485Z	info	Envoy proxy is NOT ready: 3 errors occurred:

* failed checking application ports. listeners="0.0.0.0:15090"
* envoy missing listener for inbound application port: 0
* envoy missing listener for inbound application port: 8000
2018-09-28T22:27:58.741158Z	info	Envoy proxy is NOT ready: 3 errors occurred:

* failed checking application ports. listeners="0.0.0.0:15090"
* envoy missing listener for inbound application port: 0
* envoy missing listener for inbound application port: 8000
2018-09-28T22:28:00.741207Z	info	Envoy proxy is NOT ready: 3 errors occurred:

* failed checking application ports. listeners="0.0.0.0:15090"
* envoy missing listener for inbound application port: 0
* envoy missing listener for inbound application port: 8000
[2018-09-28T22:27:52.741Z] "GET /listeners HTTP/1.1" 200 - 0 17 0 - "10.16.0.69" "Go-http-client/1.1" "-" "127.0.0.1:15000" "-"
[2018-09-28T22:27:54.741Z] "GET /listeners HTTP/1.1" 200 - 0 17 0 - "10.16.0.69" "Go-http-client/1.1" "-" "127.0.0.1:15000" "-"
[2018-09-28T22:27:56.741Z] "GET /listeners HTTP/1.1" 200 - 0 17 1 - "10.16.0.69" "Go-http-client/1.1" "-" "127.0.0.1:15000" "-"
[2018-09-28T22:27:58.740Z] "GET /listeners HTTP/1.1" 200 - 0 17 0 - "10.16.0.69" "Go-http-client/1.1" "-" "127.0.0.1:15000" "-"
[2018-09-28T22:28:00.741Z] "GET /listeners HTTP/1.1" 200 - 0 17 0 - "10.16.0.69" "Go-http-client/1.1" "-" "127.0.0.1:15000" "-"
2018-09-28T22:28:02.741238Z	info	Envoy proxy is NOT ready: 3 errors occurred:

* failed checking application ports. listeners="0.0.0.0:15090"
* envoy missing listener for inbound application port: 0
* envoy missing listener for inbound application port: 8000
2018-09-28T22:28:04.741170Z	info	Envoy proxy is NOT ready: 3 errors occurred:

* failed checking application ports. listeners="0.0.0.0:15090"
* envoy missing listener for inbound application port: 0
* envoy missing listener for inbound application port: 8000
2018-09-28T22:28:06.741142Z	info	Envoy proxy is NOT ready: 3 errors occurred:

* failed checking application ports. listeners="0.0.0.0:15090"
* envoy missing listener for inbound application port: 0
* envoy missing listener for inbound application port: 8000
2018-09-28T22:28:08.741284Z	info	Envoy proxy is NOT ready: 3 errors occurred:

* failed checking application ports. listeners="0.0.0.0:15090"
* envoy missing listener for inbound application port: 0
* envoy missing listener for inbound application port: 8000
